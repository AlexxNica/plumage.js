function recursiveLinkify(a,b,c){$.each(a.contents(),function(a,d){d=$(d),d.get(0).nodeType==document.TEXT_NODE?d.after($("<div />").text(d.text()).html().replace(b,c)).remove():"A"!=d.prop("tagName")&&"BUTTON"!=d.prop("tagName")&&recursiveLinkify(d,b,c)})}if(define("PlumageRoot",[],function(){return{model:{},collection:{},controller:{},util:{},vendor:{},view:{comment:{},controller:{},form:{fields:{picker:{}}},grid:{},menu:{}}}}),define("ControllerManager",["jquery","underscore","backbone","PlumageRoot"],function(a,b,c,d){var e=function(a,b){this.app=a,this.controllers={},this.controllerNames=b,this.initialize.apply(this,arguments)};return b.extend(e.prototype,{initialize:function(){this.initControllers()},getController:function(a){return this.controllers[a]},initControllers:function(){b.each(this.controllerNames,function(a){var b=a;b.indexOf("/")<0&&(b="controller/"+b);var c=requirejs(b);this.controllers[a]=new c(this.app)},this)}}),d.ControllerManager=e}),define("util/Logger",["jquery","underscore","backbone","PlumageRoot"],function(a,b,c,d){var e=function(){this.initialize.apply(this,arguments)};return b.extend(e.prototype,{url:void 0,localStorageKey:"Plumage.util.Logger.failedLogs",initialize:function(a){b.extend(this,a),this.retryLogs()},error:function(a,b){this.sendLog({level:"error",type:a,message:b})},sendLog:function(a){void 0===a.time&&(a.time=(new Date).getTime()),this.storeLog(a),c.ajax({type:"POST",url:this.url,data:a,success:this.getSuccessHandler(a).bind(this)})},getStoredLogs:function(){var a=localStorage.getItem(this.localStorageKey);if(a)try{return JSON.parse(a)}catch(b){}return[]},retryLogs:function(){for(var a=this.getStoredLogs(),b=0;b<a.length;b++)this.sendLog(a[b])},storeLog:function(a){for(var b=this.getStoredLogs(),c=0;c<b.length;c++)if(b[c].time===a.time&&b[c].type===a.type)return;b.push(a),localStorage.setItem(this.localStorageKey,JSON.stringify(b))},removeLog:function(a){var c=this.getStoredLogs();c&&localStorage.setItem(this.localStorageKey,JSON.stringify(b.filter(c,function(b){return b.time!==a.time&&b.type!==a.type})))},clearLogs:function(){localStorage.removeItem(this.localStorageKey)},getSuccessHandler:function(a){return function(){this.removeLog(a)}}}),d.util.Logger=e}),define("App",["jquery","underscore","backbone","handlebars","PlumageRoot","ControllerManager","util/Logger"],function(a,b,c,d,e,f){var g=function(){this.initialize.apply(this,arguments)};return b.extend(g.prototype,c.Events,{controllers:void 0,views:{current:null},initCSRFToken:!1,initialize:function(d){b.extend(this,d),this.registerHandlebarsHelpers(),this.controllerManager=new f(this,this.controllers),this.initCSRFToken&&a.ajaxSetup({headers:{"X-CSRF-Token":a('meta[name="csrf-token"]').attr("content")}}),this.dispatch=b.extend({},c.Events)},registerHandlebarsHelpers:function(){d.registerHelper("setIndex",function(a){this.index=Number(a+1)})},getViewState:function(){var a=this.views.current;return a&&a.model?a.model.getQueryParams():{}}}),g.extend=c.Model.extend,e.App=g}),define("RequestManager",["jquery","underscore","backbone","PlumageRoot"],function(a,b,c,d){var e,f=function(){this.requests=[],this.initialize.apply(this,arguments)};return b.extend(f.prototype,{initialize:function(){},loadModel:function(a,c){c=b.defaults({},c,{reset:!0});var d=c.success;c.success=function(a,b,c){this.onSuccess(a,b,c),d&&d(a,b,c)}.bind(this);var e=a.load(c);return e&&this.requests.push({xhr:e,url:a.url()}),e},abortOutstandingRequests:function(){for(var a=0;a<this.requests.length;a++){{var b=this.requests[a].xhr;this.requests[a].url}b.abort&&b.abort()}this.requests=[]},onSuccess:function(a,b){b.meta&&b.meta.message_body&&theApp.dispatch.trigger("message",b.meta.message_body,b.meta.message_class)}}),void 0===e&&(e=new f),d.requestManager=e}),define("util/ModelUtil",["jquery","PlumageRoot"],function(a,b){return b.util.ModelUtil={loadClass:function(a){return"string"==typeof a?require(a):a},mergeOption:function(b,c,d,e){var f=[d[b]||{}];if(e)for(var g=c;g;)g.hasOwnProperty(b)&&f.unshift(g[b]),g=Object.getPrototypeOf(g);else f.unshift(c[b]||{});var h=a.extend.apply(null,[!0,{}].concat(f));delete d[b],c[b]=h},parseQueryString:function(b){if(!b)return void 0;var c={};return b=decodeURIComponent(b.replace(/\+/g,"%20")),b&&a.each(b.split("&"),function(a,b){if(b){var d=b.split("=");c[d[0]]=d[1]}}),c}}}),define("collection/BufferedCollection",["jquery","underscore","backbone","PlumageRoot"],function(a,b,c,d){var e=function(){this.initialize.apply(this,arguments)};b.extend(e.prototype,c.Events,{buffer:void 0,idToIndex:void 0,requests:void 0,total:0,initialize:function(a){this.requests=[],this.clearBuffer(),this.collection=a,this.collection.on("load",this.onCollectionLoad,this),this.collection.on("all",this.onCollectionEvent,this)},at:function(a){return this.buffer[a]},getById:function(a){return this.at(this.idToIndex[a])},indexOf:function(a){return this.idToIndex[a.id]},size:function(){return this.total},ensureData:function(a,b){if(!this.collection.fetched)return this.trigger("beginPageLoad",this,0),this.collection.once("load",function(){this.ensureData(a,b)}.bind(this)),void this.collection.load();var c=this.collection.get("pageSize");0>a&&(a=0),b||(b=a+c-1);for(var d=Math.floor(a/c),e=Math.floor(b/c);void 0!==this.buffer[d*c]&&e>d;)d+=1;for(;void 0!==this.buffer[e*c]&&e>d;)e-=1;if(!(d>e||d===e&&void 0!==this.buffer[d*c])){this.trigger("beginLoad",this,a,b);for(var f=d;e>=f;f++)this.loadPage(f)}},loadPage:function(a){if(void 0===this.requests[a]){var c={data:b.extend(this.collection.getQueryParams(),{page:a,noTotal:!0}),success:function(b){this.collection.reset(b,{parse:!0,silent:!0}),this.collection.onLoad({silent:!0}),this.onBufferLoad(this.collection,a)}.bind(this)};this.trigger("beginPageLoad",this,a),this.requests[a]=this.collection.sync("read",this.collection,c)}},onBufferLoad:function(a,b){delete this.requests[b],this.addModelsToBuffer(a.models,b,this.collection.get("pageSize"))},onCollectionEvent:function(a){"load"!==a&&this.trigger(a)},onCollectionLoad:function(a){this.clearBuffer(),this.total=a.get("total")||a.size(),this.addModelsToBuffer(a.models,a.get("page"),a.get("pageSize"))},clearBuffer:function(){this.buffer=[],this.idToIndex={}},addModelsToBuffer:function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],f=b*c+d;this.buffer[f]=e,this.idToIndex[e.id]=f}var g=b*c,h=g+a.length;this.trigger("pageLoad",this,g,h)}});var f=["getRelated","setSort"];return b.each(f,function(a){e.prototype[a]=function(){this.collection[a].apply(this.collection,arguments)}}),d.collection.BufferedCollection=e}),define("model/Model",["jquery","underscore","backbone","PlumageRoot","RequestManager","util/ModelUtil","collection/BufferedCollection"],function(a,b,c,d,e,f,g){return d.model.Model=c.Model.extend({relationships:{},related:void 0,queryAttrs:[],viewAttrs:[],resultsPath:"results",displayNameAttr:void 0,fetched:!1,constructor:function(a,b){b=b||{},this.related={},c.Model.apply(this,arguments)},initialize:function(a,b){b=b||{},b.urlRoot&&(this.urlRoot=b.urlRoot),b.url&&(this.urlRoot=b.url)},getQueryParams:function(){for(var a={},b=0;b<this.viewAttrs.length;b++){var c=this.viewAttrs[b];void 0!==this.get(c)&&(a[c]=this.get(c))}return a},navigate:function(a){a=b.extend({trigger:!0},a),window.router.navigateWithQueryParams(this.viewUrlWithParams(),a)},navigateToIndex:function(a){a=b.extend({trigger:!0},a),window.router.navigateWithQueryParams(this.urlRoot,a)},updateUrl:function(a){a=b.extend({replace:!0,trigger:!1},a),window.router.navigateWithQueryParams(this.viewUrlWithParams(),a)},sync:function(a,b,d){return d.cache=!1,c.sync.apply(this,[a,b,d])},get:function(a){if(a){var b=a.split(".");if(!(b.length>1))return this.attributes[a];var c=this.getRelated(b[0]);return c?c.get(b.slice(1).join(".")):void 0}},set:function(a,c,d){var e,f,g,h,i,j,k,l;if(null===a)return this;if("object"==typeof a?(f=a,d=c):(f={})[a]=c,d=d||{},!this._validate(f,d))return!1;if(g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=b.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,d.viewState){var m=this.processViewState(d.viewState);b.extend(f,m)}var n={};f=b.clone(f),b.each(this.relationships,function(a,b){n[b]=f[b],delete f[b]},this),this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)c=f[e],b.isEqual(l[e],c)||h.push(e),b.isEqual(k[e],c)?delete this.changed[e]:this.changed[e]=c,g?delete l[e]:l[e]=c;if(b.each(this.relationships,function(a,b){var c=n[b];(void 0!==c||a.forceCreate&&void 0===this.getRelated(b))&&this.instantiateRelationship(b,c,a)&&h.push(b,!0)},this),!i){h.length&&(this._pending=d);for(var o=0,p=h.length;p>o;o++)this.trigger("change:"+h[o],this,l[h[o]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},processViewState:function(a){for(var b={},c=0;c<this.viewAttrs.length;c++){var d=this.viewAttrs[c],e=a[d];e&&(b[d]=e)}return b},instantiateRelationship:function(a,b,c){var e=this.getRelated(a);if(void 0===e){var g=f.loadClass(c.modelCls);return e=g.prototype instanceof d.collection.Collection?this.createRelatedCollection(g,c,b):this.createRelatedModel(g,c,b),this.setRelated(a,e),!0}return this.updateRelatedModel(c,e,b)},hasRelated:function(a){return this.related&&this.related[a]||this.collection&&this.collection.getRelated(a)},hasRelationship:function(a){return void 0!==this.related[a]||void 0!==this.relationships[a]},getRelated:function(a){var b,c=a.split("."),d=c[0];if(this.related&&this.related[d])b=this.related[d];else if(this.collection&&this.collection.hasRelationship(d)&&this.collection.getRelated(d))b=this.collection.getRelated(d);else if(!this.hasRelationship(d))throw"unknown relationship";return b&&c.length>1?b.getRelated(c.slice(1).join(".")):b},setRelated:function(a,b){this.related=this.related||{},this.related[a]=b},createRelatedModel:function(b,c,d){var e=c.options||{};a.isFunction(e)&&(e=e(this));var f=c.attributes||{};a.isFunction(f)&&(f=f(this));var g=new b(f,e);return c.reverse&&g.setRelated(c.reverse,this),this.updateRelatedModel(c,g,d),g},createRelatedCollection:function(b,c,d){var e=c.options||{};a.isFunction(e)&&(e=e(this));var f=new b(null,e);if(c.buffered){if(!c.remote)throw"if buffered, must also be remote";f=new g(f)}return c.propagateEvents&&(f.on("destroy",this.onRelationChange.bind(this)),f.on("add",this.onRelationChange.bind(this)),f.on("remove",this.onRelationChange.bind(this)),f.on("change",this.onRelationChange.bind(this))),f.processInMemory=!c.remote,c.reverse&&f.setRelated(c.reverse,this),c.foreignKey&&f.setFilter(c.foreignKey,this.id),this.updateRelatedModel(c,f,d),f},updateRelatedModel:function(b,c,e){return b.remote&&b.deferLoad&&(c.deferLoad=!0),c instanceof d.collection.Collection&&a.isArray(e)&&(e={models:e}),c.set(e,{silent:!0}),!a.isEmptyObject(c.changed)},matchesQuery:function(a){var c,d,e,f=[],g=this.queryAttrs;for(g&&g.length||(g=b.keys(this.attributes)),c=0;c<g.length;c++)d=g[c],e=this.get(d),e&&(f[g[c]]=e);return this.attrsMatchQuery(f,null,a)},attrsMatchQuery:function(a,b,c){if(!c||0===c.length)return!0;var d,e,f,g={};if(b){for(d=0;d<b.length;d++)e=b[d],f=a[e],f&&(g[e]=f);a=g}for(e in a)if(a.hasOwnProperty(e)&&null!==String(a[e]).match(new RegExp(c,"i")))return!0;return!1},hasUrl:function(){return Boolean(b.result(this,"url")||b.result(this,"urlRoot"))},url:function(){var a=this.get("href");return a?a:this.urlFromAttributes()},urlFromAttributes:function(){if(!this.id&&this.collection){var a=document.createElement("a");return a.href=this.collection.url(),a.pathname+"/new"+a.search}return this.urlRoot?c.Model.prototype.url.apply(this,arguments):null},urlWithParams:function(a){a=a||{};var c=this.url.apply(this,arguments);if(null===c||void 0===c)return null;var d=this.getQueryParams();return d=b.extend({},d,a),this._appendParamsToUrl(c,d)},viewUrlWithParams:function(a){return this.urlWithParams(a)},parse:function(a){return this.resultsPath&&a[this.resultsPath]?a[this.resultsPath]:a},load:function(a){return a=a||{},a.data=b.extend(this.getQueryParams(),a.data),b.isEqual(this.latestLoadParams,a.data)?void 0:(this.latestLoadParams=a.data,this._wrapHandlers(a),this.fireBeginLoad(),this.fetch(a))},save:function(a,b,d){var e;null===a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=d||{},this._wrapHandlers(d),c.Model.prototype.save.apply(this,[e,d])},onLoad:function(a,c){a=a||{},this.fetched=!0,c=c||{},c[this.cid]=!0,a.silent||this.trigger("load",this,a),b.each(this.relationships,function(b,d){var e=this.getRelated(d);e&&!c[e.cid]&&(b.remote?e.deferLoad||e.fetchIfAvailable():e.onLoad(a,c))},this)},fireBeginLoad:function(){this.trigger("beginLoad",this),b.each(this.relationships,function(a,b){var c=this.getRelated(b);c&&a.remote&&!c.deferLoad&&c.fireBeginLoad()},this)},fetchIfAvailable:function(){var a=this.urlWithParams();a&&e.loadModel(this)},getDisplayName:function(){return void 0!==this.displayNameAttr?this.get(this.displayNameAttr):void 0},toJSON:function(){for(var a=b.clone(this.attributes),c=0;c<this.viewAttrs.length;c++)delete a[this.viewAttrs[c]];return a},toViewJSON:function(){var a=b.clone(this.attributes);void 0===a.url&&this.hasUrl()&&(a.url=this.url());var c=this.getDisplayName();return void 0!==c&&(a.displayName=c),b.each(this.relationships,function(b,c){var d=this.getRelated(c);d&&(a[c]=d.toViewJSON())},this),a},onRelationChange:function(){this.trigger("change",this)},_appendParamsToUrl:function(b,c){return c&&!a.isEmptyObject(c)?(c=a.param(c,!0),b.indexOf("?")>=0?b+"&"+c:b+"?"+c):b},_wrapHandlers:function(a){var b=a.success,c=a.error;a.success=function(a,c,d){c.meta&&c.meta.success===!1?(c.meta.validationError&&(a.validationError=c.meta.validationError),a.trigger("invalid",a,a.validationError,c.meta.message_body,c.meta.message_class)):(a.latestLoadParams=void 0,a.onLoad(d),b&&b(a,c,d))},a.error=function(a,b,d){"undefined"!=typeof theApp&&theApp.logger&&"abort"!==b.statusText&&theApp.logger.error(b.statusText,"Model load error"),c&&c(a,b,d)}}})}),define("model/Filter",["jquery","underscore","backbone","PlumageRoot","model/Model"],function(a,b,c,d,e){return d.model.Filter=e.extend({initialize:function(){this.set("id",b.uniqueId("filter"))},comparisons:{equals:function(a,b){return String(a).toLowerCase()===String(b).toLowerCase()},contains:function(a,b){return-1!==String(b).toLowerCase().indexOf(String(a).toLowerCase())},startswith:function(a,b){return 0===String(b).indexOf(String(a))},endswith:function(a,b){return String(b).toLowerCase().indexOf(String(a)).toLowerCase()===String(b).length}},compare:function(a){var b,c=this.get("key");b=a.get?a.get(c):a[c];var d=this.get("value");if(void 0===d)return!0;var e=this.get("comparison");return"string"==typeof e?(e=this.comparisons[e],e?e(d,b,c):!0):e(d,b,c)},toJSON:function(){var a=e.prototype.toJSON.apply(this,arguments);return delete a.id,a}})}),define("collection/Collection",["jquery","underscore","backbone","PlumageRoot","model/Model","model/Filter","RequestManager"],function(a,b,c,d,e,f,g){d.collection.Collection=e.extend({urlRoot:void 0,viewAttrs:["query","sortDir","sortField","page","pageSize"],resultsPath:"results",processInMemory:!1,originalModels:void 0,defaultMeta:{page:0,pageSize:200},hasFilters:!0,relationships:{},selections:void 0,constructor:function(a,c){this.hasFilters&&!this.relationships.filters&&(this.relationships.filters={modelCls:d.collection.Collection.extend({model:f,urlRoot:"/",relationships:{},hasFilters:!1}),forceCreate:!0,propagateEvents:!0}),e.apply(this,arguments),c=c||{},c.model&&(this.model=c.model),"string"==typeof this.model&&(this.model=require(this.model)),this._reset(),a&&this.reset(a,b.extend({silent:!0},c)),void 0===this.urlRoot&&this.model&&(this.urlRoot=this.model.prototype.urlRoot)},initialize:function(a,c){c=c||{};var d=b.extend(b.clone(this.defaultMeta),c.meta||{});this.set(d,{silent:!0}),delete c.meta,b.extend(this,c)},hasUrl:function(){return!0},url:function(){var a=this.href||this.get("href");return a?a:this.urlRoot},set:function(a,c,d){var f;return null===a?this:("object"==typeof a?(f=a,d=c):(f={})[a]=c,d=d||{},f=b.clone(f),f.models&&(this.processInMemory?this.resetInMemory(f.models):this.reset(f.models),delete f.models),e.prototype.set.apply(this,[f,d]))},reset:function(a,c){c=c||{},this.resetting=!0;for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d]);return c.previousModels=this.models,this._reset(),a=this.add(a,b.extend({silent:!0},c)),this.resetting=!1,c.silent||this.trigger("reset",this,c),a},push:function(a,c){return this.add(a,b.extend({at:this.length},c))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,c){return this.add(a,b.extend({at:0},c))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return[].slice.apply(this.models,arguments)},getById:function(a){return void 0===a?void 0:this._byId[a.id]||this._byId[a.cid]||this._byId[a]},at:function(a){return this.models[a]},add:function(a,c){return this.setCollection(a,b.extend({merge:!1},c,{add:!0,remove:!1}))},remove:function(a,c){var d=!b.isArray(a);a=d?[a]:b.clone(a),c=c||{};var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.getById(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,this.originalModels&&(e=b.indexOf(this.originalModels,h),e>=0&&delete this.originalModels[e]),c.silent||(c.index=g,h.trigger("remove",h,this,c)),this._removeReference(h));return d?a[0]:a},where:function(a,c){return b.isEmpty(a)?c?void 0:[]:this[c?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},pluck:function(a){return b.invoke(this.models,"get",a)},clone:function(){var a=new this.constructor(this.models,{meta:b.clone(this.attributes)});return this.hasFilters&&a.setRelated("filters",this.getRelated("filters")),a},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},toViewJSON:function(){var a=e.prototype.toViewJSON.apply(this,arguments);return a.items=this.toJSON.apply(this,arguments),a.size=this.size(),a},hasMore:function(){if(this.processInMemory)return!1;var a=this.get("total");return a||(a=this.get("totals")&&this.get("totals").total),a&&a>this.size()},setSort:function(a,b,c){this.set({sortField:a,sortDir:b}),this.processInMemory||(this.fetched=!1),c&&g.loadModel(this)},getSelection:function(a){return this.selections||(this.selections={}),this.selections[a]||(this.selections[a]=new d.collection.Selection([],{collection:this})),this.selections[a]},getFilters:function(a){return this.getRelated("filters").where({key:a})},setFilter:function(a,b,c){void 0===c&&(c="equals");var d=this.getFilters(a);d&&this.removeFilter(d),this.addFilter({key:a,value:b,comparison:c})},addFilter:function(a){var b=this.getRelated("filters");b.add(a)},removeFilter:function(a){this.getRelated("filters").remove(a)},load:function(a){if(a=a||{},this.processInMemory&&this.fetched){if(this.buffered)throw"Can not be both buffered and processInMemory";return void this.onLoad(b.clone(a))}return e.prototype.load.apply(this,arguments)},forceReload:function(){if(!this.processInMemory)throw"forceReload is for processInMemory collections only";this.fetched=!1,this.originalModels=void 0,this.load({reset:!0})},fetch:function(a){a=a?b.clone(a):{},void 0===a.parse&&(a.parse=!0);var c=a.success,d=this;return a.success=function(b){if(d.isLoadStillValid(b)){if(a.parse){var e=b.meta;e&&d.set(e,{silent:!0})}a.reset?d.reset(b,a):d.setCollection(b,a),c&&c(d,b,a),d.trigger("sync",d,b,a)}},this.wrapError(a),this.sync("read",this,a)},create:function(a,c){if(c=c?b.clone(c):{},!(a=this._prepareModel(a,c)))return!1;c.wait||this.add(a,c);var d=this,e=c.success;return c.success=function(a,b,c){c.wait&&d.add(a,c),e&&e(a,b,c)},a.save(null,c),a},isLoadStillValid:function(a){var c=a.meta;return c?void 0!==c.query&&c.query!==this.get("query")?!1:void 0===c.filter||b.isEqual(c.filter,this.get("filter"))?!0:!1:!0},onLoad:function(a,c){a=a||{},this.fetched=!0,this.latestLoadParams=void 0,c=c||{},this.forEach(function(b){c[b.cid]||b.onLoad(a,c)}),this.processInMemory&&(void 0===this.originalModels&&(this.originalModels=b.clone(this.models)),this.updateInMemory()),e.prototype.onLoad.apply(this,arguments)},wrapError:function(a){var b=this,c=a.error;a.error=function(d){c&&c(b,d,a),b.trigger("error",b,d,a)}},getQueryParams:function(){var a=e.prototype.getQueryParams.apply(this,arguments);return this.hasFilters&&(a.filters=JSON.stringify(this.getRelated("filters").toJSON())),a},getUniqueValuesForAttribute:function(a){if(this.processInMemory){var c=[];return void 0!==this.originalModels?b.each(this.originalModels,function(b){c.push(b[a])},this):this.forEach(function(b){c.push(b.get(a))},this),c.sort(),c=b.uniq(c,!0)}return[]},_query:function(a){var c=this.get("query");return b.filter(a,function(a){return a.matchesQuery?a.matchesQuery(c):this.model.prototype.attrsMatchQuery(a,this.model.prototype.queryAttrs,c)},this)},_filter:function(a){if(!this.hasRelationship("filters")||0===this.getRelated("filters").size())return a;var c=this.getRelated("filters");return b.filter(a,function(a){return c.all(function(b){return b.compare(a)})},this)},_sort:function(a){var c=this.get("sortField"),d=this.get("sortDir");if(c&&d){var e=b.sortBy(a,function(a){return a.get(c)});return-1===d&&(e=e.reverse()),e}return a},resetInMemory:function(a){return this.reset(a),this.originalModels=b.clone(this.models),this.updateInMemory(),this},updateInMemory:function(){var a=this._query(this.originalModels);a=this._filter(a),a=this._sort(a),this.reset(a)},resetFromRelationship:function(a){this.processInMemory?this.resetInMemory(a):this.fetchIfAvailable()},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,c){if(a instanceof e)return a.collection||(a.collection=this),a;c=c?b.clone(c):{},c.collection=this;var d=new this.model(a,c);return d.validationError?(this.trigger("invalid",this,d.validationError,c),!1):d},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){"load"!==a&&("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!==b.id&&(this._byId[b.id]=b)),this.trigger(a,this,b,c,d))},setCollection:function(a,c){c=b.defaults({},c,{add:!0,remove:!0,merge:!0}),c.parse&&(a=this.parse(a,c));var d=!b.isArray(a);a=d?a?[a]:[]:b.clone(a);var f,g,h,i,j,k,l,m=c.at,n=this.model,o=this.comparator&&null===m&&c.sort!==!1,p=b.isString(this.comparator)?this.comparator:null,q=[],r=[],s={},t=c.add,u=c.merge,v=c.remove,w=!o&&t&&v?[]:!1;for(f=0,g=a.length;g>f;f++){if(j=a[f],h=j instanceof e?i=j:j[n.prototype.idAttribute],k=this.getById(h))v&&(s[k.cid]=!0),u&&(j=j===i?i.attributes:j,c.parse&&(j=k.parse(j,c)),k.set(j,c),o&&!l&&k.hasChanged(p)&&(l=!0)),a[f]=k;else if(t){if(i=a[f]=this._prepareModel(j,c),!i)continue;q.push(i),i.on("all",this._onModelEvent,this),this._byId[i.cid]=i,null!==i.id&&(this._byId[i.id]=i)}w&&w.push(k||i)}if(v){for(f=0,g=this.length;g>f;++f)s[(i=this.models[f]).cid]||r.push(i);r.length&&this.remove(r,c)}if(q.length||w&&w.length)if(this.fetched=!0,o&&(l=!0),this.length+=q.length,void 0!==m)for(f=0,g=q.length;g>f;f++)this.models.splice(m+f,0,q[f]),this.processInMemory&&this.originalModels&&this.originalModels.push(q[f]);else{w&&(this.models.length=0);var x=w||q;for(f=0,g=x.length;g>f;f++)this.models.push(x[f]),this.processInMemory&&this.originalModels&&!this.resetting&&this.originalModels.push(x[f])}if(l&&this.sort({silent:!0}),!c.silent){for(f=0,g=q.length;g>f;f++)(i=q[f]).trigger("add",i,this,c);(l||w&&w.length)&&this.trigger("sort",this,c)}return d?a[0]:a}});var h=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];b.each(h,function(a){d.collection.Collection.prototype[a]=function(){var c=[].slice.call(arguments);return c.unshift(this.models),b[a].apply(b,c)}});var i=["groupBy","countBy","sortBy"];return b.each(i,function(a){d.collection.Collection.prototype[a]=function(c,d){var e=b.isFunction(c)?c:function(a){return a.get(c)};return b[a](this.models,e,d)}}),d.collection.Collection}),define("model/User",["jquery","underscore","backbone","PlumageRoot","model/Model","collection/ActivityCollection"],function(a,b,c,d,e){return d.model.User=e.extend({idAttribute:"account",urlRoot:"/users",relationships:{comments:{modelCls:"collection/CommentCollection",reverse:"user",forceCreate:!1},activities:{modelCls:"collection/ActivityCollection",reverse:"owner",forceCreate:!1}},getImageThumb:function(){return"https://birdhouse.twitter.biz/people/photos/thumb/"+this.get("account")+"-thumb.jpg"},toViewJSON:function(){var a=e.prototype.toViewJSON.apply(this,arguments);return a.image_thumb=this.getImageThumb(),a}})}),define("model/Activity",["jquery","underscore","backbone","handlebars","PlumageRoot","moment","model/Model","model/User"],function(a,b,c,d,e,f,g){return e.model.Activity=g.extend({urlRoot:"/activities",actionTexts:{Description:{create:"added a description to {{{recipientHTML}}}",update:"updated the description of {{{recipientHTML}}}"},Comment:{create:"commented on {{{recipientHTML}}}"}},relationships:{user:{modelCls:"model/User",forceCreate:!1}},toViewJSON:function(){var a=g.prototype.toViewJSON.apply(this,arguments);return a.recipientHTML=this.getRelatedModelHTML(this.get("recipient_type"),this.get("recipient")),a.trackableHTML=this.getRelatedModelHTML(this.get("trackable_type"),this.get("trackable")),a.action_text=this.getActionText(a),a.create_at_text=f(1e3*Number(a.created_at)).fromNow(),a},getRelatedModelHTML:function(a,b){if(a){var c=require("model/"+a),d=new c(b),e=d.getDisplayName();return'<a href="'+d.url()+'" class="name" title="'+e+'">'+e+"</a>"}return""},getActionText:function(a){for(var b,c=this;!b&&c&&c.actionTexts;)b=c.actionTexts[this.get("trackable_type")],b&&b[this.get("action_type")]||(c=c.__proto__);return b?d.compile(b[this.get("action_type")])(a):void 0}})}),define("collection/ActivityCollection",["PlumageRoot","collection/Collection","model/Activity"],function(a,b){return a.collection.ActivityCollection=b.extend({model:"model/Activity"})}),define("model/Comment",["jquery","underscore","backbone","PlumageRoot","model/Model","model/User"],function(a,b,c,d,e){return d.model.Comment=e.extend({urlRoot:"/comments",relationships:{user:{modelCls:"model/User",forceCreate:!1}},validate:function(a){return!a.body||a.body.length<=3?"Comment is too short":void 0}})}),define("collection/CommentCollection",["PlumageRoot","collection/Collection","model/Comment"],function(a,b,c){return a.collection.CommentCollection=b.extend({model:c})}),define("model/Data",["jquery","underscore","backbone","PlumageRoot","model/Model"],function(a,b,c,d,e){return d.model.Data=e.extend({idAttribute:"name"})}),define("collection/DataCollection",["PlumageRoot","collection/Collection","model/Data"],function(a,b,c){return a.collection.DataCollection=b.extend({model:c,urlRoot:"/"})}),define("collection/Selection",["jquery","underscore","backbone","PlumageRoot","collection/Collection"],function(a,b,c,d,e){return d.collection.Selection=e.extend({multi:!0,model:d.model.Model.extend({idAttribute:"id"}),collection:void 0,initialize:function(a,b){d.collection.Collection.prototype.initialize.apply(this,arguments),b&&b.collection&&(this.collection=b.collection,this.collection.on("load",this.onCollectionLoad,this))},getTotalSize:function(){return this.collection.size()},isSelectedId:function(a){return void 0!==this.getById(a)},isSelectedIndex:function(a){return void 0!==this.getById(this.collection.at(a).id)},getSelectedIndices:function(){return this.map(function(a){var b=this.collection.getById(a.id);return this.collection.indexOf(b)}.bind(this))},setSelectedIndices:function(a){var c=b.map(a,function(a){return this.collection.at(a).id}.bind(this));this.setSelectedIds(c)},getSelectedIds:function(){return this.map(function(a){return a.id})},setSelectedIds:function(a){var c=b.map(a,function(a){return{id:a}});this.reset(c)},selectIndex:function(a){var b=this.collection.at(a);void 0===this.getById(b.id)&&(this.multi?this.add(new this.model({id:b.id})):this.setSelectedIds([b.id]))},deselectIndex:function(a){var b=this.collection.at(a),c=this.getById(b.id);c&&this.remove(c)},toggleIndex:function(a){this.isSelectedIndex(a)?this.deselectIndex(a):this.selectIndex(a)},selectAll:function(){var a=this.collection.map(function(a){return{id:a.id}});this.reset(a)},deselectAll:function(){this.reset([])},onCollectionLoad:function(){var a=[];this.each(function(b){void 0!==this.collection.getById(b.id)&&a.push(b)}.bind(this)),this.reset(a)}})}),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")
})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix||c:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&n>h(c+d)&&(i.horizontal="center"),m>p&&p>h(e+f)&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;
b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=p>=Math.abs(j-t),e=p>=Math.abs(k-s),f=p>=Math.abs(h-r),g=p>=Math.abs(i-q),d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=p>=Math.abs(j-s),e=p>=Math.abs(k-t),f=p>=Math.abs(h-q),g=p>=Math.abs(i-r),d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},a.ui.ddmanager.droppables[c.scope]=a.ui.ddmanager.droppables[c.scope]||[],a.ui.ddmanager.droppables[c.scope].push(this),c.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];c.length>b;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,c,d){if(!c.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=(a.positionAbs||a.position.absolute).top,i=g+a.helperProportions.width,j=h+a.helperProportions.height,k=c.offset.left,l=c.offset.top,m=k+c.proportions().width,n=l+c.proportions().height;switch(d){case"fit":return g>=k&&m>=i&&h>=l&&n>=j;case"intersect":return g+a.helperProportions.width/2>k&&m>i-a.helperProportions.width/2&&h+a.helperProportions.height/2>l&&n>j-a.helperProportions.height/2;case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,b(f,l,c.proportions().height)&&b(e,k,c.proportions().width);case"touch":return(h>=l&&n>=h||j>=l&&n>=j||l>h&&j>n)&&(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){function b(a){return parseInt(a,10)||0}function c(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=b(this.helper.css("left")),e=b(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),g.maxWidth>d&&(g.maxWidth=d),g.maxHeight>f&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d),l=/nw|ne|n/.test(d);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(c=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=b(c.css("padding"+e))}),j.containerOffset=c.offset(),j.containerPosition=c.position(),j.containerSize={height:c.innerHeight()-d[3],width:c.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=Math.abs(g.parentData.left)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&m>c.maxWidth,p=c.maxHeight&&n>c.maxHeight,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(n-j>0?(b.size.height=n,b.position.top=f.top-l):(b.size.height=j,b.position.top=f.top+e.height-j),m-i>0?(b.size.width=m,b.position.left=f.left-k):(b.size.width=i,b.position.left=f.left+e.width-i))}})}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||f>c.right||c.top>i||g>c.bottom):"fit"===e.tolerance&&(j=c.left>f&&h>c.right&&c.top>g&&i>c.bottom),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));
return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var c=b(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=b(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(d){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",d,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||c(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||b(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),g>Math.abs(l-k)&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(d,h,null,!0):this._rearrange(d,null,this.containers[p].element,!0),this._trigger("change",d,this._uiHash()),this.containers[p]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a,b){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.4"}});var f,g="datepicker";a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,g,c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,g,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],g,n)),e(n.settings,f||{}),c=c&&c.constructor===Date?this._formatDate(n,c):c,this._dialogInput.val(c),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],g,n),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,g);d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,g),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,g)}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,f){var g,h,i,j,k=this._getInst(c);return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(g=d||{},"string"==typeof d&&(g={},g[d]=f),k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),e(k.settings,g),null!==i&&g.dateFormat!==b&&g.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&g.dateFormat!==b&&g.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in g&&(g.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k)),b)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;
g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d,e,f=a.datepicker._getInst(c.target);return a.datepicker._get(f,"constrainInput")?(d=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat")),e=String.fromCharCode(null==c.charCode?c.keyCode:c.charCode),c.ctrlKey||c.metaKey||" ">e||!d||d.indexOf(e)>-1):b},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,f,g,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),f=d?d.apply(b,[b,c]):{},f!==!1&&(e(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,f=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,d=this._getNumberOfMonths(b),e=d[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,h=this._curInst;!h||b&&h!==a.data(b,g)||this._datepickerShowing&&(c=this._get(h,"showAnim"),d=this._get(h,"duration"),e=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[c]||a.effects[c])?h.dpDiv.hide(c,a.datepicker._get(h,"showOptions"),d,e):h.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(h,"onClose"),f&&f.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(c,d,e){if(null==c||null==d)throw"Invalid arguments";if(d="object"==typeof d?""+d:d+"",""===d)return null;var f,g,h,i,j=0,k=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof k?k:(new Date).getFullYear()%100+parseInt(k,10),m=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,n=(e?e.dayNames:null)||this._defaults.dayNames,o=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,q=-1,r=-1,s=-1,t=-1,u=!1,v=function(a){var b=c.length>f+1&&c.charAt(f+1)===a;return b&&f++,b},w=function(a){var b=v(a),c="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=RegExp("^\\d{1,"+c+"}"),f=d.substring(j).match(e);if(!f)throw"Missing number at position "+j;return j+=f[0].length,parseInt(f[0],10)},x=function(c,e,f){var g=-1,h=a.map(v(c)?f:e,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(h,function(a,c){var e=c[1];return d.substr(j,e.length).toLowerCase()===e.toLowerCase()?(g=c[0],j+=e.length,!1):b}),-1!==g)return g+1;throw"Unknown name at position "+j},y=function(){if(d.charAt(j)!==c.charAt(f))throw"Unexpected literal at position "+j;j++};for(f=0;c.length>f;f++)if(u)"'"!==c.charAt(f)||v("'")?y():u=!1;else switch(c.charAt(f)){case"d":s=w("d");break;case"D":x("D",m,n);break;case"o":t=w("o");break;case"m":r=w("m");break;case"M":r=x("M",o,p);break;case"y":q=w("y");break;case"@":i=new Date(w("@")),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"!":i=new Date((w("!")-this._ticksTo1970)/1e4),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"'":v("'")?y():u=!0;break;default:y()}if(d.length>j&&(h=d.substr(j),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;if(-1===q?q=(new Date).getFullYear():100>q&&(q+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=q?0:-100)),t>-1)for(r=1,s=t;g=this._getDaysInMonth(q,r-1),!(g>=s);)r++,s-=g;if(i=this._daylightSavingAdjust(new Date(q,r-1,s)),i.getFullYear()!==q||i.getMonth()+1!==r||i.getDate()!==s)throw"Invalid date";return i},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=a.length>d+1&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;c>d.length;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;a.length>d;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=a.length>b+1&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"==""+g?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,ab=a.drawYear;if(0>_&&(_+=12,ab--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(ab,_,1))>b;)_--,0>_&&(_=11,ab--);for(a.drawMonth=_,a.drawYear=ab,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(ab,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,ab,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(ab,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,ab,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;U[0]>w;w++){for(x="",this.maxRows=4,y=0;U[1]>y;y++){if(z=this._daylightSavingAdjust(new Date(ab,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,ab,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(ab,_),ab===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(ab,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(ab,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,ab++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||e.getMonth()>=k)&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.4"}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;c.length>d;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c
}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),function(a,b){var c="ui-effects-";a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:a>d.max?d.max:a)}function d(c){var d=j(),e=d._rgba=[];return c=c.toLowerCase(),o(i,function(a,f){var g,h=f.re.exec(c),i=h&&f.parse(h),j=f.space||"rgba";return i?(g=d[j](i),d[k[j].cache]=g[k[j].cache],e=d._rgba=g._rgba,!1):b}),e.length?("0,0,0,0"===e.join()&&a.extend(e,f.transparent),d):f[c]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&0>a.inArray(null,l[f].slice(0,3))&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):b},is:function(a){var c=j(a),d=!0,e=this;return o(k,function(a,f){var g,h=c[f.cache];return h&&(g=e[f.cache]||f.to&&f.to(e._rgba)||[],o(f.props,function(a,c){return null!=h[c.idx]?d=h[c.idx]===g[c.idx]:b})),d}),d},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function c(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function d(b,c){var d,e,g={};for(d in c)e=c[d],b[d]!==e&&(f[d]||(a.fx.step[d]||!isNaN(parseFloat(e)))&&(g[d]=e));return g}var e=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(jQuery.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(b,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var b=a(this);return{el:b,start:c(this)}}),f=function(){a.each(e,function(a,c){b[c]&&g[c+"Class"](b[c])})},f(),j=j.map(function(){return this.end=c(this.el[0]),this.diff=d(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(c){return function(d,e,f,g,h){return"boolean"==typeof e||e===b?f?a.effects.animateClass.call(this,e?{add:d}:{remove:d},f,g,h):c.apply(this,arguments):a.effects.animateClass.call(this,{toggle:d},e,f,g)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function d(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function e(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}a.extend(a.effects,{version:"1.10.4",save:function(a,b){for(var d=0;b.length>d;d++)null!==b[d]&&a.data(c+b[d],a[0].style[b[d]])},restore:function(a,d){var e,f;for(f=0;d.length>f;f++)null!==d[f]&&(e=a.data(c+d[f]),e===b&&(e=""),a.css(d[f],e))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function b(b){function d(){a.isFunction(f)&&f.call(e[0]),a.isFunction(b)&&b()}var e=a(this),f=c.complete,h=c.mode;(e.is(":hidden")?"hide"===h:"show"===h)?(e[h](),d()):g.call(e[0],c,d)}var c=d.apply(this,arguments),e=c.mode,f=c.queue,g=a.effects.effect[c.effect];return a.fx.off||!g?e?this[e](c.duration,c.complete):this.each(function(){c.complete&&c.complete.call(this)}):f===!1?this.each(b):this.queue(f||"fx",b)},show:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="show",this.effect.call(this,c)}}(a.fn.show),hide:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="hide",this.effect.call(this,c)}}(a.fn.hide),toggle:function(a){return function(b){if(e(b)||"boolean"==typeof b)return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="toggle",this.effect.call(this,c)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;((b=Math.pow(2,--c))-1)/11>a;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}()}(jQuery),function(a){var b=/up|down|vertical/,c=/up|left|vertical|horizontal/;a.effects.effect.blind=function(d,e){var f,g,h,i=a(this),j=["position","top","bottom","left","right","height","width"],k=a.effects.setMode(i,d.mode||"hide"),l=d.direction||"up",m=b.test(l),n=m?"height":"width",o=m?"top":"left",p=c.test(l),q={},r="show"===k;i.parent().is(".ui-effects-wrapper")?a.effects.save(i.parent(),j):a.effects.save(i,j),i.show(),f=a.effects.createWrapper(i).css({overflow:"hidden"}),g=f[n](),h=parseFloat(f.css(o))||0,q[n]=r?g:0,p||(i.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),q[o]=r?h:g+h),r&&(f.css(n,0),p||f.css(o,h+g)),f.animate(q,{duration:d.duration,easing:d.easing,queue:!1,complete:function(){"hide"===k&&i.hide(),a.effects.restore(i,j),a.effects.removeWrapper(i),e()}})}}(jQuery),function(a){a.effects.effect.bounce=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"effect"),j="hide"===i,k="show"===i,l=b.direction||"up",m=b.distance,n=b.times||5,o=2*n+(k||j?1:0),p=b.duration/o,q=b.easing,r="up"===l||"down"===l?"top":"left",s="up"===l||"left"===l,t=g.queue(),u=t.length;for((k||j)&&h.push("opacity"),a.effects.save(g,h),g.show(),a.effects.createWrapper(g),m||(m=g["top"===r?"outerHeight":"outerWidth"]()/3),k&&(f={opacity:1},f[r]=0,g.css("opacity",0).css(r,s?2*-m:2*m).animate(f,p,q)),j&&(m/=Math.pow(2,n-1)),f={},f[r]=0,d=0;n>d;d++)e={},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q).animate(f,p,q),m=j?2*m:m/2;j&&(e={opacity:0},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q)),g.queue(function(){j&&g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,o+1))),g.dequeue()}}(jQuery),function(a){a.effects.effect.clip=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"hide"),j="show"===i,k=b.direction||"vertical",l="vertical"===k,m=l?"height":"width",n=l?"top":"left",o={};a.effects.save(g,h),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e="IMG"===g[0].tagName?d:g,f=e[m](),j&&(e.css(m,0),e.css(n,f/2)),o[m]=j?f:0,o[n]=j?0:f/2,e.animate(o,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){j||g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.drop=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","opacity","height","width"],g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i?"pos":"neg",l={opacity:h?1:0};a.effects.save(e,f),e.show(),a.effects.createWrapper(e),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0)/2,h&&e.css("opacity",0).css(j,"pos"===k?-d:d),l[j]=(h?"pos"===k?"+=":"-=":"pos"===k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.explode=function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),p||n.hide(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=a.effects.setMode(n,b.mode||"hide"),p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;l>f;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;m>g;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)}}(jQuery),function(a){a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}}(jQuery),function(a){a.effects.effect.fold=function(b,c){var d,e,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i="show"===h,j="hide"===h,k=b.size||15,l=/([0-9]+)%/.exec(k),m=!!b.horizFirst,n=i!==m,o=n?["width","height"]:["height","width"],p=b.duration/2,q={},r={};a.effects.save(f,g),f.show(),d=a.effects.createWrapper(f).css({overflow:"hidden"}),e=n?[d.width(),d.height()]:[d.height(),d.width()],l&&(k=parseInt(l[1],10)/100*e[j?0:1]),i&&d.css(m?{height:0,width:k}:{height:k,width:0}),q[o[0]]=i?e[0]:k,r[o[1]]=i?e[1]:0,d.animate(q,p,b.easing).animate(r,p,b.easing,function(){j&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),c()})}}(jQuery),function(a){a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})}}(jQuery),function(a){a.effects.effect.pulsate=function(b,c){var d,e=a(this),f=a.effects.setMode(e,b.mode||"show"),g="show"===f,h="hide"===f,i=g||"hide"===f,j=2*(b.times||5)+(i?1:0),k=b.duration/j,l=0,m=e.queue(),n=m.length;for((g||!e.is(":visible"))&&(e.css("opacity",0).show(),l=1),d=1;j>d;d++)e.animate({opacity:l},k,b.easing),l=1-l;e.animate({opacity:l},k,b.easing),e.queue(function(){h&&e.hide(),c()}),n>1&&m.splice.apply(m,[1,0].concat(m.splice(n,j+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},("box"===p||"both"===p)&&(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),("content"===p||"both"===p)&&f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),("content"===p||"both"===p)&&(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.shake=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left",i=b.distance||20,j=b.times||3,k=2*j+1,l=Math.round(b.duration/k),m="up"===h||"down"===h?"top":"left",n="up"===h||"left"===h,o={},p={},q={},r=e.queue(),s=r.length;for(a.effects.save(e,f),e.show(),a.effects.createWrapper(e),o[m]=(n?"-=":"+=")+i,p[m]=(n?"+=":"-=")+2*i,q[m]=(n?"-=":"+=")+2*i,e.animate(o,l,b.easing),d=1;j>d;d++)e.animate(p,l,b.easing).animate(q,l,b.easing);e.animate(p,l,b.easing).animate(o,l/2,b.easing).queue(function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,k+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.slide=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","width","height"],g=a.effects.setMode(e,b.mode||"show"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l={};a.effects.save(e,f),e.show(),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(e).css({overflow:"hidden"}),h&&e.css(j,k?isNaN(d)?"-"+d:-d:d),l[j]=(h?k?"+=":"-=":k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})}}(jQuery),define("slickgrid/lib/jquery-ui",["jquery"],function(){}),function(a){a.fn.drag=function(b,c,d){var e="string"==typeof b?b:"",f=a.isFunction(b)?b:a.isFunction(c)?c:null;return 0!==e.indexOf("drag")&&(e="drag"+e),d=(b==f?c:d)||{},f?this.bind(e,d,f):this.trigger(e)};var b=a.event,c=b.special,d=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(b){var c=a.data(this,d.datakey),e=b.data||{};c.related+=1,a.each(d.defaults,function(a){void 0!==e[a]&&(c[a]=e[a])})},remove:function(){a.data(this,d.datakey).related-=1},setup:function(){if(!a.data(this,d.datakey)){var c=a.extend({related:0},d.defaults);a.data(this,d.datakey,c),b.add(this,"touchstart mousedown",d.init,c),this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){var c=a.data(this,d.datakey)||{};c.related||(a.removeData(this,d.datakey),b.remove(this,"touchstart mousedown",d.init),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart))},init:function(e){if(!d.touched){var f,g=e.data;if(!(0!=e.which&&g.which>0&&e.which!=g.which||a(e.target).is(g.not)||g.handle&&!a(e.target).closest(g.handle,e.currentTarget).length||(d.touched="touchstart"==e.type?this:null,g.propagates=1,g.mousedown=this,g.interactions=[d.interaction(this,g)],g.target=e.target,g.pageX=e.pageX,g.pageY=e.pageY,g.dragging=null,f=d.hijack(e,"draginit",g),!g.propagates)))return f=d.flatten(f),f&&f.length&&(g.interactions=[],a.each(f,function(){g.interactions.push(d.interaction(this,g))})),g.propagates=g.interactions.length,g.drop!==!1&&c.drop&&c.drop.handler(e,g),d.textselect(!1),d.touched?b.add(d.touched,"touchmove touchend",d.handler,g):b.add(document,"mousemove mouseup",d.handler,g),!d.touched||g.live?!1:void 0}},interaction:function(b,c){var e=a(b)[c.relative?"position":"offset"]()||{top:0,left:0};return{drag:b,callback:new d.callback,droppable:[],offset:e}},handler:function(e){var f=e.data;switch(e.type){case!f.dragging&&"touchmove":e.preventDefault();case!f.dragging&&"mousemove":if(Math.pow(e.pageX-f.pageX,2)+Math.pow(e.pageY-f.pageY,2)<Math.pow(f.distance,2))break;e.target=f.target,d.hijack(e,"dragstart",f),f.propagates&&(f.dragging=!0);case"touchmove":e.preventDefault();case"mousemove":if(f.dragging){if(d.hijack(e,"drag",f),f.propagates){f.drop!==!1&&c.drop&&c.drop.handler(e,f);break}e.type="mouseup"}case"touchend":case"mouseup":default:d.touched?b.remove(d.touched,"touchmove touchend",d.handler):b.remove(document,"mousemove mouseup",d.handler),f.dragging&&(f.drop!==!1&&c.drop&&c.drop.handler(e,f),d.hijack(e,"dragend",f)),d.textselect(!0),f.click===!1&&f.dragging&&a.data(f.mousedown,"suppress.click",(new Date).getTime()+5),f.dragging=d.touched=!1}},hijack:function(c,e,f,g,h){if(f){var i,j,k,l={event:c.originalEvent,type:c.type},m=e.indexOf("drop")?"drag":"drop",n=g||0,o=isNaN(g)?f.interactions.length:g;c.type=e,c.originalEvent=null,f.results=[];do if(j=f.interactions[n]){if("dragend"!==e&&j.cancelled)continue;k=d.properties(c,f,j),j.results=[],a(h||j[m]||f.droppable).each(function(g,h){return k.target=h,c.isPropagationStopped=function(){return!1},i=h?b.dispatch.call(h,c,k):null,i===!1?("drag"==m&&(j.cancelled=!0,f.propagates-=1),"drop"==e&&(j[m][g]=null)):"dropinit"==e&&j.droppable.push(d.element(i)||h),"dragstart"==e&&(j.proxy=a(d.element(i)||j.drag)[0]),j.results.push(i),delete c.result,"dropinit"!==e?i:void 0}),f.results[n]=d.flatten(j.results),"dropinit"==e&&(j.droppable=d.flatten(j.droppable)),"dragstart"!=e||j.cancelled||k.update()}while(++n<o);return c.type=l.type,c.originalEvent=l.event,d.flatten(f.results)}},properties:function(a,b,c){var e=c.callback;return e.drag=c.drag,e.proxy=c.proxy||c.drag,e.startX=b.pageX,e.startY=b.pageY,e.deltaX=a.pageX-b.pageX,e.deltaY=a.pageY-b.pageY,e.originalX=c.offset.left,e.originalY=c.offset.top,e.offsetX=e.originalX+e.deltaX,e.offsetY=e.originalY+e.deltaY,e.drop=d.flatten((c.drop||[]).slice()),e.available=d.flatten((c.droppable||[]).slice()),e},element:function(a){return a&&(a.jquery||1==a.nodeType)?a:void 0},flatten:function(b){return a.map(b,function(b){return b&&b.jquery?a.makeArray(b):b&&b.length?d.flatten(b):b})},textselect:function(b){a(document)[b?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",b?"":"none"),document.unselectable=b?"off":"on"},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.drop&&this.available.length&&a.each(this.available,function(a){c.drop.locate(this,a)})}};var e=b.dispatch;b.dispatch=function(b){return a.data(this,"suppress."+b.type)-(new Date).getTime()>0?void a.removeData(this,"suppress."+b.type):e.apply(this,arguments)};var f=b.fixHooks.touchstart=b.fixHooks.touchmove=b.fixHooks.touchend=b.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(b,c){if(c){var d=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0]||null;d&&a.each(f.props,function(a,c){b[c]=d[c]})}return b}};c.draginit=c.dragstart=c.dragend=d}(jQuery),define("slickgrid/lib/jquery.event.drag",["jquery"],function(){}),function(a){a.fn.drop=function(b,c,d){var e="string"==typeof b?b:"",f=a.isFunction(b)?b:a.isFunction(c)?c:null;return 0!==e.indexOf("drop")&&(e="drop"+e),d=(b==f?c:d)||{},f?this.bind(e,d,f):this.trigger(e)},a.drop=function(b){b=b||{},d.multi=b.multi===!0?1/0:b.multi===!1?1:isNaN(b.multi)?d.multi:b.multi,d.delay=b.delay||d.delay,d.tolerance=a.isFunction(b.tolerance)?b.tolerance:null===b.tolerance?null:d.tolerance,d.mode=b.mode||d.mode||"intersect"
};var b=a.event,c=b.special,d=a.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(){var b=a.data(this,d.datakey);b.related+=1},remove:function(){a.data(this,d.datakey).related-=1},setup:function(){if(!a.data(this,d.datakey)){var b={related:0,active:[],anyactive:0,winner:0,location:{}};a.data(this,d.datakey,b),d.targets.push(this)}},teardown:function(){var b=a.data(this,d.datakey)||{};if(!b.related){a.removeData(this,d.datakey);var c=this;d.targets=a.grep(d.targets,function(a){return a!==c})}},handler:function(b,e){var f;if(e)switch(b.type){case"mousedown":case"touchstart":f=a(d.targets),"string"==typeof e.drop&&(f=f.filter(e.drop)),f.each(function(){var b=a.data(this,d.datakey);b.active=[],b.anyactive=0,b.winner=0}),e.droppable=f,c.drag.hijack(b,"dropinit",e);break;case"mousemove":case"touchmove":d.event=b,d.timer||d.tolerate(e);break;case"mouseup":case"touchend":d.timer=clearTimeout(d.timer),e.propagates&&(c.drag.hijack(b,"drop",e),c.drag.hijack(b,"dropend",e))}},locate:function(b,c){var e=a.data(b,d.datakey),f=a(b),g=f.offset()||{},h=f.outerHeight(),i=f.outerWidth(),j={elem:b,width:i,height:h,top:g.top,left:g.left,right:g.left+i,bottom:g.top+h};return e&&(e.location=j,e.index=c,e.elem=b),j},contains:function(a,b){return(b[0]||b.left)>=a.left&&(b[0]||b.right)<=a.right&&(b[1]||b.top)>=a.top&&(b[1]||b.bottom)<=a.bottom},modes:{intersect:function(a,b,c){return this.contains(c,[a.pageX,a.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(a,b,c){return Math.max(0,Math.min(c.bottom,b.bottom)-Math.max(c.top,b.top))*Math.max(0,Math.min(c.right,b.right)-Math.max(c.left,b.left))},fit:function(a,b,c){return this.contains(c,b)?1:0},middle:function(a,b,c){return this.contains(c,[b.left+.5*b.width,b.top+.5*b.height])?1:0}},sort:function(a,b){return b.winner-a.winner||a.index-b.index},tolerate:function(b){var e,f,g,h,i,j,k,l,m=0,n=b.interactions.length,o=[d.event.pageX,d.event.pageY],p=d.tolerance||d.modes[d.mode];do if(l=b.interactions[m]){if(!l)return;l.drop=[],i=[],j=l.droppable.length,p&&(g=d.locate(l.proxy)),e=0;do if(k=l.droppable[e]){if(h=a.data(k,d.datakey),f=h.location,!f)continue;h.winner=p?p.call(d,d.event,g,f):d.contains(f,o)?1:0,i.push(h)}while(++e<j);i.sort(d.sort),e=0;do(h=i[e])&&(h.winner&&l.drop.length<d.multi?(h.active[m]||h.anyactive||(c.drag.hijack(d.event,"dropstart",b,m,h.elem)[0]!==!1?(h.active[m]=1,h.anyactive+=1):h.winner=0),h.winner&&l.drop.push(h.elem)):h.active[m]&&1==h.anyactive&&(c.drag.hijack(d.event,"dropend",b,m,h.elem),h.active[m]=0,h.anyactive-=1));while(++e<j)}while(++m<n);d.last&&o[0]==d.last.pageX&&o[1]==d.last.pageY?delete d.timer:d.timer=setTimeout(function(){d.tolerate(b)},d.delay),d.last=d.event}};c.dropinit=c.dropstart=c.dropend=d}(jQuery),define("slickgrid/lib/jquery.event.drop",["jquery"],function(){}),function(a){function b(){var a=!1,b=!1;this.stopPropagation=function(){a=!0},this.isPropagationStopped=function(){return a},this.stopImmediatePropagation=function(){b=!0},this.isImmediatePropagationStopped=function(){return b}}function c(){var a=[];this.subscribe=function(b){a.push(b)},this.unsubscribe=function(b){for(var c=a.length-1;c>=0;c--)a[c]===b&&a.splice(c,1)},this.notify=function(c,d,e){d=d||new b,e=e||this;for(var f,g=0;g<a.length&&!d.isPropagationStopped()&&!d.isImmediatePropagationStopped();g++)f=a[g].call(e,d,c);return f}}function d(){var a=[];this.subscribe=function(b,c){return a.push({event:b,handler:c}),b.subscribe(c),this},this.unsubscribe=function(b,c){for(var d=a.length;d--;)if(a[d].event===b&&a[d].handler===c)return a.splice(d,1),void b.unsubscribe(c);return this},this.unsubscribeAll=function(){for(var b=a.length;b--;)a[b].event.unsubscribe(a[b].handler);return a=[],this}}function e(a,b,c,d){void 0===c&&void 0===d&&(c=a,d=b),this.fromRow=Math.min(a,c),this.fromCell=Math.min(b,d),this.toRow=Math.max(a,c),this.toCell=Math.max(b,d),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(a,b){return a>=this.fromRow&&a<=this.toRow&&b>=this.fromCell&&b<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function f(){this.__nonDataRow=!0}function g(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}function h(){this.__groupTotals=!0,this.group=null,this.initialized=!1}function i(){var a=null;this.isActive=function(b){return b?a===b:null!==a},this.activate=function(b){if(b!==a){if(null!==a)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!b.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!b.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";a=b}},this.deactivate=function(b){if(a!==b)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";a=null},this.commitCurrentEdit=function(){return a?a.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return a?a.cancelCurrentEdit():!0}}a.extend(!0,window,{Slick:{Event:c,EventData:b,EventHandler:d,Range:e,NonDataRow:f,Group:g,GroupTotals:h,EditorLock:i,GlobalEditorLock:new i}}),g.prototype=new f,g.prototype.equals=function(a){return this.value===a.value&&this.count===a.count&&this.collapsed===a.collapsed&&this.title===a.title},h.prototype=new f}(jQuery),define("slickgrid/slick.core",["slickgrid/lib/jquery-ui","slickgrid/lib/jquery.event.drag","slickgrid/lib/jquery.event.drop"],function(){}),"undefined"==typeof jQuery)throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if("undefined"==typeof Slick)throw"slick.core.js not loaded";!function($){function SlickGrid(container,data,columns,options){function init(){if($container=$(container),$container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,columnsById={};for(var a=0;a<columns.length;a++){var b=columns[a]=$.extend({},columnDefaults,columns[a]);columnsById[b.id]=a,b.minWidth&&b.width<b.minWidth&&(b.width=b.minWidth),b.maxWidth&&b.width>b.maxWidth&&(b.width=b.maxWidth)}if(options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller),$headers.width(getHeadersWidth()),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewport=$("<div class='slick-viewport-shadow' style='width:100%;height:100%;position:absolute;'></div>").appendTo($container),$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(a){return $(a.target).is("input,textarea")}),updateColumnCaches(),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.bind("resize.slickgrid",resizeCanvas),$viewport.bind("scroll",handleScroll),$headerScroller.bind("contextmenu",handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave),$headerRowScroller.bind("scroll",handleHeaderRowScroll),$focusSink.add($focusSink2).bind("keydown",handleKeyDown),$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",{distance:3},handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave),navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)&&$canvas.bind("mousewheel",handleMouseWheel))}function registerPlugin(a){plugins.unshift(a),a.init(self)}function unregisterPlugin(a){for(var b=plugins.length;b>=0;b--)if(plugins[b]===a){plugins[b].destroy&&plugins[b].destroy(),plugins.splice(b,1);break}}function setSelectionModel(a){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=a,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var a=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),b={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};return a.remove(),b}function getHeadersWidth(){for(var a=0,b=0,c=columns.length;c>b;b++){var d=columns[b].width;a+=d}return a+=scrollbarDimensions.width,Math.max(a,viewportW)+1e3}function getCanvasWidth(){for(var a=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,b=0,c=columns.length;c--;)b+=columns[c].width;return options.fullWidthRows?Math.max(b,a):b}function updateCanvasWidth(a){var b=canvasWidth;canvasWidth=getCanvasWidth(),canvasWidth!=b&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),$headers.width(getHeadersWidth()),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width),$headerRowSpacer.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),(canvasWidth!=b||a)&&applyColumnWidths()}function disableSelection(a){a&&a.jquery&&a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var a=1e6,b=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,c=$("<div style='display:none' />").appendTo(document.body);;){var d=2*a;if(c.css("height",d),d>b||c.height()!==d)break;a=d}return c.remove(),a}function bindAncestorScrollEvents(){for(var a=$canvas[0];(a=a.parentNode)!=document.body&&null!=a;)if(a==$viewport[0]||a.scrollWidth!=a.clientWidth||a.scrollHeight!=a.clientHeight){var b=$(a);$boundAncestors=$boundAncestors?$boundAncestors.add(b):b,b.bind("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.unbind("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(a,b,c){if(initialized){var d=getColumnIndex(a);if(null!=d){var e=columns[d],f=$headers.children().eq(d);f&&(void 0!==b&&(columns[d].name=b),void 0!==c&&(columns[d].toolTip=c),trigger(self.onBeforeHeaderCellDestroy,{node:f[0],column:e}),f.attr("title",c||"").children().eq(0).html(b),trigger(self.onHeaderCellRendered,{node:f[0],column:e}))}}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(a){var b=getColumnIndex(a),c=$headerRow.children().eq(b);return c&&c[0]}function createColumnHeaders(){function a(){$(this).addClass("ui-state-hover")}function b(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var a=$(this).data("column");a&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:a})}),$headers.empty(),$headers.width(getHeadersWidth()),$headerRow.find(".slick-headerrow-column").each(function(){var a=$(this).data("column");a&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:a})}),$headerRow.empty();for(var c=0;c<columns.length;c++){var d=columns[c],e=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+d.name+"</span>").width(d.width-headerColumnWidthDiff).attr("id",""+uid+d.id).attr("title",d.toolTip||"").data("column",d).addClass(d.headerCssClass||"").appendTo($headers);if((options.enableColumnReorder||d.sortable)&&e.on("mouseenter",a).on("mouseleave",b),d.sortable&&(e.addClass("slick-header-sortable"),e.append("<span class='slick-sort-indicator' />")),trigger(self.onHeaderCellRendered,{node:e[0],column:d}),options.showHeaderRow){var f=$("<div class='ui-state-default slick-headerrow-column l"+c+" r"+c+"'></div>").data("column",d).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{node:f[0],column:d})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(a){if(a.metaKey=a.metaKey||a.ctrlKey,!$(a.target).hasClass("slick-resizable-handle")){var b=$(a.target).closest(".slick-header-column");if(b.length){var c=b.data("column");if(c.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var d=null,e=0;e<sortColumns.length;e++)if(sortColumns[e].columnId==c.id){d=sortColumns[e],d.sortAsc=!d.sortAsc;break}a.metaKey&&options.multiColumnSort?d&&sortColumns.splice(e,1):((a.shiftKey||a.metaKey)&&options.multiColumnSort||(sortColumns=[]),d?0==sortColumns.length&&sortColumns.push(d):(d={columnId:c.id,sortAsc:c.defaultSortAsc},sortColumns.push(d))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(a){return{sortCol:columns[getColumnIndex(a.columnId)],sortAsc:a.sortAsc}})},a):trigger(self.onSort,{multiColumnSort:!1,sortCol:c,sortAsc:d.sortAsc},a)}}}})}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy"),$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",start:function(a,b){b.placeholder.width(b.helper.outerWidth()-headerColumnWidthDiff),$(b.helper).addClass("slick-header-column-active")},beforeStop:function(a,b){$(b.helper).removeClass("slick-header-column-active")},stop:function(a){if(!getEditorLock().commitCurrentEdit())return void $(this).sortable("cancel");for(var b=$headers.sortable("toArray"),c=[],d=0;d<b.length;d++)c.push(columns[getColumnIndex(b[d].replace(uid,""))]);setColumns(c),trigger(self.onColumnsReordered,{}),a.stopPropagation(),setupColumnResize()}})}function setupColumnResize(){var a,b,c,d,e,f,g,h,i;e=$headers.children(),e.find(".slick-resizable-handle").remove(),e.each(function(a){columns[a].resizable&&(void 0===h&&(h=a),i=a)}),void 0!==h&&e.each(function(j,k){h>j||options.forceFitColumns&&j>=i||(a=$(k),$("<div class='slick-resizable-handle' />").appendTo(k).bind("dragstart",function(a){if(!getEditorLock().commitCurrentEdit())return!1;d=a.pageX,$(this).parent().addClass("slick-header-column-active");var h=null,i=null;if(e.each(function(a,b){columns[a].previousWidth=$(b).outerWidth()}),options.forceFitColumns)for(h=0,i=0,b=j+1;b<e.length;b++)c=columns[b],c.resizable&&(null!==i&&(c.maxWidth?i+=c.maxWidth-c.previousWidth:i=null),h+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth));var k=0,l=0;for(b=0;j>=b;b++)c=columns[b],c.resizable&&(null!==l&&(c.maxWidth?l+=c.maxWidth-c.previousWidth:l=null),k+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth));null===h&&(h=1e5),null===k&&(k=1e5),null===i&&(i=1e5),null===l&&(l=1e5),g=d+Math.min(h,l),f=d-Math.min(k,i)}).bind("drag",function(a){var h,i,k=Math.min(g,Math.max(f,a.pageX))-d;if(0>k){for(i=k,b=j;b>=0;b--)c=columns[b],c.resizable&&(h=Math.max(c.minWidth||0,absoluteColumnMinWidth),i&&c.previousWidth+i<h?(i+=c.previousWidth-h,c.width=h):(c.width=c.previousWidth+i,i=0));if(options.forceFitColumns)for(i=-k,b=j+1;b<e.length;b++)c=columns[b],c.resizable&&(i&&c.maxWidth&&c.maxWidth-c.previousWidth<i?(i-=c.maxWidth-c.previousWidth,c.width=c.maxWidth):(c.width=c.previousWidth+i,i=0))}else{for(i=k,b=j;b>=0;b--)c=columns[b],c.resizable&&(i&&c.maxWidth&&c.maxWidth-c.previousWidth<i?(i-=c.maxWidth-c.previousWidth,c.width=c.maxWidth):(c.width=c.previousWidth+i,i=0));if(options.forceFitColumns)for(i=-k,b=j+1;b<e.length;b++)c=columns[b],c.resizable&&(h=Math.max(c.minWidth||0,absoluteColumnMinWidth),i&&c.previousWidth+i<h?(i+=c.previousWidth-h,c.width=h):(c.width=c.previousWidth+i,i=0))}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).bind("dragend",function(){var a;for($(this).parent().removeClass("slick-header-column-active"),b=0;b<e.length;b++)c=columns[b],a=$(e[b]).outerWidth(),c.previousWidth!==a&&c.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{})}))})}function getVBoxDelta(a){var b=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=0;return $.each(b,function(b,d){c+=parseFloat(a.css(d))||0}),c}function measureCellPaddingAndBorder(){var a,b=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];a=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,"border-box"!=a.css("box-sizing")&&"border-box"!=a.css("-moz-box-sizing")&&"border-box"!=a.css("-webkit-box-sizing")&&($.each(b,function(b,c){headerColumnWidthDiff+=parseFloat(a.css(c))||0}),$.each(c,function(b,c){headerColumnHeightDiff+=parseFloat(a.css(c))||0})),a.remove();var d=$("<div class='slick-row' />").appendTo($canvas);a=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(d),cellWidthDiff=cellHeightDiff=0,"border-box"!=a.css("box-sizing")&&"border-box"!=a.css("-moz-box-sizing")&&"border-box"!=a.css("-webkit-box-sizing")&&($.each(b,function(b,c){cellWidthDiff+=parseFloat(a.css(c))||0}),$.each(c,function(b,c){cellHeightDiff+=parseFloat(a.css(c))||0})),d.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var a=options.rowHeight-cellHeightDiff,b=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+a+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],c=0;c<columns.length;c++)b.push("."+uid+" .l"+c+" { }"),b.push("."+uid+" .r"+c+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=b.join(" "):$style[0].appendChild(document.createTextNode(b.join(" ")))}function getColumnCssRules(a){if(!stylesheet){for(var b=document.styleSheets,c=0;c<b.length;c++)if((b[c].ownerNode||b[c].owningElement)==$style[0]){stylesheet=b[c];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];for(var d,e,f=stylesheet.cssRules||stylesheet.rules,c=0;c<f.length;c++){var g=f[c].selectorText;(d=/\.l\d+/.exec(g))?(e=parseInt(d[0].substr(2,d[0].length-2),10),columnCssRulesL[e]=f[c]):(d=/\.r\d+/.exec(g))&&(e=parseInt(d[0].substr(2,d[0].length-2),10),columnCssRulesR[e]=f[c])}}return{left:columnCssRulesL[a],right:columnCssRulesR[a]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var a=plugins.length;a--;)unregisterPlugin(plugins[a]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(a,b,c){return c=c||new Slick.EventData,b=b||{},b.grid=self,a.notify(b,c,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(a){return columnsById[a]}function autosizeColumns(){var a,b,c,d=[],e=0,f=0,g=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(a=0;a<columns.length;a++)b=columns[a],d.push(b.width),f+=b.width,b.resizable&&(e+=b.width-Math.max(b.minWidth,absoluteColumnMinWidth));for(c=f;f>g&&e;){var h=(f-g)/e;for(a=0;a<columns.length&&f>g;a++){b=columns[a];var i=d[a];if(!(!b.resizable||i<=b.minWidth||absoluteColumnMinWidth>=i)){var j=Math.max(b.minWidth,absoluteColumnMinWidth),k=Math.floor(h*(i-j))||1;k=Math.min(k,i-j),f-=k,e-=k,d[a]-=k}}if(f>=c)break;c=f}for(c=f;g>f;){var l=g/f;for(a=0;a<columns.length&&g>f;a++){b=columns[a];var m,n=d[a];m=!b.resizable||b.maxWidth<=n?0:Math.min(Math.floor(l*n)-n,b.maxWidth-n||1e6)||1,f+=m,d[a]+=m}if(c>=f)break;c=f}var o=!1;for(a=0;a<columns.length;a++)columns[a].rerenderOnResize&&columns[a].width!=d[a]&&(o=!0),columns[a].width=d[a];applyColumnHeaderWidths(),updateCanvasWidth(!0),o&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(initialized){for(var a,b=0,c=$headers.children(),d=c.length;d>b;b++)a=$(c[b]),a.width()!==columns[b].width-headerColumnWidthDiff&&a.width(columns[b].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var a,b,c=0,d=0;d<columns.length;d++)a=columns[d].width,b=getColumnCssRules(d),b.left.style.left=c+"px",b.right.style.right=canvasWidth-c-a+"px",c+=columns[d].width}function setSortColumn(a,b){setSortColumns([{columnId:a,sortAsc:b}])}function setSortColumns(a){sortColumns=a;var b=$headers.children();b.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),$.each(sortColumns,function(a,c){null==c.sortAsc&&(c.sortAsc=!0);var d=getColumnIndex(c.columnId);null!=d&&b.eq(d).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(c.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(a,b){selectedRows=[];for(var c={},d=0;d<b.length;d++)for(var e=b[d].fromRow;e<=b[d].toRow;e++){c[e]||(selectedRows.push(e),c[e]={});for(var f=b[d].fromCell;f<=b[d].toCell;f++)canCellBeSelected(e,f)&&(c[e][columns[f].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,c),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},a)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var a=0,b=0,c=columns.length;c>b;b++)columnPosLeft[b]=a,columnPosRight[b]=a+columns[b].width,a+=columns[b].width}function setColumns(a){columns=a,columnsById={};for(var b=0;b<columns.length;b++){var c=columns[b]=$.extend({},columnDefaults,columns[b]);columnsById[c.id]=b,c.minWidth&&c.width<c.minWidth&&(c.width=c.minWidth),c.maxWidth&&c.width>c.maxWidth&&(c.width=c.maxWidth)}updateColumnCaches(),initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(a){getEditorLock().commitCurrentEdit()&&(makeActiveCellNormal(),options.enableAddRow!==a.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,a),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),render())}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1)}function setData(a,b){data=a,invalidateAllRows(),updateRowCount(),b&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow?1:0)}function getDataItem(a){return data.getItem?data.getItem(a):data[a]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(a){options.showTopPanel!=a&&(options.showTopPanel=a,a?$topPanelScroller.slideDown("fast",resizeCanvas):$topPanelScroller.slideUp("fast",resizeCanvas))}function setHeaderRowVisibility(a){options.showHeaderRow!=a&&(options.showHeaderRow=a,a?$headerRowScroller.slideDown("fast",resizeCanvas):$headerRowScroller.slideUp("fast",resizeCanvas))}function getContainerNode(){return $container.get(0)}function getRowTop(a){return options.rowHeight*a-offset}function getRowFromPosition(a){return Math.floor((a+offset)/options.rowHeight)}function scrollTo(a){a=Math.max(a,0),a=Math.min(a,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var b=offset;page=Math.min(n-1,Math.floor(a/ph)),offset=Math.round(page*cj);var c=a-offset;if(offset!=b){var d=getVisibleRange(c);cleanupRows(d),updateRowPositions()}prevScrollTop!=c&&(vScrollDir=c+offset>prevScrollTop+b?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=c,trigger(self.onViewportChanged,{}))}function defaultFormatter(a,b,c){return null==c?"":(c+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(a,b){var c=data.getItemMetadata&&data.getItemMetadata(a),d=c&&c.columns&&(c.columns[b.id]||c.columns[getColumnIndex(b.id)]);return d&&d.formatter||c&&c.formatter||b.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(b)||options.defaultFormatter}function getEditor(a,b){var c=columns[b],d=data.getItemMetadata&&data.getItemMetadata(a),e=d&&d.columns;return e&&e[c.id]&&void 0!==e[c.id].editor?e[c.id].editor:e&&e[b]&&void 0!==e[b].editor?e[b].editor:c.editor||options.editorFactory&&options.editorFactory.getEditor(c)}function getDataItemValueForColumn(a,b){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(a,b):a[b.field]}function appendRowHtml(a,b,c,d){var e=getDataItem(b),f=d>b&&!e,g="slick-row"+(f?" loading":"")+(b===activeRow?" active":"")+(b%2==1?" odd":" even");e||(g+=" "+options.addNewRowCssClass);var h=data.getItemMetadata&&data.getItemMetadata(b);h&&h.cssClasses&&(g+=" "+h.cssClasses),a.push("<div class='ui-widget-content "+g+"' style='top:"+getRowTop(b)+"px'>");for(var i,j,k=0,l=columns.length;l>k;k++){if(j=columns[k],i=1,h&&h.columns){var m=h.columns[j.id]||h.columns[k];i=m&&m.colspan||1,"*"===i&&(i=l-k)}if(columnPosRight[Math.min(l-1,k+i-1)]>c.leftPx){if(columnPosLeft[k]>c.rightPx)break;appendCellHtml(a,b,k,i,e)}i>1&&(k+=i-1)}a.push("</div>")}function appendCellHtml(a,b,c,d,e){var f=columns[c],g="slick-cell l"+c+" r"+Math.min(columns.length-1,c+d-1)+(f.cssClass?" "+f.cssClass:"");b===activeRow&&c===activeCell&&(g+=" active");for(var h in cellCssClasses)cellCssClasses[h][b]&&cellCssClasses[h][b][f.id]&&(g+=" "+cellCssClasses[h][b][f.id]);if(a.push("<div class='"+g+"'>"),e){var i=getDataItemValueForColumn(e,f);a.push(getFormatter(b,f)(b,c,i,f,e))}a.push("</div>"),rowsCache[b].cellRenderQueue.push(c),rowsCache[b].cellColSpans[c]=d}function cleanupRows(a){for(var b in rowsCache)(b=parseInt(b,10))!==activeRow&&(b<a.top||b>a.bottom)&&removeRowFromCache(b)}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var a in rowsCache)removeRowFromCache(a)}function scrollToLastRendered(){lastRenderedScrollTop&&(prevScrollTop=0,scrollTo(lastRenderedScrollTop))}function removeRowFromCache(a){var b=rowsCache[a];b&&(rowNodeFromLastMouseWheelEvent==b.rowNode?(b.rowNode.style.display="none",zombieRowNodeFromLastMouseWheelEvent=rowNodeFromLastMouseWheelEvent):$canvas[0].removeChild(b.rowNode),delete rowsCache[a],delete postProcessedRows[a],renderedRows--,counter_rows_removed++)}function invalidateRows(a){var b,c;if(a&&a.length)for(vScrollDir=0,b=0,c=a.length;c>b;b++)currentEditor&&activeRow===a[b]&&makeActiveCellNormal(),rowsCache[a[b]]&&removeRowFromCache(a[b])}function invalidateRow(a){invalidateRows([a])}function updateCell(a,b){var c=getCellNode(a,b);if(c){var d=columns[b],e=getDataItem(a);currentEditor&&activeRow===a&&activeCell===b?currentEditor.loadValue(e):(c.innerHTML=e?getFormatter(a,d)(a,b,getDataItemValueForColumn(e,d),d,e):"",invalidatePostProcessingResults(a))}}function updateRow(a){var b=rowsCache[a];if(b){ensureCellNodesInRowsCache(a);var c=getDataItem(a);for(var d in b.cellNodesByColumnIdx)if(b.cellNodesByColumnIdx.hasOwnProperty(d)){d=0|d;var e=columns[d],f=b.cellNodesByColumnIdx[d];a===activeRow&&d===activeCell&&currentEditor?currentEditor.loadValue(c):f.innerHTML=c?getFormatter(a,e)(a,d,getDataItemValueForColumn(c,e),e,c):""}invalidatePostProcessingResults(a)}}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){initialized&&(viewportH=options.autoHeight?options.rowHeight*getDataLengthIncludingAddNew():getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),options.autoHeight||$viewport.height(viewportH),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),lastRenderedScrollLeft=-1,render())}function updateRowCount(){if(initialized){var a=getDataLengthIncludingAddNew(),b=a+(options.leaveSpaceForNewRows?numVisibleRows-1:0),c=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&b*options.rowHeight>viewportH,makeActiveCellNormal();var d=a-1;for(var e in rowsCache)e>=d&&removeRowFromCache(e);activeCellNode&&activeRow>d&&resetActiveCell();var f=h;th=Math.max(options.rowHeight*b,viewportH-scrollbarDimensions.height),maxSupportedCssHeight>th?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==f&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var g=th-viewportH>=scrollTop+offset;0==th||0==scrollTop?page=offset=0:scrollTo(g?scrollTop+offset:th-viewportH),h!=f&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&c!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(a,b){return null==a&&(a=scrollTop),null==b&&(b=scrollLeft),{top:getRowFromPosition(a),bottom:getRowFromPosition(a+viewportH)+1,leftPx:b,rightPx:b+viewportW}
}function getRenderedRange(a,b){var c=getVisibleRange(a,b),d=Math.round(viewportH/options.rowHeight),e=3;return-1==vScrollDir?(c.top-=d,c.bottom+=e):1==vScrollDir?(c.top-=e,c.bottom+=d):(c.top-=e,c.bottom+=e),c.top=Math.max(0,c.top),c.bottom=Math.min(getDataLengthIncludingAddNew()-1,c.bottom),c.leftPx-=viewportW,c.rightPx+=viewportW,c.leftPx=Math.max(0,c.leftPx),c.rightPx=Math.min(canvasWidth,c.rightPx),c}function ensureCellNodesInRowsCache(a){var b=rowsCache[a];if(b&&b.cellRenderQueue.length)for(var c=b.rowNode.lastChild;b.cellRenderQueue.length;){var d=b.cellRenderQueue.pop();b.cellNodesByColumnIdx[d]=c,c=c.previousSibling}}function cleanUpCells(a,b){var c=0,d=rowsCache[b],e=[];for(var f in d.cellNodesByColumnIdx)if(d.cellNodesByColumnIdx.hasOwnProperty(f)){f=0|f;var g=d.cellColSpans[f];(columnPosLeft[f]>a.rightPx||columnPosRight[Math.min(columns.length-1,f+g-1)]<a.leftPx)&&(b!=activeRow||f!=activeCell)&&e.push(f)}for(var h;null!=(h=e.pop());)d.rowNode.removeChild(d.cellNodesByColumnIdx[h]),delete d.cellColSpans[h],delete d.cellNodesByColumnIdx[h],postProcessedRows[b]&&delete postProcessedRows[b][h],c++}function cleanUpAndRenderCells(a){for(var b,c,d,e=[],f=[],g=0,h=a.top,i=a.bottom;i>=h;h++)if(b=rowsCache[h]){ensureCellNodesInRowsCache(h),cleanUpCells(a,h),c=0;var j=data.getItemMetadata&&data.getItemMetadata(h);j=j&&j.columns;for(var k=getDataItem(h),l=0,m=columns.length;m>l&&!(columnPosLeft[l]>a.rightPx);l++)if(null==(d=b.cellColSpans[l])){if(d=1,j){var n=j[columns[l].id]||j[l];d=n&&n.colspan||1,"*"===d&&(d=m-l)}columnPosRight[Math.min(m-1,l+d-1)]>a.leftPx&&(appendCellHtml(e,h,l,d,k),c++),l+=d>1?d-1:0}else l+=d>1?d-1:0;c&&(g+=c,f.push(h))}if(e.length){var o=document.createElement("div");o.innerHTML=e.join("");for(var p,q;null!=(p=f.pop());){b=rowsCache[p];for(var r;null!=(r=b.cellRenderQueue.pop());)q=o.lastChild,b.rowNode.appendChild(q),b.cellNodesByColumnIdx[r]=q}}}function renderRows(a){for(var b=$canvas[0],c=[],d=[],e=!1,f=getDataLength(),g=a.top,h=a.bottom;h>=g;g++)rowsCache[g]||(renderedRows++,d.push(g),rowsCache[g]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(c,g,a,f),activeCellNode&&activeRow===g&&(e=!0),counter_rows_rendered++);if(d.length){var i=document.createElement("div");i.innerHTML=c.join("");for(var g=0,h=d.length;h>g;g++)rowsCache[d[g]].rowNode=b.appendChild(i.firstChild);e&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function invalidatePostProcessingResults(a){delete postProcessedRows[a],postProcessFromRow=Math.min(postProcessFromRow,a),postProcessToRow=Math.max(postProcessToRow,a),startPostProcessing()}function updateRowPositions(){for(var a in rowsCache)rowsCache[a].rowNode.style.top=getRowTop(a)+"px"}function render(){if(initialized){var a=getVisibleRange(),b=getRenderedRange();cleanupRows(b),lastRenderedScrollLeft!=scrollLeft&&cleanUpAndRenderCells(b),renderRows(b),postProcessFromRow=a.top,postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,a.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null}}function handleHeaderRowScroll(){var a=$headerRowScroller[0].scrollLeft;a!=$viewport[0].scrollLeft&&($viewport[0].scrollLeft=a)}function handleScroll(){scrollTop=$viewport[0].scrollTop,scrollLeft=$viewport[0].scrollLeft;var a=Math.abs(scrollTop-prevScrollTop),b=Math.abs(scrollLeft-prevScrollLeft);if(b&&(prevScrollLeft=scrollLeft,$headerScroller[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScroller[0].scrollLeft=scrollLeft),a)if(vScrollDir=scrollTop>prevScrollTop?1:-1,prevScrollTop=scrollTop,viewportH>a)scrollTo(scrollTop+offset);else{var c=offset;page=h==viewportH?0:Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),c!=offset&&invalidateAllRows()}(b||a)&&(h_render&&clearTimeout(h_render),(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20)&&(options.forceSyncScrolling||Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW?render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{}))),trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){for(var a=getDataLength();postProcessToRow>=postProcessFromRow;){var b=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,c=rowsCache[b];if(c&&!(b>=a)){postProcessedRows[b]||(postProcessedRows[b]={}),ensureCellNodesInRowsCache(b);for(var d in c.cellNodesByColumnIdx)if(c.cellNodesByColumnIdx.hasOwnProperty(d)){d=0|d;var e=columns[d];if(e.asyncPostRender&&!postProcessedRows[b][d]){var f=c.cellNodesByColumnIdx[d];f&&e.asyncPostRender(f,b,getDataItem(b),e),postProcessedRows[b][d]=!0}}return void(h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}}}function updateCellCssStylesOnRenderedRows(a,b){var c,d,e,f;for(var g in rowsCache){if(f=b&&b[g],e=a&&a[g],f)for(d in f)e&&f[d]==e[d]||(c=getCellNode(g,getColumnIndex(d)),c&&$(c).removeClass(f[d]));if(e)for(d in e)f&&f[d]==e[d]||(c=getCellNode(g,getColumnIndex(d)),c&&$(c).addClass(e[d]))}}function addCellCssStyles(a,b){if(cellCssClasses[a])throw"addCellCssStyles: cell CSS hash with key '"+a+"' already exists.";cellCssClasses[a]=b,updateCellCssStylesOnRenderedRows(b,null),trigger(self.onCellCssStylesChanged,{key:a,hash:b})}function removeCellCssStyles(a){cellCssClasses[a]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[a]),delete cellCssClasses[a],trigger(self.onCellCssStylesChanged,{key:a,hash:null}))}function setCellCssStyles(a,b){var c=cellCssClasses[a];cellCssClasses[a]=b,updateCellCssStylesOnRenderedRows(b,c),trigger(self.onCellCssStylesChanged,{key:a,hash:b})}function getCellCssStyles(a){return cellCssClasses[a]}function flashCell(a,b,c){function d(a){a&&setTimeout(function(){e.queue(function(){e.toggleClass(options.cellFlashingCssClass).dequeue(),d(a-1)})},c)}if(c=c||100,rowsCache[a]){var e=$(getCellNode(a,b));d(4)}}function handleMouseWheel(a){var b=$(a.target).closest(".slick-row")[0];b!=rowNodeFromLastMouseWheelEvent&&(zombieRowNodeFromLastMouseWheelEvent&&zombieRowNodeFromLastMouseWheelEvent!=b&&($canvas[0].removeChild(zombieRowNodeFromLastMouseWheelEvent),zombieRowNodeFromLastMouseWheelEvent=null),rowNodeFromLastMouseWheelEvent=b)}function handleDragInit(a,b){var c=getCellFromEvent(a);if(!c||!cellExists(c.row,c.cell))return!1;var d=trigger(self.onDragInit,b,a);return a.isImmediatePropagationStopped()?d:!1}function handleDragStart(a,b){var c=getCellFromEvent(a);if(!c||!cellExists(c.row,c.cell))return!1;var d=trigger(self.onDragStart,b,a);return a.isImmediatePropagationStopped()?d:!1}function handleDrag(a,b){return trigger(self.onDrag,b,a)}function handleDragEnd(a,b){trigger(self.onDragEnd,b,a)}function handleKeyDown(a){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},a);var b=a.isImmediatePropagationStopped();if(!b)if(a.shiftKey||a.altKey||a.ctrlKey)9!=a.which||!a.shiftKey||a.ctrlKey||a.altKey||(b=navigatePrev());else if(27==a.which){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else 34==a.which?(navigatePageDown(),b=!0):33==a.which?(navigatePageUp(),b=!0):37==a.which?b=navigateLeft():39==a.which?b=navigateRight():38==a.which?b=navigateUp():40==a.which?b=navigateDown():9==a.which?b=navigateNext():13==a.which&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable()),b=!0);if(b){a.stopPropagation(),a.preventDefault();try{a.originalEvent.keyCode=0}catch(c){}}}function handleClick(a){currentEditor||(a.target!=document.activeElement||$(a.target).hasClass("slick-cell"))&&setFocus();var b=getCellFromEvent(a);!b||null!==currentEditor&&activeRow==b.row&&activeCell==b.cell||(trigger(self.onClick,{row:b.row,cell:b.cell},a),a.isImmediatePropagationStopped()||activeCell==b.cell&&activeRow==b.row||!canCellBeActive(b.row,b.cell)||(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit())&&(scrollRowIntoView(b.row,!1),setActiveCellInternal(getCellNode(b.row,b.cell))))}function handleContextMenu(a){var b=$(a.target).closest(".slick-cell",$canvas);0!==b.length&&(activeCellNode!==b[0]||null===currentEditor)&&trigger(self.onContextMenu,{},a)}function handleDblClick(a){var b=getCellFromEvent(a);!b||null!==currentEditor&&activeRow==b.row&&activeCell==b.cell||(trigger(self.onDblClick,{row:b.row,cell:b.cell},a),a.isImmediatePropagationStopped()||options.editable&&gotoCell(b.row,b.cell,!0))}function handleHeaderMouseEnter(a){trigger(self.onHeaderMouseEnter,{column:$(this).data("column")},a)}function handleHeaderMouseLeave(a){trigger(self.onHeaderMouseLeave,{column:$(this).data("column")},a)}function handleHeaderContextMenu(a){var b=$(a.target).closest(".slick-header-column",".slick-header-columns"),c=b&&b.data("column");trigger(self.onHeaderContextMenu,{column:c},a)}function handleHeaderClick(a){var b=$(a.target).closest(".slick-header-column",".slick-header-columns"),c=b&&b.data("column");c&&trigger(self.onHeaderClick,{column:c},a)}function handleMouseEnter(a){trigger(self.onMouseEnter,{},a)}function handleMouseLeave(a){trigger(self.onMouseLeave,{},a)}function cellExists(a,b){return!(0>a||a>=getDataLength()||0>b||b>=columns.length)}function getCellFromPoint(a,b){for(var c=getRowFromPosition(b),d=0,e=0,f=0;f<columns.length&&a>e;f++)e+=columns[f].width,d++;return 0>d&&(d=0),{row:c,cell:d-1}}function getCellFromNode(a){var b=/l\d+/.exec(a.className);if(!b)throw"getCellFromNode: cannot get cell - "+a.className;return parseInt(b[0].substr(1,b[0].length-1),10)}function getRowFromNode(a){for(var b in rowsCache)if(rowsCache[b].rowNode===a)return 0|b;return null}function getCellFromEvent(a){var b=$(a.target).closest(".slick-cell",$canvas);if(!b.length)return null;var c=getRowFromNode(b[0].parentNode),d=getCellFromNode(b[0]);return null==c||null==d?null:{row:c,cell:d}}function getCellNodeBox(a,b){if(!cellExists(a,b))return null;for(var c=getRowTop(a),d=c+options.rowHeight-1,e=0,f=0;b>f;f++)e+=columns[f].width;var g=e+columns[b].width;return{top:c,left:e,bottom:d,right:g}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){-1==tabbingDirection?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(a,b,c){scrollRowIntoView(a,c);var d=getColspan(a,b),e=columnPosLeft[b],f=columnPosRight[b+(d>1?d-1:0)],g=scrollLeft+viewportW;scrollLeft>e?($viewport.scrollLeft(e),handleScroll(),render()):f>g&&($viewport.scrollLeft(Math.min(e,f-$viewport[0].clientWidth)),handleScroll(),render())}function setActiveCellInternal(a,b){null!==activeCellNode&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active"));var c=activeCellNode!==a;activeCellNode=a,null!=activeCellNode?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),null==b&&(b=activeRow==getDataLength()||options.autoEdit),$(activeCellNode).addClass("active"),$(rowsCache[activeRow].rowNode).addClass("active"),options.editable&&b&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay):makeActiveCellEditable())):activeRow=activeCell=null,c&&trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(a){}else if(window.getSelection){var b=window.getSelection();b&&b.removeAllRanges&&b.removeAllRanges()}}function isCellPotentiallyEditable(a,b){var c=getDataLength();return c>a&&!getDataItem(a)?!1:columns[b].cannotTriggerInsert&&a>=c?!1:getEditor(a,b)?!0:!1}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var a=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),a){var b=columns[activeCell],c=getFormatter(activeRow,b);activeCellNode.innerHTML=c(activeRow,activeCell,getDataItemValueForColumn(a,b),b,a),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(a){if(activeCellNode){if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(activeRow,activeCell)){var b=columns[activeCell],c=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:c,column:b})===!1)return void setFocus();getEditorLock().activate(editController),$(activeCellNode).addClass("editable"),a||(activeCellNode.innerHTML=""),currentEditor=new(a||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:b,item:c||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),c&&currentEditor.loadValue(c),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(a){var b={top:a.offsetTop,left:a.offsetLeft,bottom:0,right:0,width:$(a).outerWidth(),height:$(a).outerHeight(),visible:!0};b.bottom=b.top+b.height,b.right=b.left+b.width;for(var c=a.offsetParent;(a=a.parentNode)!=document.body;)b.visible&&a.scrollHeight!=a.offsetHeight&&"visible"!=$(a).css("overflowY")&&(b.visible=b.bottom>a.scrollTop&&b.top<a.scrollTop+a.clientHeight),b.visible&&a.scrollWidth!=a.offsetWidth&&"visible"!=$(a).css("overflowX")&&(b.visible=b.right>a.scrollLeft&&b.left<a.scrollLeft+a.clientWidth),b.left-=a.scrollLeft,b.top-=a.scrollTop,a===c&&(b.left+=a.offsetLeft,b.top+=a.offsetTop,c=a.offsetParent),b.bottom=b.top+b.height,b.right=b.left+b.width;return b}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var a=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(a.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(a)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(a,b){var c=a*options.rowHeight,d=(a+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(a+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(b?c:d),render()):a*options.rowHeight<scrollTop+offset&&(scrollTo(b?d:c),render())}function scrollRowToTop(a){scrollTo(a*options.rowHeight),render()}function scrollPage(a){var b=a*numVisibleRows;if(scrollTo((getRowFromPosition(scrollTop)+b)*options.rowHeight),render(),options.enableCellNavigation&&null!=activeRow){var c=activeRow+b,d=getDataLengthIncludingAddNew();c>=d&&(c=d-1),0>c&&(c=0);for(var e=0,f=null,g=activePosX;activePosX>=e;)canCellBeActive(c,e)&&(f=e),e+=getColspan(c,e);null!==f?(setActiveCellInternal(getCellNode(c,f)),activePosX=g):resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function getColspan(a,b){var c=data.getItemMetadata&&data.getItemMetadata(a);if(!c||!c.columns)return 1;var d=c.columns[columns[b].id]||c.columns[b],e=d&&d.colspan;return e="*"===e?columns.length-b:e||1}function findFirstFocusableCell(a){for(var b=0;b<columns.length;){if(canCellBeActive(a,b))return b;b+=getColspan(a,b)}return null}function findLastFocusableCell(a){for(var b=0,c=null;b<columns.length;)canCellBeActive(a,b)&&(c=b),b+=getColspan(a,b);return c}function gotoRight(a,b){if(b>=columns.length)return null;do b+=getColspan(a,b);while(b<columns.length&&!canCellBeActive(a,b));return b<columns.length?{row:a,cell:b,posX:b}:null}function gotoLeft(a,b){if(0>=b)return null;var c=findFirstFocusableCell(a);if(null===c||c>=b)return null;for(var d,e={row:a,cell:c,posX:c};;){if(d=gotoRight(e.row,e.cell,e.posX),!d)return null;if(d.cell>=b)return e;e=d}}function gotoDown(a,b,c){for(var d,e=getDataLengthIncludingAddNew();;){if(++a>=e)return null;for(d=b=0;c>=b;)d=b,b+=getColspan(a,b);if(canCellBeActive(a,d))return{row:a,cell:d,posX:c}}}function gotoUp(a,b,c){for(var d;;){if(--a<0)return null;for(d=b=0;c>=b;)d=b,b+=getColspan(a,b);if(canCellBeActive(a,d))return{row:a,cell:d,posX:c}}}function gotoNext(a,b,c){if(null==a&&null==b&&(a=b=c=0,canCellBeActive(a,b)))return{row:a,cell:b,posX:b};var d=gotoRight(a,b,c);if(d)return d;for(var e=null,f=getDataLengthIncludingAddNew();++a<f;)if(e=findFirstFocusableCell(a),null!==e)return{row:a,cell:e,posX:e};return null}function gotoPrev(a,b,c){if(null==a&&null==b&&(a=getDataLengthIncludingAddNew()-1,b=c=columns.length-1,canCellBeActive(a,b)))return{row:a,cell:b,posX:b};for(var d,e;!d&&!(d=gotoLeft(a,b,c));){if(--a<0)return null;b=0,e=findLastFocusableCell(a),null!==e&&(d={row:a,cell:e,posX:e})}return d}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigate(a){if(!options.enableCellNavigation)return!1;if(!activeCellNode&&"prev"!=a&&"next"!=a)return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();var b={up:-1,down:1,left:-1,right:1,prev:-1,next:1};tabbingDirection=b[a];var c={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext},d=c[a],e=d(activeRow,activeCell,activePosX);if(e){var f=e.row==getDataLength();return scrollCellIntoView(e.row,e.cell,!f),setActiveCellInternal(getCellNode(e.row,e.cell)),activePosX=e.posX,!0}return setActiveCellInternal(getCellNode(activeRow,activeCell)),!1}function getCellNode(a,b){return rowsCache[a]?(ensureCellNodesInRowsCache(a),rowsCache[a].cellNodesByColumnIdx[b]):null}function setActiveCell(a,b){initialized&&(a>getDataLength()||0>a||b>=columns.length||0>b||options.enableCellNavigation&&(scrollCellIntoView(a,b,!1),setActiveCellInternal(getCellNode(a,b),!1)))}function canCellBeActive(a,b){if(!options.enableCellNavigation||a>=getDataLengthIncludingAddNew()||0>a||b>=columns.length||0>b)return!1;var c=data.getItemMetadata&&data.getItemMetadata(a);if(c&&"boolean"==typeof c.focusable)return c.focusable;var d=c&&c.columns;return d&&d[columns[b].id]&&"boolean"==typeof d[columns[b].id].focusable?d[columns[b].id].focusable:d&&d[b]&&"boolean"==typeof d[b].focusable?d[b].focusable:columns[b].focusable}function canCellBeSelected(a,b){if(a>=getDataLength()||0>a||b>=columns.length||0>b)return!1;var c=data.getItemMetadata&&data.getItemMetadata(a);if(c&&"boolean"==typeof c.selectable)return c.selectable;var d=c&&c.columns&&(c.columns[columns[b].id]||c.columns[b]);return d&&"boolean"==typeof d.selectable?d.selectable:columns[b].selectable}function gotoCell(a,b,c){if(initialized&&canCellBeActive(a,b)&&getEditorLock().commitCurrentEdit()){scrollCellIntoView(a,b,!1);var d=getCellNode(a,b);setActiveCellInternal(d,c||a===getDataLength()||options.autoEdit),currentEditor||setFocus()}}function commitCurrentEdit(){var a=getDataItem(activeRow),b=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var c=currentEditor.validate();if(c.valid){if(activeRow<getDataLength()){var d={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(a,this.serializedValue),updateRow(this.row),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:a})},undo:function(){this.editor.applyValue(a,this.prevSerializedValue),updateRow(this.row),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:a})}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(a,b,d)):(d.execute(),makeActiveCellNormal())}else{var e={};currentEditor.applyValue(e,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:e,column:b})}return!getEditorLock().isActive()}return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:c,row:activeRow,cell:activeCell,column:b}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(a){for(var b=[],c=columns.length-1,d=0;d<a.length;d++)b.push(new Slick.Range(a[d],0,a[d],c));return b}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(a){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(a))}var defaults={explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row"},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2,$headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacer,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,absoluteColumnMinWidth,tabbingDirection=1,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0,rowNodeFromLastMouseWheelEvent,zombieRowNodeFromLastMouseWheelEvent;this.debug=function(){var a="";a+="\ncounter_rows_rendered:  "+counter_rows_rendered,a+="\ncounter_rows_removed:  "+counter_rows_removed,a+="\nrenderedRows:  "+renderedRows,a+="\nnumVisibleRows:  "+numVisibleRows,a+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,a+="\nn(umber of pages):  "+n,a+="\n(current) page:  "+page,a+="\npage height (ph):  "+ph,a+="\nvScrollDir:  "+vScrollDir,alert(a)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.1",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getContainerNode:getContainerNode,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,getCanvasNode:getCanvasNode,focus:setFocus,scrollToLastRendered:scrollToLastRendered,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,navigatePageUp:navigatePageUp,navigatePageDown:navigatePageDown,gotoCell:gotoCell,getTopPanel:getTopPanel,setTopPanelVisibility:setTopPanelVisibility,setHeaderRowVisibility:setHeaderRowVisibility,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions,maxSupportedCssHeight}(jQuery),define("slickgrid/slick.grid",["slickgrid/slick.core"],function(){}),function(a){function b(b){function c(c){r=a.extend(!0,{},v,b),p=c,u.subscribe(p.onActiveCellChanged,e(m)),u.subscribe(p.onKeyDown,e(n)),u.subscribe(p.onClick,e(o))}function d(){u.unsubscribeAll()}function e(a){return function(){q||(q=!0,a.apply(this,arguments),q=!1)}}function f(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].fromRow;d<=a[c].toRow;d++)b.push(d);return b}function g(a){for(var b=[],c=p.getColumns().length-1,d=0;d<a.length;d++)b.push(new Slick.Range(a[d],0,a[d],c));return b}function h(a,b){var c,d=[];for(c=a;b>=c;c++)d.push(c);for(c=b;a>c;c++)d.push(c);return d}function i(){return f(s)}function j(a){k(g(a))}function k(a){s=a,t.onSelectedRangesChanged.notify(s)}function l(){return s}function m(a,b){r.selectActiveRow&&null!=b.row&&k([new Slick.Range(b.row,0,b.row,p.getColumns().length-1)])}function n(a){var b=p.getActiveCell();if(b&&a.shiftKey&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&(38==a.which||40==a.which)){var c=i();c.sort(function(a,b){return a-b}),c.length||(c=[b.row]);var d,e=c[0],f=c[c.length-1];d=40==a.which?b.row<f||e==f?++f:++e:b.row<f?--f:--e,d>=0&&d<p.getDataLength()&&(p.scrollRowIntoView(d),s=g(h(e,f)),k(s)),a.preventDefault(),a.stopPropagation()}}function o(b){var c=p.getCellFromEvent(b);if(!c||!p.canCellBeActive(c.row,c.cell))return!1;if(!p.getOptions().multiSelect||!b.ctrlKey&&!b.shiftKey&&!b.metaKey)return!1;var d=f(s),e=a.inArray(c.row,d);if(-1===e&&(b.ctrlKey||b.metaKey))d.push(c.row),p.setActiveCell(c.row,c.cell);else if(-1!==e&&(b.ctrlKey||b.metaKey))d=a.grep(d,function(a){return a!==c.row}),p.setActiveCell(c.row,c.cell);else if(d.length&&b.shiftKey){var h=d.pop(),i=Math.min(c.row,h),j=Math.max(c.row,h);d=[];for(var l=i;j>=l;l++)l!==h&&d.push(l);d.push(h),p.setActiveCell(c.row,c.cell)}return s=g(d),k(s),b.stopImmediatePropagation(),!0}var p,q,r,s=[],t=this,u=new Slick.EventHandler,v={selectActiveRow:!0};a.extend(this,{getSelectedRows:i,setSelectedRows:j,getSelectedRanges:l,setSelectedRanges:k,init:c,destroy:d,onSelectedRangesChanged:new Slick.Event})}a.extend(!0,window,{Slick:{RowSelectionModel:b}})}(jQuery),define("slickgrid/plugins/slick.rowselectionmodel",function(){}),function(a){function b(b,c,d){function e(){c.onHeaderContextMenu.subscribe(g),c.onColumnsReordered.subscribe(h),d=a.extend({},m,d),k=a("<span class='slick-columnpicker' style='display:none;position:absolute;z-index:20;' />").appendTo(document.body),k.bind("mouseleave",function(){a(this).fadeOut(d.fadeSpeed)}),k.bind("click",i)}function f(){c.onHeaderContextMenu.unsubscribe(g),c.onColumnsReordered.unsubscribe(h),k.remove()}function g(e){e.preventDefault(),k.empty(),h(),l=[];for(var f,g,i=0;i<b.length;i++)f=a("<li />").appendTo(k),g=a("<input type='checkbox' />").data("column-id",b[i].id),l.push(g),null!=c.getColumnIndex(b[i].id)&&g.attr("checked","checked"),a("<label />").text(b[i].name).prepend(g).appendTo(f);a("<hr/>").appendTo(k),f=a("<li />").appendTo(k),g=a("<input type='checkbox' />").data("option","autoresize"),a("<label />").text("Force fit columns").prepend(g).appendTo(f),c.getOptions().forceFitColumns&&g.attr("checked","checked"),f=a("<li />").appendTo(k),g=a("<input type='checkbox' />").data("option","syncresize"),a("<label />").text("Synchronous resize").prepend(g).appendTo(f),c.getOptions().syncColumnCellResize&&g.attr("checked","checked"),k.css("top",e.pageY-10).css("left",e.pageX-10).fadeIn(d.fadeSpeed)}function h(){for(var a=c.getColumns().slice(0),d=new Array(b.length),e=0;e<d.length;e++)d[e]=void 0===c.getColumnIndex(b[e].id)?b[e]:a.shift();b=d}function i(d){if("autoresize"==a(d.target).data("option"))return void(d.target.checked?(c.setOptions({forceFitColumns:!0}),c.autosizeColumns()):c.setOptions({forceFitColumns:!1}));if("syncresize"==a(d.target).data("option"))return void c.setOptions(d.target.checked?{syncColumnCellResize:!0}:{syncColumnCellResize:!1});if(a(d.target).is(":checkbox")){var e=[];if(a.each(l,function(c){a(this).is(":checked")&&e.push(b[c])}),!e.length)return void a(d.target).attr("checked","checked");c.setColumns(e)}}function j(){return b}var k,l,m={fadeSpeed:250};return e(),{getAllColumns:j,destroy:f}}a.extend(!0,window,{Slick:{Controls:{ColumnPicker:b}}})}(jQuery),define("slickgrid/controls/slick.columnpicker",function(){}),define("slickgrid-all",["slickgrid/slick.core","slickgrid/slick.grid","slickgrid/plugins/slick.rowselectionmodel","slickgrid/controls/slick.columnpicker"],function(){return window.Slick}),define("collection/GridSelection",["jquery","underscore","backbone","PlumageRoot","collection/Selection","slickgrid-all"],function(a,b,c,d,e,f){var g=function(a){this.selection=a,this.initialize.apply(this,arguments)
};return b.extend(g.prototype,c.Events,{selection:void 0,grid:void 0,selectActiveRow:!1,initialize:function(a){a=a||{},b.extend(this,a),this.selection.on("change",this.onSelectionChange,this),this.selection.on("add",this.onSelectionChange,this),this.selection.on("remove",this.onSelectionChange,this),this.selection.on("reset",this.onSelectionChange,this)},init:function(a){this.grid=a,this.handler=new f.EventHandler,this.handler.subscribe(this.grid.onActiveCellChanged,this.onActiveCellChanged.bind(this)),this.onSelectedRangesChanged=new f.Event},destroy:function(){this.handler.unsubscribeAll(),this.selection.off("change",this.onSelectionChange,this),this.selection.off("reset",this.onSelectionChange,this)},getSelectedRows:function(){return this.selection.getSelectedIndices()},setSelectedRows:function(a){this.selection.setSelectedIndices(a)},setSelectedRanges:function(a){this.setSelectedRows(this.rangesToRows(a))},getSelectedRanges:function(){return this.rowsToRanges(this.getSelectedRows())},onActiveCellChanged:function(a,b){this.selectActiveRow&&null!==b.row&&this.setSelectedRows([b.row])},onSelectionChange:function(){this.onSelectedRangesChanged.notify(this.getSelectedRanges())},rowsToRanges:function(a){for(var b=[],c=this.grid.getColumns().length-1,d=0;d<a.length;d++)b.push(new f.Range(a[d],0,a[d],c));return b},rangesToRows:function(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].fromRow;d<=a[c].toRow;d++)b.push(d);return b}}),d.collection.GridSelection=g}),define("collection/UserCollection",["jquery","backbone","PlumageRoot","collection/Collection","model/User"],function(a,b,c,d){return c.collection.UserCollection=d.extend({model:"model/User"})}),define("controller/BaseController",["jquery","underscore","backbone","PlumageRoot","RequestManager"],function(a,b,c,d,e){var f=function(){this.initialize.apply(this,arguments)};return b.extend(f.prototype,{requests:[],initialize:function(a){this.app=a},contentSelector:"#page",currentView:void 0,showView:function(b){var c=this.app.views.current;if(c){if(c===b)return;c.onHide&&c.onHide(),c.bodyCls&&a("body").removeClass(c.bodyCls)}this.app.views.current=b,e.abortOutstandingRequests(),a(this.contentSelector).html(b.el),b.isRendered||b.render(),b.bodyCls&&a("body").addClass(b.bodyCls),b.onShow&&b.onShow()},loadModel:function(a,b){return e.loadModel(a,b)}}),f.extend=c.Model.extend,d.controller.BaseController=f}),define("controller/ModelController",["jquery","underscore","backbone","PlumageRoot","controller/BaseController","util/ModelUtil"],function(a,b,c,d,e,f){return d.controller.ModelController=e.extend({modelCls:void 0,indexModelCls:void 0,indexModelOptions:{},indexViewCls:void 0,detailViewCls:void 0,editViewCls:void 0,initialize:function(a,b){e.prototype.initialize.apply(this,arguments),b=b||{},this.modelCls=f.loadClass(b.modelCls?b.modelCls:this.modelCls),this.indexModelCls=f.loadClass(b.indexModelCls?b.indexModelCls:this.indexModelCls),this.indexModelOptions=b.indexModelOptions?b.indexModelOptions:this.indexModelOptions,this.indexViewCls=f.loadClass(b.indexViewCls?b.indexViewCls:this.indexViewCls),this.detailViewCls=f.loadClass(b.detailViewCls?b.detailViewCls:this.detailViewCls)},getIndexCollection:function(){return this.indexModel},getDetailModel:function(){return this.detailModel},showIndex:function(a){a=a||{},a&&a.filters&&"string"==typeof a.filters&&(a.filters=JSON.parse(a.filters));var b=this.createIndexModel({},a);this.showIndexModel(b)},showDetail:function(a,b){var c=this.createDetailModel(a,{},b);this.showDetailModel(c)},showNew:function(){var a=this.createEditModel();this.showEditModel(a)},showEdit:function(a,b){var c=this.createEditModel(a,{},b);this.showEditModel(c)},showIndexModel:function(a){this.indexModel=a;var b=this.getIndexView();b.setModel(this.indexModel),this.showView(b),this.loadModel(this.indexModel,{reset:!0}).then(function(){b.setModel(a)}),this.indexModel.on("change",this.onIndexChange.bind(this))},showDetailModel:function(a){this.detailModel&&this.detailModel.off("error",this.onModelError,this),this.detailModel=a,this.detailModel.on("error",this.onModelError,this);var b=this.getDetailView();return b.setModel(a),this.showView(b),this.loadModel(a).then(function(){a.related&&b.setModel(a)})},showEditModel:function(a){var b=this.getEditView();return b.setModel(a),this.showView(b),this.loadModel(a).then(function(){a.related&&b.setModel(a)})},getIndexView:function(){if(!this.indexView){this.indexView=this.createIndexView()}return this.indexView},getDetailView:function(){return this.detailView||(this.detailView=this.createDetailView()),this.detailView},getEditView:function(){return this.editView||(this.editView=this.createEditView()),this.editView},createIndexModel:function(a,b){return this.createCollection(this.indexModelCls,a,b)},createDetailModel:function(a,b,c){return this.createModel(this.modelCls,a,b,c)},createEditModel:function(a,b,c){return this.createModel(this.modelCls,a,b,c)},createModel:function(a,c,d,e){d=d||{};var f={};return c&&(d=b.clone(d),d[a.prototype.idAttribute]=c),f.viewState=e,new a(d,f)},createCollection:function(a,c,d){c=b.clone(c||{}),d=b.clone(d||{});var e=d.filters;return e&&e&&"string"==typeof e&&(d.filters=JSON.parse(d.filters)),c=b.extend(b.clone(this.indexModelOptions||{}),c),c.meta=d,new a(null,c)},createIndexView:function(){var a=new this.indexViewCls;return a.on("itemSelected",this.onIndexItemSelected,this),a},createDetailView:function(){return new this.detailViewCls},createEditView:function(){return new this.editViewCls},onIndexItemSelected:function(a){if(a){var b=this.createDetailModel(a.id,a.attributes);b.navigate()}},onIndexChange:function(a){this.reloadIndex(a)},onModelError:function(a,b){404===b.status&&this.createIndexModel().navigate({replace:!0})},reloadIndex:b.debounce(function(a,b){b=void 0===b?!0:!1,b&&a.updateUrl(),a.load({reset:!0})},200)})}),define("model/SearchResults",["jquery","underscore","backbone","PlumageRoot","model/Model","collection/DataCollection"],function(a,b,c,d,e){return d.model.SearchResults=e.extend({urlRoot:"/search",relationships:{results:{modelCls:"collection/DataCollection",forceCreate:!0,reverse:"searchResult"}},getSearchResultCount:function(){return this.getRelated("results").size()},set:function(b){return b.attributes&&(b=b.attributes),b&&b.query&&(b.query=a.trim(b.query)),e.prototype.set.apply(this,arguments)},url:function(){return this.urlRoot+"/"+this.get("model")+"/"+encodeURIComponent(this.get("query"))},onLoad:function(){e.prototype.onLoad.apply(this,arguments),window.piwikTracker&&window.piwikTracker.trackSiteSearch(this.get("query"),!1,this.getSearchResultCount())}})}),define("History",["jquery","underscore","backbone","PlumageRoot"],function(a,b,c,d){return d.History=c.History.extend({constructor:function(){c.History.apply(this,arguments)},navigate:function(a,b){if(!c.History.started)return!1;b&&b!==!0||(b={trigger:!!b});var d=this.root+(a=this.getFragment(a||""));if(this.fragment!==a){if(this.fragment=a,""===a&&"/"!==d&&(d=d.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}}}),d.History}),define("Router",["jquery","underscore","backbone","PlumageRoot","History","util/ModelUtil"],function(a,b,c,d,e,f){return d.Router=c.Router.extend({controllerRoutes:void 0,controllerManager:void 0,rootUrl:"/",defaultUrl:"/",pushState:!0,initialize:function(a){if(a=a||{},void 0!==a.app&&(this.app=a.app),void 0!==a.defaultUrl&&(this.defaultUrl=a.defaultUrl),void 0!==a.rootUrl&&(this.rootUrl=a.rootUrl),void 0!==a.pushState&&(this.pushState=a.pushState),this.history=void 0!==a.history?a.history:new d.History,this.route("*path","defaultRoute",function(){window.location.pathname!==this.defaultUrl&&(window.location.pathname=this.defaultUrl)}),this.controllerRoutes)for(var c=0;c<this.controllerRoutes.length;c++){var e=this.controllerRoutes[c],f=e[1],g=f.controller+"."+f.method,h=b.bind(this.routeToController,this,f);this.route(e[0],g,h)}},start:function(){this.history.start({pushState:this.pushState,root:this.rootUrl})},routeToController:function(a){this.app.navView&&this.app.navView.select(a.nav);var b=this.app.controllerManager.getController(a.controller);b[a.method].apply(b,Array.prototype.slice.call(arguments,1))},route:function(a,c,d){b.isRegExp(a)||(a=this._routeToRegExp(a)),b.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return this.history.route(a,function(b){var f=e._extractParameters(a,b);e.execute(d,f),e.trigger.apply(e,["route:"+c].concat(f)),e.trigger("route",c,f),e.history.trigger("route",e,c,f),e.logNavigationAction(window.location.href,window.location.pathname)}),this},navigate:function(a,b){if(null===a||void 0===a)throw new Error('A "url" must be specified');0===a.indexOf(window.location.origin)&&(a=a.slice(window.location.origin.length)),0===a.indexOf(this.rootUrl)&&(a=a.slice(this.rootUrl.length)),this.history.navigate(a,b)},navigateWithQueryParams:function(a,b){a!==window.location.pathname+window.location.search&&this.navigate(a,b)},logNavigationAction:function(){},execute:function(a,b){var c=f.parseQueryString(b.pop());c&&b.push(c),a&&a.apply(this,b)}})}),define("util/ArrayUtil",["jquery","moment","PlumageRoot"],function(a,b,c){return c.util.ArrayUtil={findClosestIndexToValue:function(a,b,c,d){for(var e=0,f=a.length;f>e;){var g=Math.floor((e+f)/2);c.call(d,a[g])<b?e=g+1:f=g}return e}}}),define("util/D3Util",["jquery","moment","PlumageRoot"],function(a,b,c){return c.util.D3Util={applyConfig:function(a,b,d){for(var e in b){if(!b.hasOwnProperty(e))return;a.attr(e,c.util.D3Util.getAccessor(b[e],d))}},getAccessor:function(a,b){return"function"==typeof a?function(c,d){return a(c,d,b)}:a}}}),define("util/DateTimeUtil",["jquery","moment","PlumageRoot"],function(a,b,c){return c.util.defaultDateFormat="MMM Do YYYY, HH:mm:ss",c.util.DateTimeUtil={parseRelativeDate:function(c,d){var e=d?b.utc({hour:0}):b({hour:0});return"today"===c?c=e:a.isPlainObject(c)&&(c=e.clone().add(c)),c},isSameDay:function(c,d,e){return c&&d?(a.isNumeric(c)&&(c=e?b.utc(c):b(c)),a.isNumeric(d)&&(d=e?b.utc(d):b(d)),c.format("YYYY-MM-DD")===d.format("YYYY-MM-DD")):!1},isDateInRange:function(d,e,f,g){return a.isNumeric(d)&&(d=g?b.utc(d):b(d)),!(e&&!c.util.DateTimeUtil.isSameDay(d,e)&&d.isBefore(e)||f&&!c.util.DateTimeUtil.isSameDay(d,f,g)&&d.isAfter(f))},formatDate:function(a,d){return d=d||c.util.defaultDateFormat,new b(Number(a)).format(d)},formatDateUTC:function(a,d){return d=d||c.util.defaultDateFormat,new b(Number(a)).utc().format(d)},formatDateFromNow:function(a){return b(Number(a)).fromNow()},formatDuration:function(a){if(0>=a)return"None";var c=b.duration(a),d="",e=Math.floor(c.valueOf()/864e5),f=c.hours(),g=c.minutes(),h=!1;return 6e4>a?c.seconds()+" seconds":(e>0&&(h=!0,d+=e+(1===e?" day ":" days ")),(f>0||h)&&(h=!0,d+=f+(1===f?" hour ":" hours ")),(g>0||h)&&(h=!0,d+=g+(1===g?" minute":" minutes")),d)},formatDurationShort:function(a){if(0>=a)return"None";var c=b.duration(a),d="",e=Math.floor(c.valueOf()/864e5),f=c.hours(),g=c.minutes(),h=!1;return 6e4>a?c.seconds()+"s":(e>0&&(h=!0,d+=e+"d "),(f>0||h)&&(h=!0,d+=f+"h "),(g>0||h)&&(h=!0,d+=g+"m"),d)}}}),define("view/View",["jquery","underscore","backbone","handlebars","spinjs","PlumageRoot"],function(a,b,c,d,e,f){return f.view.View=c.View.extend({isRendered:!1,isLoading:!1,shown:!1,template:void 0,bodyCls:void 0,deferRender:!1,pathRegex:/^(\S*\/)\S+?\.[^.]*$/,constructor:function(a){a=a||{},b.extend(this,a),c.View.apply(this,arguments)},initialize:function(){this.template=this.initTemplate(this.template)},initTemplate:function(a){if("string"==typeof a){if("text!"===a.slice(0,"text!".length))throw"Don't include text! in template path";a.match(this.pathRegex)&&(a=require("text!"+a)),a=d.compile(a)}return a},beforeRender:function(){},render:function(){return!this.deferRender||this.shown?(this.beforeRender(),this.trigger("beforeRender",this),this.onRender(),this.hideLoadingAnimation(),this.isRendered=!0,this.trigger("afterRender",this),this):void 0},getTemplateData:function(){return{}},onRender:function(){if(this.template){var b=this.getTemplateData();a(this.el).html(this.template(b))}},update:function(){this.render()},remove:function(){return c.View.prototype.remove.apply(this,arguments),this.hideLoadingAnimation(),this},onShow:function(){this.shown=!0,this.deferRender&&!this.isRendered&&this.render(),this.delegateEvents()},onHide:function(){this.shown&&(this.undelegateEvents(),this.shown=!1),this.hideLoadingAnimation()},onLinkClick:function(b){var c=a(b.target).closest("a");if(!c.hasClass("outlink")){b.preventDefault(),b.stopPropagation();var d=c.prop("pathname")+c.prop("search");window.router.navigateWithQueryParams(d,{trigger:!0})}},onAnchorClick:function(b){b.preventDefault();var c=a(b.target).closest("a"),d=c.attr("href");a("#page").animate({scrollTop:a(d).offset().top-50},400)},callOrRecurse:function(a,b){return this[a]?this[a].apply(this,b):!0},showLoadingAnimation:function(){var b={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},c=a(this.el).offset();this.loader||(this.loader=a('<div class="loader"> <div class="spinner-box"></div> </div>'),a("body").append(this.loader),this.spinner=new e(b)),this.spinner.spin(a(".spinner-box",this.loader)[0]),this.loader.css({left:c.left,top:c.top,width:a(this.el).width(),height:a(this.el).height()}),this.loader.show(),this.spinner.spin(a(".spinner-box",this.loader)[0]),this.isLoading=!0},hideLoadingAnimation:function(){this.loader&&this.loader.fadeOut("fast",function(){this.spinner.stop()}.bind(this)),this.isLoading=!1}})}),define("view/ContainerView",["jquery","underscore","backbone","handlebars","PlumageRoot","view/View"],function(a,b,c,d,e,f){return e.view.ContainerView=f.extend({subViews:[],rootModelCls:void 0,initialize:function(){f.prototype.initialize.apply(this,arguments)},getSubView:function(a){var b=this.doGetSubView(a);return b||console.warn("Failed getting subview with name: "+a),b},doGetSubView:function(a){var c="string"==typeof a?a.split("."):a;if(!c)return void 0;var d=b.findWhere(this.subViews,{name:c[0]});return c.shift(),d&&c.length&&(d=d.doGetSubView(c)),d},beforeRender:function(){this.eachSubView(function(a){a.isRendered&&a.$el.detach()})},render:function(){return!this.deferRender||this.shown?(this.beforeRender(),this.trigger("beforeRender",this),this.onRender(),this.renderSubViews(),this.isRendered=!0,this.trigger("afterRender",this),this):void 0},onRender:function(){f.prototype.onRender.apply(this,arguments)},renderSubViews:function(){var a=this;this.eachSubView(function(b){if(b.replaceEl)b.setElement(a.$(b.selector)[0]),b.className&&b.$el.addClass(b.className),b.render();else{var c=a.$el;b.selector&&(c=a.$(b.selector)),b.render(),b.el&&c.append(b.el)}})},remove:function(){return f.prototype.remove.apply(this,arguments),this},hideLoadingAnimation:function(){f.prototype.hideLoadingAnimation.apply(this,arguments)},onShow:function(){f.prototype.onShow.apply(this,arguments),this.eachSubView(function(a){a.onShow()})},onHide:function(){f.prototype.onHide.apply(this,arguments),this.eachSubView(function(a){a.onHide()})},onLinkClick:function(){f.prototype.onLinkClick.apply(this,arguments)},eachSubView:function(a,c){b.each(this.subViews,function(b){c?a.call(c,b):a(b)},this)},callOrRecurse:function(a,b){if(this[a])return this[a].apply(this,b);var c=!0;return this.eachSubView(function(d){c=d.callOrRecurse(a,b)&&c}),c}})}),define("ViewBuilder",["jquery","underscore","backbone","PlumageRoot","view/View"],function(a,b,c,d,e){var f=function(){this.initialize.apply(this,arguments)};return b.extend(f.prototype,{defaultViewCls:void 0,defaultViewOptions:void 0,initialize:function(a){a=a||{},b.extend(this,a),this.defaultViewCls=this.defaultViewCls||"view/ModelView","string"==typeof this.defaultViewCls&&(this.defaultViewCls=require(this.defaultViewCls))},buildView:function(a){if(a instanceof e)return a;a=b.extend({},this.defaultViewOptions,a);var c=a.viewCls||this.defaultViewCls;return delete a.viewCls,"string"==typeof c&&(c=require(c)),new c(a)}}),d.ViewBuilder=f}),define("text!view/templates/LoadError.html",[],function(){return'\n<div class="load-error {{#message}}with-message{{/message}}">\n  <div class="error-icon">&times;</div>\n  <div class="error-text">\n    <div>Error loading resource</div>\n    {{#message}}\n      <div class="message">{{.}}</div>\n    {{/message}}\n  </div>\n</div>'}),define("view/ModelView",["jquery","underscore","backbone","handlebars","PlumageRoot","view/ContainerView","util/ModelUtil","ViewBuilder","text!view/templates/LoadError.html"],function(a,b,c,d,e,f,g,h,i){return e.view.ModelView=f.extend({modelCls:void 0,relationship:void 0,renderOnChange:void 0,renderOnLoad:void 0,defaultSubViewCls:void 0,defaultSubViewOptions:void 0,initialize:function(){if(f.prototype.initialize.apply(this,arguments),this.buildSubViews(),this.model)throw"Do not pass model into constructor. call setModel"},buildSubViews:function(){var c=new h({defaultViewCls:this.defaultSubViewCls,defaultViewOptions:this.defaultSubViewOptions});this.subViews=a.isArray(this.subViews)?this.subViews:[this.subViews],this.subViews=b.map(this.subViews,function(a){return c.buildView(a)})},getModelFromRoot:function(a,b,c){return b?a?"."===a.slice(0,1)?c?c.getRelated(a.slice(1)):void 0:b.getRelated(a):b:void 0},setModel:function(a,b,c){if(!c){if(this.rootModelCls&&a){var d=requirejs(this.rootModelCls);if(!(a instanceof d))return}this.rootModel=a}var e=this.getModelFromRoot(this.relationship,a,b),f=!0;if(!c&&void 0!==this.modelCls){if(this.modelCls===!1)return;if(e&&!(e instanceof g.loadClass(this.modelCls)))return}e&&this.model&&void 0!==e.id&&void 0!==this.model.id&&e.id===this.model.id&&(f=!1),this.model&&this.model.off(null,null,this),this.model=e,this.model&&(this.model.on("beginLoad",this.onModelBeginLoad,this),this.model.on("change",this.onModelChange,this),this.model.on("load",this.onModelLoad,this),this.model.on("add",this.onModelAdd,this),this.model.on("remove",this.onModelRemove,this),this.model.on("destroy",this.onModelDestroy,this),this.model.on("invalid",this.onModelInvalid,this),this.model.on("error",this.onModelError,this)),f&&this.model&&this.model.fetched&&this.onModelLoad(),this.shown&&this.ensureData(),this.eachSubView(function(b){b.callOrRecurse("setModel",[a,this.model])}.bind(this))},ensureData:function(){this.model&&this.model.deferLoad&&!this.model.fetched&&this.model.fetchIfAvailable()},getTemplateData:function(){var a={};return this.model&&(a=this.model.toViewJSON(),this.model.hasUrl()&&!a.model_url&&(a.model_url=this.model.urlWithParams())),a},updateModel:function(a){var b=!0;return this.eachSubView(function(c){b=c.callOrRecurse("updateModel",[a,this.model])&&b}),b},isValid:function(a){var b=!0;return this.eachSubView(function(c){b=c.callOrRecurse("isValid",[a,this.model])&&b}),b},updateViewState:function(){},hideLoadingAnimation:function(){f.prototype.hideLoadingAnimation.apply(this,arguments)},shouldRender:function(a){var b=this.subViews.length>0,c=a?this.renderOnLoad:this.renderOnChange;return void 0!==c&&c||void 0===c&&!b},update:function(a){this.isRendered&&this.shouldRender(a)&&this.render()},onModelBeginLoad:function(){this.loading=!0},onModelChange:function(){this.update(!1)},onModelLoad:function(a){this.loading=!1,this.updateViewState(a),this.update(!0),this.hideLoadingAnimation()},onModelAdd:function(a,b){this.onModelChange(a,b)},onModelRemove:function(a,b){this.onModelChange(a,b)},onModelDestroy:function(){},onModelInvalid:function(){},onModelError:function(b,c,e){a(this.el).html(d.compile(i)(e.data)),this.isRendered=!1},remove:function(){return f.prototype.remove.apply(this,arguments),this.model&&this.model.off(null,null,this),this},onShow:function(){f.prototype.onShow.apply(this,arguments),this.ensureData()},onHide:function(){f.prototype.onHide.apply(this,arguments)},onLinkClick:function(b){var c=a(b.target).closest("a");if(!c.hasClass("outlink"))if("?"===c.attr("href")[0]){b.preventDefault(),b.stopPropagation();var d=g.parseQueryString(c.attr("href").slice(1));this.model.set(d),this.model.updateUrl({replace:!1})}else f.prototype.onLinkClick.apply(this,arguments)},delegateEvents:function(){c.View.prototype.delegateEvents.apply(this,arguments)},undelegateEvents:function(){c.View.prototype.undelegateEvents.apply(this,arguments)}})}),define("view/CollectionView",["jquery","underscore","backbone","handlebars","PlumageRoot","view/ModelView"],function(a,b,c,d,e,f){return e.view.CollectionView=f.extend({className:"collection-view",itemViewCls:void 0,itemOptions:{},template:'<ul class="items"></ul>{{#moreUrl}}<a class="more-link" href="{{.}}">more</a>{{/moreUrl}}',emptyTemplate:"No items",moreUrl:void 0,renderOnChange:!1,initialize:function(a){f.prototype.initialize.apply(this,arguments),a=a||{},"string"==typeof this.emptyTemplate&&(this.emptyTemplate=d.compile(this.emptyTemplate)),"string"==typeof this.itemViewCls&&(this.itemViewCls=requirejs(this.itemViewCls)),this.itemViews=[]},getTemplateData:function(){var b;this.moreUrl&&this.model&&this.model.hasMore()&&(b=a.isFunction(this.moreUrl)?this.moreUrl(this.model):this.moreUrl);var c={size:this.model&&this.model.fetched?this.model.size():"",moreUrl:b};return c},getItemsEl:function(){return this.template?this.$(".items"):this.$el},onRender:function(){this.template&&this.$el.html(this.template(this.getTemplateData()));var a=this.getItemsEl();a.empty();var c=this.itemViews||[];this.itemViews=[],this.model&&this.model.size()&&this.model.forEach(function(b,d){var e=c.pop()||this.renderItem();e.setModel(b),e.index=d,e.render(),a.append(e.el),this.shown&&e.onShow(),this.itemViews.push(e)},this),this.updateEmpty(),b.each(c,function(a){a.remove()},this),this.hideLoadingAnimation()},update:function(){f.prototype.update.apply(this,arguments)},updateModel:function(a,b){f.prototype.updateModel.apply(this,arguments);var c=this.getModelFromRoot(this.relationship,a,b);c&&c.each(function(a,b){b<this.itemViews.length&&this.itemViews[b].updateModel(a)}.bind(this))},renderItem:function(){var a=new this.itemViewCls(this.itemOptions);return a.on("afterRender",this.onItemRender.bind(this)),a},updateEmpty:function(){(!this.model||this.model.fetched&&0===this.model.size())&&void 0!==this.emptyTemplate&&this.getItemsEl().html(this.emptyTemplate())},getItemView:function(a){for(var b=0;b<this.itemViews.length;b++){var c=this.itemViews[b];if(c.model.id===a)return c}},onModelAdd:function(){this.isRendered&&this.update(!0)},onModelRemove:function(){this.isRendered&&this.update(!0)},onModelLoad:function(){f.prototype.onModelLoad.apply(this,arguments)},onModelDestroy:function(a){for(var b=0;b<this.itemViews.length;b++){var c=this.itemViews[b];if(c.model.id===a.id){c.remove();break}}this.updateEmpty()},onShow:function(){f.prototype.onShow.apply(this,arguments),this.eachItemView(function(a){a.onShow()})},onHide:function(){f.prototype.onHide.apply(this,arguments),this.eachItemView(function(a){a.onHide()})},eachItemView:function(a,c){this.itemViews&&b.each(this.itemViews,function(b){c?a.call(c,b):a(b)},this)},onDoneLoad:function(){this.hideLoadingAnimation()},onModelBeginLoad:function(){this.showLoadingAnimation()},onItemRender:function(a){this.trigger("itemRender",this,a)}})}),define("view/form/Form",["jquery","backbone","underscore","PlumageRoot","view/ModelView","util/ModelUtil"],function(a,b,c,d,e,f){return d.view.form.Form=e.extend({tagName:"form",template:'<div class="fields"></div><input type="submit" value="{{actionLabel}}"/>',actionLabel:"Submit",updateModelOnChange:!1,events:{submit:"onSubmit",change:"onChange"},initialize:function(){e.prototype.initialize.apply(this,arguments)},getTemplateData:function(){var a=e.prototype.getTemplateData.apply(this,arguments);return c.extend(a,{actionLabel:this.getActionLabel()})},getActionLabel:function(){return this.actionLabel?this.actionLabel:"Submit"},setMessage:function(a,b){var c=this.getSubView("message");c&&c.setMessage(a,b)},submit:function(){if(!this.model){var a=f.loadClass(this.modelCls);this.model=new a}if(this.isValid()){this.updateModel(this.rootModel);var b;this.model.validate&&(b=this.model.validate(this.model.attributes)),b||this.model.save(null,{success:this.onSaveSuccess.bind(this)})}},onChange:function(a){this.updateModelOnChange&&this.onSubmit(a),this.trigger("change",this,a)},onSubmit:function(a){a.preventDefault(),this.submit()},onSaveSuccess:function(a,b){b.meta.success?this.trigger("save",this,a):b.meta.message_body&&this.setMessage(b.meta.message_body,b.meta.message_class)},onModelInvalid:function(a,b,c,d){c&&this.setMessage(c,d)}})}),define("text!view/form/fields/templates/Field.html",[],function(){return'{{#if label}}\n<div class="control-group {{#if validationState}}{{validationState}}{{/if}}">\n  <label class="control-label" for="{{valueAttr}}">{{label}}</label>\n  <div class="controls">\n    <span class="field">{{> field}}</span>\n    <span class="help-inline">{{#if message}}{{message}}{{/if}}</span>\n  </div>\n</div>\n{{else}}\n  {{> field}}\n{{/if}}'}),define("view/form/fields/Field",["jquery","underscore","backbone","handlebars","PlumageRoot","view/ModelView","text!view/form/fields/templates/Field.html"],function(a,b,c,d,e,f,g){return e.view.form.fields.Field=f.extend({template:g,fieldTemplate:'<input type="text" name="{{valueAttr}}" {{#placeholder}}placeholder="{{.}}"{{/placeholder}} value="{{value}}" {{#readonly}}readonly="readonly"{{/readonly}}/>',labelAttr:void 0,label:void 0,valueAttr:void 0,fieldName:void 0,updateModelOnChange:!1,value:"",placeholder:void 0,validationRules:void 0,validationMessages:{required:"required",minLength:"Must be at least {{param0}} chars",maxLength:"Must not be more than {{param0}} chars",email:"Not a valid email address"},validationState:void 0,message:void 0,initialize:function(){f.prototype.initialize.apply(this,arguments),this.className=this.className?this.className+" field":"field"},onRender:function(){var a=this.getInputEl(),b=a?a.is(":focus"):!1;d.registerPartial("field",this.fieldTemplate),f.prototype.onRender.apply(this,arguments),a=this.getInputEl(),a&&b&&a.focus()},update:function(){if(this.isRendered){var a=this.getInputEl().val(),b=this.getValueString(this.getValue());a!==b&&this.getInputEl().val(b)}else this.render()},delegateEvents:function(a){a=a||b.result(this,"events");var d=this.getInputSelector();d&&(a=b.clone(a||{}),a["blur "+d]="onBlur",a["focus "+d]="onFocus",a["submit "+d]="onSubmit",a["change "+d]="onChange",a["input "+d]="onInput",a["keydown "+d]="onKeyDown",a["mouseup "+d]="onChange"),c.View.prototype.delegateEvents.apply(this,[a])},undelegateEvents:function(){c.View.prototype.undelegateEvents.apply(this,arguments);var a=this.getInputEl();a&&a.off(".field")},getInputSelector:function(){return this.$el.is(":input")?"":":input:first"},getInputEl:function(){var a=this.getInputSelector();return a?this.$(a).first():this.$el},hasValue:function(){var a=this.getValue();return null!==a&&void 0!==a&&""!==a},focus:function(){this.getInputEl().focus()},getTemplateData:function(){var a={label:this.getLabel(),valueAttr:this.valueAttr,value:this.getValueString(this.getValue()),hasValue:this.hasValue(),placeholder:this.placeholder,readonly:this.readonly,validationState:this.validationState,message:this.message};return a},setModel:function(){f.prototype.setModel.apply(this,arguments),this.setValidationState(null,null),this.updateValueFromModel()},ensureData:function(){f.prototype.ensureData.apply(this,arguments)},getValue:function(){return this.value},getValueString:function(a){return a},setValue:function(a,b){b=b||{},this.getValue()!==a&&(this.value=a,this.updateModelOnChange&&this.model?this.updateModel(this.rootModel):this.update(),this.valueChanged(),b.silent||(this.changing=!0,this.trigger("change",this,this.getValue()),this.triggerChange(),this.changing=!1))},getLabel:function(){return this.labelAttr?this.model?this.model.get(this.labelAttr):null:this.label},blur:function(){this.$el.blur()},onShow:function(){f.prototype.onShow.apply(this,arguments)},validators:{required:function(a){return void 0!==a&&""!==a},minLength:function(a,b){return a.length>=b},maxLength:function(a,b){return a.length<=b},email:function(a){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)}},setValidationState:function(a,b){this.validationState=a,this.message=b,this.$(".control-group").attr("class","control-group"),this.validationState&&this.$(".control-group").addClass(this.validationState),this.$(".help-inline").html(this.message)},validate:function(){var c=this.getValue(),d=this.validationRules;if(d){if(!a.isPlainObject(d)){var e={};e[d]=!0,d=e}var f;return d.required&&(f=this.applyValidator(c,d.required,"required")),f&&b.keys(d).every(function(a){return"required"===a?!0:f=this.applyValidator(c,d[a],a)}.bind(this)),f&&this.setValidationState(null,null),f}return!0},applyValidator:function(b,c,d){c=a.isArray(c)?c:[c];var e=this.validators[d];if(!e(b,c)){var f=this.getValidationMessage(d,c);return this.setValidationState("error",f),!1}return!0},getValidationMessage:function(a,c){var e=this.validationMessages[a]||"invalid";return d.compile(e)(b.object(b.map(c,function(a,b){return["param"+b,a]})))},isValid:function(){return this.validate()},updateModel:function(a,b){var c=this.getModelFromRoot(this.relationship,a,b),d=this.getValue();return c.set(this.valueAttr,d)!==!1},updateValueFromModel:function(){this.value="",this.model&&(this.value=this.getValueFromModel(),this.valueChanged(),this.isRendered&&this.update())},getValueFromModel:function(){if(this.model){var a=this.model.get(this.valueAttr);return void 0===a?"":a}},getValueFromDom:function(){var a=this.getInputEl();return a&&a.val?a.val():void 0},processDomValue:function(a){return a},triggerChange:function(){var a=this.getInputEl();a.is(":focus")?(a.blur(),a.focus()):a.change()},isDomValueValid:function(){return!0},updateValueFromDom:function(){var a=this.getValueFromDom();this.isDomValueValid(a)?(a=this.processDomValue(a),this.changing||this.setValue(a,{silent:!0}),this.trigger("change",this,this.getValue())):this.update()},valueChanged:function(){},onChange:function(){this.updateValueFromDom()},onInput:function(){this.updateValueFromDom()},onKeyDown:function(){},onBlur:function(){this.validate(),this.trigger("blur",this)},onFocus:function(){},onSubmit:function(){this.trigger("submit",this)},onModelChange:function(a){void 0!==a.changed[this.valueAttr]&&this.updateValueFromModel()},onModelLoad:function(){this.setValidationState(null,null),this.updateValueFromModel()},onModelInvalid:function(b,c){if(c){var d=c[this.valueAttr];d&&(a.isArray(d)&&(d=d[0]),this.setValidationState("error",d))}}})}),define("view/form/fields/TextArea",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/Field"],function(a,b,c,d,e){return d.view.form.fields.TextArea=e.extend({template:c.compile('<textarea {{#fieldName}}name="{{fieldName}}"{{/fieldName}}>{{value}}</textarea>'),update:function(){return this.$("textarea").val(this.getValue())}})}),define("view/comment/CommentForm",["jquery","backbone","handlebars","PlumageRoot","view/form/Form","view/form/fields/TextArea","model/Comment"],function(a,b,c,d,e,f){return d.view.comment.CommentForm=e.extend({modelCls:"model/Comment",actionLabel:"Comment",initialize:function(a){e.prototype.initialize.apply(this,arguments),a=a||{},this.subViews=[new f({selector:".fields",valueAttr:"body"})]}})}),define("text!view/comment/templates/CommentsSection.html",[],function(){return'{{#expandable}}\n<a href="#" class="comments-toggle">{{label}}</a>\n{{/expandable}}\n{{^expandable}}\n{{#title}}\n<h4>{{.}}</h4>\n{{/title}}\n{{/expandable}}\n\n<div class="comments-wrap{{^expanded}} hidden{{/expanded}}">\n  <div class="comments">\n  </div>\n\n  <div class="comment-form">\n  </div>\n  <div class="clear"></div>\n</div>'
}),define("text!view/comment/templates/CommentView.html",[],function(){return'<h5 class="item-author-header">\n  <img class="avatar" src="{{ user.image_thumb }}" />\n  <span class="name">{{user.first_name}} {{user.last_name}}</span>\n  <span class="screenname muted"> @{{user.screenname}}</span>\n  <span class="timestamp">&mdash; {{created_at}}</span>\n</h5>\n<div class="comment-text">\n  {{#can_delete}}\n    <a class=\'btn btn-mini btn-danger pull-right delete\'>Delete</a>\n  {{/can_delete}}\n  <p class="comment-body">\n  {{{body}}}\n  </p>\n</div>\n'}),function(a){a.fn.linkify=function(){return this.each(function(){var b=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/,c=function(a){return"<a href='"+(-1===a.indexOf("://")?"http://":"")+a+"'>"+a+"</a>"};recursiveLinkify(a(this),b,c);var d=/\b[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/gi,e=function(a){return"<a href='mailto:"+a+"'>"+a+"</a>"};recursiveLinkify(a(this),d,e)})}}(jQuery),define("linkify",function(){}),define("view/comment/CommentView",["jquery","backbone","handlebars","moment","PlumageRoot","view/ModelView","text!view/comment/templates/CommentView.html","linkify"],function(a,b,c,d,e,f,g){return e.view.comment.CommentView=f.extend({className:"comment",modelCls:"model/Comment",template:c.compile(g),events:{"click .delete":"onDeleteClick"},getTemplateData:function(){if(this.model){var a=this.model.toViewJSON();return a.body=a.body.replace(/\n/g,"<br/>"),a.created_at=d(a.created_at).fromNow(),a.can_delete=a.user.account===window.currentUser,a}return{}},onRender:function(){f.prototype.onRender.apply(this,arguments);var b=this.$(".comment-body");b.linkify(),a("a",b).addClass("outlink").attr("target","_")},onDeleteClick:function(a){a.preventDefault();this.model.collection;this.model.destroy()}})}),define("view/comment/CommentsSection",["jquery","backbone","handlebars","PlumageRoot","view/ModelView","view/comment/CommentForm","model/Comment","view/CollectionView","text!view/comment/templates/CommentsSection.html","view/comment/CommentView"],function(a,b,c,d,e,f,g,h,i){return d.view.comment.CommentsSection=e.extend({expandable:!1,expanded:!1,template:c.compile(i),title:"Comments",events:{"click .comments-toggle":"onClickToggle"},getTemplateData:function(){var a="No Comments";if(this.model){var b=this.model.getRelated("comments"),c=b?b.size():0;1===c?a="1 Comment":c>1&&(a=c+" Comments")}return{title:this.title,expandable:this.expandable,expanded:this.expandable?this.expanded:!0,label:a}},initialize:function(a){e.prototype.initialize.apply(this,arguments),a=a||{};var b;this.expandable||(b='<div class="comment no-comments">No comments yet. Leave the first one.</div>'),(!this.expandable||this.expanded)&&this.initSubViews()},initSubViews:function(){var a;this.expandable||(a='<div class="comment no-comments">No comments yet. Leave the first one.</div>'),this.subViews=[this.commentsView=new h({selector:".comments",itemViewCls:"view/comment/CommentView",relationship:"comments",emptyTemplate:a}),this.commentForm=new f({selector:".comment-form"})],this.commentForm.on("save",this.onCommentFormSave.bind(this)),this.model&&(this.commentsView.setModel(this.model),this.resetCommentForm())},setModel:function(){e.prototype.setModel.apply(this,arguments),this.resetCommentForm()},getCommentableId:function(a){return a?a.id:void 0},getSubject:function(){return void 0},onModelLoad:function(){this.resetCommentForm()},onCommentFormSave:function(a,b){this.getSubject&&b.set("subject",this.getSubject(b)),this.resetCommentForm(),this.model.getRelated("comments").add(b),this.render()},onClickToggle:function(a){a.preventDefault(),this.commentsView?this.toggleComments():(this.initSubViews(),setTimeout(function(){this.render(),this.toggleComments()}.bind(this),0))},toggleComments:function(){this.$(".comments-wrap").animate({height:"toggle"},200),this.expanded=!this.expanded},resetCommentForm:function(){this.commentForm&&this.commentForm.setModel(new g({commentable_type:this.model.commentableType,commentable_url:this.model.url(),body:"",subject:this.getSubject(this.model)}))}})}),define("text!view/comment/templates/ExpandableComments.html",[],function(){return'<a class="comments-action" href="#">{{actionLabel}}</a>\n<div class="floater-wrapper comment-wrapper hidden">\n  <a href="#" class="close comment-close">&times;</a>\n  <div class="comments">\n    {{#each comments}}\n    <div class="comment">\n	    <h5 class="item-author-header">\n		    <img class="avatar" src="{{user.image_thumb}}" />\n		    <span class="name">{{user.first_name}} {{user.last_name}}</span>\n		    <span class="screenname muted"> @{{user.screenname}}</span>\n		    <span class="timestamp">{{created_at}}</span>\n		  </h5>\n			<p class="comment-text">\n			  {{body}}\n			</p>\n    </div>\n    {{/each}}\n  </div>\n\n  <form accept-charset="UTF-8" action="/create_question" method="post">\n    <input id="id" name="id" type="hidden" value="649">\n    <textarea class="comment-text" id="comment_649" name="content"></textarea>\n    <input class="btn comment_submit_button" name="commit" type="submit" value="Comment">\n  </form>\n</div>\n'}),define("view/comment/ExpandableComments",["jquery","backbone","handlebars","PlumageRoot","view/ModelView","text!view/comment/templates/ExpandableComments.html","view/comment/CommentView"],function(a,b,c,d,e,f){return d.view.comment.ExpandableComments=e.extend({template:c.compile(f),itemViewCls:"view/comment/CommentView",events:{"click .comments-action":"onActionClick"},getTemplateData:function(){return{comments:e.prototype.getTemplateData.apply(this,arguments),actionLabel:this.getActionLabel()}},getActionLabel:function(){var a=this.model.size();return 0===a?"comment":1===a?"1 comment":this.model.size()+" comments"},onActionClick:function(){var a=this.$(".comment-wrapper");a.hasClass("hidden")?(a.removeClass("hidden"),a.find(".comment-text").focus(),window.setTimeout(function(){a.addClass("open")},50)):(a.removeClass("open"),window.setTimeout(function(){a.addClass("hidden")},200))}})}),define("view/controller/IndexView",["jquery","underscore","backbone","PlumageRoot","view/ModelView"],function(a,b,c,d,e){return d.view.controller.IndexView=e.extend({className:"content container-fluid index-view",template:'<div class="filter-view"></div><div class="grid-view"></div>',gridViewCls:void 0,filterViewCls:void 0,gridOptions:void 0,initialize:function(){e.prototype.initialize.apply(this,arguments),"string"==typeof this.gridViewCls&&(this.gridViewCls=require(this.gridViewCls)),"string"==typeof this.filterViewCls&&(this.filterViewCls=require(this.filterViewCls)),this.subViews=this.subViews||[];var a=this.getGridView();a&&(this.subViews.push(a),a.on("itemSelected",function(a){this.trigger("itemSelected",a)}.bind(this)));var b=this.getFilterView();b&&this.subViews.push(b)},getGridView:function(){return!this.gridView&&this.gridViewCls&&(this.gridView=new this.gridViewCls(b.extend({selector:".grid-view",filterView:this.getFilterView()},this.gridOptions||{}))),this.gridView},getFilterView:function(){return!this.filterView&&this.filterViewCls&&(this.filterView=new this.filterViewCls({selector:".filter-view"})),this.filterView},onRender:function(){a(this.el).html(this.template())},update:function(){},onModelChange:function(){}})}),define("text!view/form/fields/templates/Select.html",[],function(){return'<select name="{{valueAttr}}">\n{{#if noSelectionText}}\n<option value="{{noSelectionValue}}" {{^hasSelection}}selected="true"{{/hasSelection}}>{{noSelectionText}}</option>\n{{/if}}\n\n{{#listValues}}\n<option value="{{value}}" class="{{value}}" {{#selected}}selected{{/selected}}>{{label}}</option>\n{{/listValues}}\n</select>'}),define("view/form/fields/Select",["jquery","underscore","backbone","handlebars","PlumageRoot","view/ModelView","view/form/fields/Field","text!view/form/fields/templates/Select.html"],function(a,b,c,d,e,f,g,h){return e.view.form.fields.Select=g.extend({listValues:void 0,listModel:void 0,listRelationship:void 0,listValueAttr:void 0,listLabelAttr:void 0,noSelectionText:void 0,noSelectionValue:"",noItemsText:"No Items",fieldTemplate:h,defaultToFirst:!1,initialize:function(){g.prototype.initialize.apply(this,arguments),this.updateDefault()},onRender:function(){g.prototype.onRender.apply(this,arguments)},update:function(){f.prototype.update.apply(this,arguments)},getTemplateData:function(){var a=g.prototype.getTemplateData.apply(this,arguments);return b.extend(a,{valueLabel:this.getValueLabel(a.value),noSelectionValue:this.noSelectionValue,noSelectionText:this.noSelectionText,noItemsText:this.noItemsText,hasSelection:this.hasSelection(),defaultToFirst:this.defaultToFirst,listValues:this.getListValues(this.model)}),a},getListValues:function(){return this.listModel?this.listModel.map(function(a){return this.getItemData(a)},this):this.listValues},getValueLabel:function(a){var b,c=this.getListValues(this.model);if(c)for(b=0;b<c.length;b++)if(c[b].value===a)return c[b].label},setValue:function(){g.prototype.setValue.apply(this,arguments)},onShow:function(){g.prototype.onShow.apply(this,arguments),this.ensureListData()},ensureListData:function(){this.listModel&&this.listModel.deferLoad&&!this.listModel.fetched&&this.listModel.fetchIfAvailable()},getItemData:function(a){var b={value:this.getListItemValue(a),label:this.getListItemLabel(a)};return b.selected=this.isValueSelected(b.value),b},isValueSelected:function(a){return a===this.getValue()},getListItemValue:function(a){return a.get(this.listValueAttr)},getListItemLabel:function(a){return a.get(this.listLabelAttr)},hasSelection:function(){var a=this.getValue();return null!==a&&void 0!==a&&a!==this.noSelectionValue},updateDefault:function(){var a=this.getListValues(this.model);!this.hasSelection()&&this.defaultToFirst&&a&&a.length&&this.setValue(a[0].value,{silent:!0})},setModel:function(a,b){if(g.prototype.setModel.apply(this,arguments),this.listRelationship){var c=this.getModelFromRoot(this.listRelationship,a,b);c&&(this.setListModel(c),this.shown&&this.ensureListData())}this.updateDefault()},setListModel:function(a){this.listModel&&this.listModel.off(null,null,this),this.listModel=a,this.listModel&&(this.listModel.on("change",this.onListModelChange,this),this.listModel.on("load",this.onListModelLoad,this),this.listModel.on("destroy",this.onListModelDestroy,this),this.listModel.on("error",this.onListModelError,this)),this.listModel.size()&&this.onListModelLoad(this.listModel)},getListItemForValue:function(a){var b=this.listModel.select(function(b){return this.getListItemValue(b)===a}.bind(this));return b&&b[0]},onListModelChange:function(){this.update()},onListModelLoad:function(){""===this.getValue()&&this.defaultToFirst&&this.listModel.size()>0?this.setValue(this.getListItemValue(this.listModel.at(0))):this.update()},onListModelDestroy:function(){},onListModelError:function(a,b,c){this.onModelError(a,b,c)}})}),define("text!view/form/fields/templates/CategorySelect.html",[],function(){return'<input type="hidden" {{#fieldName}}name="{{fieldName}}"{{/fieldName}} value="{{value}}">\n<ul class="nav nav-pills">\n{{#if noSelectionText}}\n<li data-category="" {{^hasSelection}}class="active"{{/hasSelection}}>\n  <a href="{{noSelectionValue}}">\n    {{noSelectionText}}\n  </a>\n</li>\n{{/if}}\n\n{{#listValues}}\n  <li data-value="{{value}}" class="{{value}}{{#selected}} active{{/selected}}"><a href="#">{{label}}</a></li>\n{{/listValues}}\n</ul>'}),define("view/form/fields/CategorySelect",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/Select","text!view/form/fields/templates/CategorySelect.html"],function(a,b,c,d,e,f){return d.view.form.fields.CategorySelect=e.extend({className:"category-select field",template:c.compile(f),listValueAttr:"name",listLabelAttr:"label",modelAttr:"filter",itemTemplate:'<li data-value="{{value}}" class="{{value}}{{#selected}} active{{/selected}}"><a href="#">{{label}}</a></li>',noSelectionText:"All",noSelectionValue:"",events:{"click a":"onItemClick"},initialize:function(){e.prototype.initialize.apply(this,arguments)},setModel:function(){e.prototype.setModel.apply(this,arguments)},onListModelLoad:function(){this.render()},onItemClick:function(b){b.preventDefault();var c=a(b.target).closest("li"),d=c&&c.data("value");this.setValue(d)},getItemData:function(){return e.prototype.getItemData.apply(this,arguments)}})}),define("text!view/form/fields/templates/ButtonGroupSelect.html",[],function(){return'<input type="hidden" {{#fieldName}}name="{{fieldName}}"{{/fieldName}} value="{{value}}"/>\n<ul class="btn-group">\n{{#listValues}}\n  <li data-value="{{value}}" class="btn {{value}}{{#selected}} active{{/selected}}">{{label}}</li>\n{{/listValues}}\n</ul>\n'}),define("view/form/fields/ButtonGroupSelect",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/CategorySelect","text!view/form/fields/templates/ButtonGroupSelect.html"],function(a,b,c,d,e,f){return d.view.form.fields.ButtonGroupSelect=e.extend({className:"button-group-select",template:c.compile(f),events:{"click li":"onItemClick"},initialize:function(){e.prototype.initialize.apply(this,arguments),this.$el.data("toggle","buttons-radio")}})}),define("text!view/form/fields/templates/Calendar.html",[],function(){return'<table cellpadding="0" cellspacing="0">\n<thead>\n<tr>\n	{{#if showWeekNumbers}}\n	  <th></th>\n	{{/if}}\n	{{#if prevAvailable}}\n	  <th class="prev available"><i class="icon-arrow-left"></i></th>\n	{{else}}\n	  <th></th>\n	{{/if}}\n  <th colspan="5" style="width: auto">{{month}} {{year}}</th>\n  {{#if nextAvailable}}\n    <th class="next available"><i class="icon-arrow-right"></i></th>\n  {{else}}\n    <th></th>\n  {{/if}}\n</tr>\n<tr>\n	{{#if showWeekNumbers}}\n	  <th class="week">{{weekLabel}}</th>\n	{{/if}}\n	{{#each locale.daysOfWeek}}\n	  <th>{{.}}</th>\n	{{/each}}\n</tr>\n</thead>\n<tbody>\n{{#each calendar}}\n{{setIndex @index}}\n<tr>\n  {{#if showWeekNumbers}}\n    <td class="week">?</td>\n  {{/if}}\n  {{#each .}}\n    <td class="{{cls}}" data-row="{{../index}}" data-col="{{@index}}">\n	    <div class="day {{cname}}">{{number}}</div>\n	  </td>\n  {{/each}}\n</tr>\n{{/each}}\n\n</tbody>\n</table>'}),define("view/form/fields/Calendar",["jquery","underscore","backbone","handlebars","moment","PlumageRoot","view/form/fields/Field","util/DateTimeUtil","text!view/form/fields/templates/Calendar.html"],function(a,b,c,d,e,f,g,h,i){return f.view.form.fields.Calendar=g.extend({template:i,className:"calendar-view",month:void 0,year:void 0,minDateAttr:"minDate",minDate:void 0,maxDateAttr:"maxDate",maxDate:void 0,fromAttr:void 0,toAttr:void 0,showWeekNumbers:!1,utc:!1,locale:{weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:e()._lang._weekdaysMin.slice(),monthNames:e()._lang._monthsShort.slice(),firstDay:0},events:{"click .prev":"onPrevClick","click .next":"onNextClick","click .day":"onDayClick"},initialize:function(){g.prototype.initialize.apply(this,arguments);var a=this.utc?e.utc():e();this.month=void 0!==this.month?this.month:a.month(),this.year=this.year?this.year:a.year()},getTemplateData:function(){for(var a=(b.clone(this.locale),this.getCalendarDates(this.month,this.year)),c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.length;e++){var f=d[e];b.extend(f,{number:f.date[2],cls:this.getClassesForDate(f.date,c,e).join(" ")})}return{locale:this.locale,month:this.locale.monthNames[this.month],year:this.year,prevAvailable:this.isPrevMonthAvailable(),nextAvailable:this.isNextMonthAvailable(),showWeekNumbers:this.showWeekNumbers,calendar:a}},update:function(a){this.isRendered&&this.shouldRender(a)&&this.render()},getValueFromModel:function(){var b=g.prototype.getValueFromModel.apply(this,arguments);return a.isNumeric(b)?b:void 0},updateModel:function(a,b){var c=this.getModelFromRoot(this.relationship,a,b),d=this.getValue(),f=c.get(this.valueAttr);if(f){var g=this.utc?e.utc(f):e(f),h=this.getSelectedDate();g.year(h[0]),g.month(h[1]),g.date(h[2]),d=g.valueOf()}return c.set(this.valueAttr,d)},setMonth:function(a,b){this.month=a,this.year=b,this.update()},setValue:function(a){this.isDateInMinMax(this.toDateTuple(a))&&(g.prototype.setValue.apply(this,arguments),this.update())},valueChanged:function(){var a=this.getValue();if(a){var b=this.utc?e.utc(a):e(a);this.month=b.month(),this.year=b.year()}},getMinDate:function(){return this.minDate?this.minDate:this.model&&this.minDateAttr?this.toDateTuple(this.model.get(this.minDateAttr)):null},setMinDate:function(a){this.minDate=this.toDateTuple(a)},getMaxDate:function(){return this.maxDate?this.maxDate:this.model&&this.maxDateAttr?this.toDateTuple(this.model.get(this.maxDateAttr)):null},setMaxDate:function(a){this.maxDate=this.toDateTuple(a)},toDateTuple:function(b){if(!b)return null;if(b=h.parseRelativeDate(b),a.isArray(b))return b;var c=b;return c=a.isNumeric(c)&&this.utc?e.utc(c):e(c),[c.year(),c.month(),c.date()]},getSelectedDate:function(){var a=this.getValue();return a?this.toDateTuple(this.getValue()):null},getFromDate:function(){return this.model&&this.fromAttr?this.toDateTuple(this.model.get(this.fromAttr)):null},getToDate:function(){return this.model&&this.toAttr?this.toDateTuple(this.model.get(this.toAttr)):null},getCalendarDates:function(a,b){for(var c=[],d=this.getFirstDate(a,b),f=0;6>f;f++){for(var g=[],h=0;7>h;h++){g.push({date:d});var i=e(d).add("day",1);d=[i.year(),i.month(),i.date()]}c.push(g)}return c},getFirstDate:function(a,b){var c=e([b,a,1]),d=e(c).subtract("month",1),f=d.daysInMonth(),g=c.day(),h=f-g+this.locale.firstDay+1;return h>f&&(h-=7),g===this.locale.firstDay&&(h=f-6),[d.year(),d.month(),h]},getClassesForDate:function(a,c,d){var e=this.isDateTupleInMonth(a),f=[this.isDateInMinMax(a)?"active":"disabled",e?null:"off",b.isEqual(a,this.getSelectedDate())?"selected":null,e&&b.isEqual(a,this.getFromDate())?"start-date":null,e&&b.isEqual(a,this.getToDate())?"end-date":null,this.isDateInSelectedRange(a)?"in-range":null,this.getShadowClass(a,c,d)];return b.compact(f)},getShadowClass:function(a,b,c){if(!this.isDateTupleInMonth(a))if(2>b){var d=this.toDateTuple(e(a).add("day",7)),f=this.toDateTuple(e(a).add("day",1));if(this.isDateTupleInMonth(d))return 6>c&&this.isDateTupleInMonth(f)?"shadow-bottom-right":"shadow-bottom"}else{var g=this.toDateTuple(e(a).subtract("day",7)),h=this.toDateTuple(e(a).subtract("day",1));if(this.isDateTupleInMonth(g))return c>0&&this.isDateTupleInMonth(h)?"shadow-top-left":"shadow-top"}return null},isDateTupleInRange:function(a,b,c){return(!b||e(a)>=e(b))&&(!c||e(a)<=e(c))},isDateInSelectedRange:function(a){var b=this.getFromDate(),c=this.getToDate();return b&&c?this.isDateTupleInRange(a,b,c):!1},isDateInMinMax:function(a){return a=this.toDateTuple(a),this.isDateTupleInRange(a,this.getMinDate(),this.getMaxDate())},isDateTupleInMonth:function(a){return a[1]===this.month},isPrevMonthAvailable:function(){var a=e([this.year,this.month,1]).subtract("day",1);return this.isDateInMinMax(this.toDateTuple(a))},isNextMonthAvailable:function(){var a=e([this.year,this.month,1]),b=e([this.year,this.month,a.daysInMonth()]).add("day",1);return this.isDateInMinMax(this.toDateTuple(b))},getDateFromDayEl:function(b){b=a(b);var c=b.parent(),d=Number(b.text());if(c.hasClass("off")){var f=e([this.year,this.month,1]);return f=c.data("row")<3?f.subtract("month",1):f.add("month",1),this.toDateTuple(f.date(d))}return[this.year,this.month,d]},onModelChange:function(a){(void 0!==a.changed[this.valueAttr]||void 0!==a.changed[this.minDateAttr]||void 0!==a.changed[this.maxDateAttr])&&this.updateValueFromModel()},onPrevClick:function(a){a.preventDefault(),a.stopPropagation();var b=e([this.year,this.month,1]).subtract("month",1);this.setMonth(b.month(),b.year()),this.trigger("prevclick",this)},onNextClick:function(a){a.preventDefault(),a.stopPropagation();var b=e([this.year,this.month,1]).add("month",1);this.setMonth(b.month(),b.year()),this.trigger("nextclick",this)},onDayClick:function(b){b.preventDefault(),b.stopPropagation();var c=a(b.target).parent();if(!c.hasClass("disabled")){var d=this.getDateFromDayEl(b.target),f=this.utc?e.utc(d):e(d);this.setValue(f.valueOf())}}})}),define("text!view/form/fields/templates/Checkbox.html",[],function(){return'{{#if checkboxLabel}}\n<label class="{{cls}}">\n{{/if}}\n  <input type="checkbox" name="{{../fieldName}}" {{#selected}}checked="true"{{/selected}} value="true">\n{{#if checkboxLabel}}\n  <span>{{checkboxLabel}}</span>\n</label>\n{{/if}}\n'}),define("view/form/fields/Checkbox",["jquery","underscore","backbone","handlebars","PlumageRoot","view/form/fields/Field","text!view/form/fields/templates/Checkbox.html"],function(a,b,c,d,e,f,g){return e.view.form.fields.Checkbox=f.extend({fieldTemplate:g,checkboxLabel:"",getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);return a.checkboxLabel=this.checkboxLabel,this.getValue()&&(a.selected=!0),a},delegateEvents:function(a){a=a||b.result(this,"events");var d=this.getInputSelector();d&&(a=b.clone(a||{}),a["change "+d]="onChange"),c.View.prototype.delegateEvents.apply(this,[a])},getValueFromDom:function(){return this.$("input:checked").val()},processDomValue:function(a){return"true"===a?!0:!1},update:function(){this.rendered&&this.render()}})}),define("view/form/fields/picker/Picker",["jquery","underscore","backbone","PlumageRoot","view/ModelView"],function(a,b,c,d,e){return d.view.form.fields.picker.Picker=e.extend({modelCls:!1,className:"dropdown-menu",pickerModelAttr:"value",opens:"right",applyOnChange:!1,events:{mousedown:"onMouseDown"},defaultSubViewOptions:{updateModelOnChange:!0},initialize:function(a){this.defaultSubViewOptions={updateModelOnChange:!0,valueAttr:a.pickerModelAttr||this.pickerModelAttr},e.prototype.initialize.apply(this,arguments),this.setModel(new d.model.Model({},{urlRoot:"/"}),null,!0)},onModelChange:function(){e.prototype.onModelChange.apply(this,arguments),this.applyOnChange&&this.trigger("apply",this,this.model)},getValue:function(){return this.model.get(this.pickerModelAttr)},setValue:function(a){this.model.set(this.pickerModelAttr,a)},onRender:function(){e.prototype.onRender.apply(this,arguments),this.$el.addClass("opens"+this.opens)},getTemplateData:function(){return e.prototype.getTemplateData.apply(this,arguments)},update:function(){e.prototype.update.apply(this,arguments)},onMouseDown:function(a){a.preventDefault(),a.stopPropagation()},onKeyDown:function(a){13===a.keyCode?(a.preventDefault(),this.close(),this.updateValueFromDom()):27===a.keyCode&&(this.close(),this.update())}})}),define("text!view/form/fields/templates/FieldWithPicker.html",[],function(){return'{{#if label}}\n<div class="control-group">\n  <label class="control-label" for="{{valueAttr}}">{{label}}</label>\n  <div class="controls">\n    <span class="field">\n	    <span class="dropdown">\n	      {{> field}}\n	      <div class="picker"></div>\n	    </span>\n    </span>\n    <span class="help-inline">{{#if message}}{{message}}{{/if}}</span>\n  </div>\n</div>\n{{else}}\n<span class="field">\n<span class="dropdown picker-dropdown">\n  {{> field}}\n  <div class="picker"></div>\n</span>\n</span>\n{{/if}}\n'}),define("view/form/fields/FieldWithPicker",["jquery","underscore","backbone","handlebars","moment","PlumageRoot","view/form/fields/Field","view/form/fields/picker/Picker","text!view/form/fields/templates/FieldWithPicker.html"],function(a,b,c,d,e,f,g,h,i){return f.view.form.fields.FieldWithPicker=g.extend({template:i,pickerCls:h,pickerOptions:void 0,events:{"click input:first":"onInputClick","click button:first":"onButtonClick"},initialize:function(){this.subViews=this.subViews.concat([b.extend({viewCls:this.pickerCls,name:"picker",selector:".picker",replaceEl:!0},this.pickerOptions)]),g.prototype.initialize.apply(this,arguments);var a=this.getPicker();a.on("apply",this.onPickerApply,this),a.on("close",this.onPickerClose,this)},getPicker:function(){return this.getSubView("picker")},getInputSelector:function(){return"input:first"},valueChanged:function(){this.getPicker().setValue(this.getValue())},isOpen:function(){return this.$(".dropdown").hasClass("open")},toggle:function(){this.isOpen()?this.close():this.open()},open:function(){this.update(),this.$(".dropdown:first").addClass("open")},close:function(){this.$(".dropdown").removeClass("open")},processPickerValue:function(a){return a},updateValueFromModel:function(){g.prototype.updateValueFromModel.apply(this,arguments)},onChange:function(){},onModelChange:function(){g.prototype.onModelChange.apply(this,arguments)},onModelLoad:function(){this.updateValueFromModel()},onSubmit:function(){this.updateValueFromDom(),g.prototype.onSubmit.apply(this,arguments)},onInputClick:function(){this.open()},onButtonClick:function(a){a.preventDefault(),a.stopPropagation(),this.getInputEl().focus()},onFocus:function(){this.open()},onBlur:function(){this.close(),this.applying?this.applying=!1:this.updateValueFromDom(),this.trigger("blur",this)},onPickerApply:function(a){this.applying=!0,this.setValue(this.processPickerValue(a.getValue())),this.close()},onPickerClose:function(){this.close()}})}),define("text!view/form/fields/templates/DropdownSelect.html",[],function(){return'\n{{#if label}}\n<div class="control-group">\n  <label class="control-label" for="{{valueAttr}}">{{label}}</label>\n  <div class="controls">\n{{/if}}\n\n<span class="dropdown-select dropdown">\n<input type="hidden" {{#if fieldName}}name="{{fieldName}}"{{/if}} value="{{value}}"/>\n<a class="btn dropdown-toggle {{buttonCls}}" data-toggle="dropdown" href="#">\n  {{#iconCls}}\n    <i class="{{.}} icon-white"></i>\n  {{/iconCls}}\n  {{#if hasSelection}}\n    {{valueLabel}}\n  {{else}}\n    {{noSelectionText}}\n  {{/if}}\n  <span class="caret"></span>\n</a>\n<ul class="dropdown-menu opens{{opens}}">\n{{#listValues}}\n  <li data-value="{{value}}" class="{{value}}{{#selected}} active{{/selected}} {{#disabled}}disabled{{/disabled}} {{classes}}">\n    <a href="#">{{label}}</a>\n  </li>\n{{/listValues}}\n</ul>\n</span>\n\n{{#if label}}\n  </div>\n</div>\n{{/if}}'}),define("view/form/fields/DropdownSelect",["jquery","underscore","backbone","handlebars","PlumageRoot","view/form/fields/Select","text!view/form/fields/templates/DropdownSelect.html","bootstrap"],function(a,b,c,d,e,f,g){return e.view.form.fields.DropdownSelect=f.extend({template:g,modelAttr:"filter",noSelectionText:"Click to select",noSelectionValue:"",buttonCls:void 0,iconCls:void 0,opens:"right",preventFocus:!1,events:{"click li a":"onItemClick","click .dropdown-toggle":"onToggleClick"},initialize:function(){f.prototype.initialize.apply(this,arguments)},onRender:function(){f.prototype.onRender.apply(this,arguments)},getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);return a=b.extend(a,{buttonCls:this.buttonCls,iconCls:this.iconCls,opens:this.opens})},onToggleClick:function(a){this.preventFocus&&(a.preventDefault(),a.stopPropagation(),this.$(".dropdown").toggleClass("open"))},onItemClick:function(b){b.preventDefault(),b.stopPropagation();var c=a(b.target).closest("li"),d=c&&c.data("value");this.$el.removeClass("open"),this.setValue(d)}})}),define("view/form/fields/HourSelect",["jquery","underscore","backbone","handlebars","moment","PlumageRoot","view/form/fields/DropdownSelect","bootstrap"],function(a,b,c,d,e,f,g){return f.view.form.fields.HourSelect=g.extend({className:"hour-select",minDate:void 0,maxDate:void 0,minDateAttr:void 0,maxDateAttr:void 0,fromAttr:void 0,toAttr:void 0,hourFormat:"ha",utc:!1,initialize:function(){this.listValues=b.map(b.range(24),function(a){return{value:a,label:e({hour:a}).format(this.hourFormat)}}.bind(this)),g.prototype.initialize.apply(this,arguments)},getTemplateData:function(){var a=g.prototype.getTemplateData.apply(this,arguments);return b.each(a.listValues,function(a){a.classes=this.getClassesForHour(a.value).join(" ")},this),a},getValueFromModel:function(){if(this.model){var a=this.model.get(this.valueAttr);if(a>1e3){var b=this.utc?e.utc(a):e(a);a=b.hour()}return void 0===a?"":a}},updateModel:function(a,b){var c=this.getModelFromRoot(this.relationship,a,b),d=this.getValue(),f=c.get(this.valueAttr),g=this.utc?e.utc(f):e(f);return d=g.hour(d).valueOf(),c.set(this.valueAttr,d)},getMinDate:function(){return this.model&&this.minDateAttr?this.model.get(this.minDateAttr):this.minDate},setMinDate:function(a){this.minDate=a,this.update()},getMaxDate:function(){return this.model&&this.maxDateAttr?this.model.get(this.maxDateAttr):this.maxDate},setMaxDate:function(a){this.maxDate=a,this.update()},setValue:function(a){this.isHourInMinMax(a)&&g.prototype.setValue.apply(this,arguments)},getClassesForHour:function(a){var c=(this.getDate(a),[this.isHourInMinMax(a)?null:"disabled",a===this.getValue()?"selected":null,this.isHourInSelectedRange(a)?"in-range":null,this.isHourOtherSelection(a)?"other-selected":null]);return b.compact(c)},isHourInMinMax:function(a){if(!this.model)return!0;var b=this.getMinDate(),c=this.getMaxDate(),d=this.getDate(a);return(!b||d>=e(b))&&(!c||d<=e(c))},isHourInSelectedRange:function(a){if(!this.model||!this.fromAttr||!this.toAttr)return!1;var b=this.model.get(this.fromAttr),c=this.model.get(this.toAttr);if(!b||!c)return!1;var d=this.getDate(a);return d.valueOf()>=b&&d.valueOf()<=c},isHourOtherSelection:function(a){if(!this.model||!this.fromAttr||!this.toAttr||a===this.getValue())return!1;var b=this.model.get(this.fromAttr),c=this.model.get(this.toAttr);if(!b||!c)return!1;var d=this.getDate(a);return d.valueOf()===b||d.valueOf()===c},getDate:function(a){var b,c=this.model&&this.model.get(this.valueAttr);return b=void 0!==c?this.utc?e.utc(c):e(c):this.utc?e.utc():e(),b.hour(a)},onModelChange:function(a){(void 0!==a.changed[this.valueAttr]||void 0!==a.changed[this.minDateAttr]||void 0!==a.changed[this.maxDateAttr])&&this.updateValueFromModel()}})}),define("view/form/fields/DateField",["jquery","underscore","backbone","handlebars","moment","PlumageRoot","util/DateTimeUtil","view/form/fields/Field","view/form/fields/FieldWithPicker","view/form/fields/Calendar","view/form/fields/HourSelect"],function(a,b,c,d,e,f,g,h,i,j,k){return f.view.form.fields.DateField=i.extend({fieldTemplate:'<div class="input-prepend"><button class="btn" data-toggle="dropdown" data-target="#"><i class="icon-calendar"></i></button>'+i.prototype.fieldTemplate+"</div>",className:"date-field",format:"MMM D, YYYY",events:{"click input":"onInputClick","click button":"onButtonClick"},pickerOptions:{applyOnChange:!0,subViews:[{viewCls:j,name:"calendar",minDateAttr:"minDate",maxDateAttr:"maxDate"}]},subViews:[{viewCls:k,name:"hourSelect",selector:".field",opens:"right",tagName:"span"}],utc:!1,keepTime:!1,minDate:void 0,maxDate:void 0,minDateAttr:void 0,maxDateAttr:void 0,showHourSelect:!1,initialize:function(){i.prototype.initialize.apply(this,arguments);var a=this.getCalendar();a.utc=this.utc;var b=this.getSubView("hourSelect");b.utc=this.utc,b.valueAttr=this.valueAttr,b.updateModelOnChange=this.updateModelOnChange,b.relationship=this.relationship,this.setShowHourSelect(this.showHourSelect),this.minDate&&this.setMinDate(this.minDate),this.maxDate&&this.setMaxDate(this.maxDate)},getCalendar:function(){return this.getPicker().getSubView("calendar")},setMinDate:function(a){a=g.parseRelativeDate(a),this.getPicker().model.set("minDate",a),this.getSubView("hourSelect").setMinDate(a)},setMaxDate:function(a){a=g.parseRelativeDate(a),this.getPicker().model.set("maxDate",a),this.getSubView("hourSelect").setMaxDate(a)},setShowHourSelect:function(a){this.showHourSelect=a,this.$el.toggleClass("show-hour-select",this.showHourSelect),this.isRendered&&this.render()},onInput:function(){},getValueString:function(a){if(a){var b=this.utc?e.utc(a):e(a);return b.format(this.format)}return""},isDomValueValid:function(a){var b=this.utc?e.utc(a):e(a);return!a||b.isValid&&b.isValid()&&this.getCalendar().isDateInMinMax(a)
},processDomValue:function(a){if(a){var b=this.utc?e.utc(a):e(a),c=this.getValue();if(c&&(this.keepTime||this.showHourSelect)){var d=this.utc?e.utc(c):e(c);b.hour(d.hour()).minute(d.minute()).second(d.second()).millisecond(d.millisecond())}return b.valueOf()}return null},processPickerValue:function(a){return this.processDomValue(a)},onModelChange:function(){i.prototype.onModelChange.apply(this,arguments),this.updateValueFromModel()},onKeyDown:function(a){13===a.keyCode?(a.preventDefault(),this.updateValueFromDom()):27===a.keyCode&&this.update()},updateValueFromModel:function(){i.prototype.updateValueFromModel.apply(this,arguments),this.minDateAttr&&this.setMinDate(this.model.get(this.minDateAttr)),this.maxDateAttr&&this.setMaxDate(this.model.get(this.maxDateAttr))}})}),define("text!view/form/fields/picker/templates/DateRangePicker.html",[],function(){return'<div class="calendar-wrap">\n  <div class="date-field">\n    <label class="control-label" for="daterangepicker_from">From</label>\n    <span class="from-date"></span>\n    {{#if showHourSelect}}<span class="from-hour"></span>{{/if}}\n  </div>\n  <div class="from-calendar"></div>\n</div>\n\n<div class="calendar-wrap">\n  <div class="date-field">\n    <label class="control-label" for="daterangepicker_to">To</label>\n    <span class="to-date"></span>\n    {{#if showHourSelect}}<span class="to-hour"></span>{{/if}}\n  </div>\n  <div class="to-calendar"></div>\n</div>\n\n<div class="ranges-wrap">\n  <ul class="ranges">\n    {{#ranges}}\n      <li><a href="#">{{name}}</a></li>\n    {{/ranges}}\n  </ul>\n  <button class="btn btn-small apply">Apply</button>\n  <a href="#" class="cancel">cancel</a>\n</div>\n'}),define("view/form/fields/picker/DateRangePicker",["jquery","underscore","backbone","handlebars","moment","PlumageRoot","view/form/fields/picker/Picker","view/form/fields/Field","view/form/fields/HourSelect","view/form/fields/Calendar","text!view/form/fields/picker/templates/DateRangePicker.html"],function(a,b,c,d,e,f,g,h,i,j,k){return f.view.form.fields.picker.DateRangePicker=g.extend({template:k,className:"date-range-picker dropdown-menu form-inline",showHourSelect:!1,minDate:void 0,maxDate:void 0,dateFormat:"MMM D, YYYY",utc:!1,ranges:[{name:"Today",from:"today",to:"today"},{name:"Yesterday",from:{day:-1},to:{day:-1}},{name:"Last 7 Days",from:{day:-6},to:"today"},{name:"Last 30 Days",from:{day:-29},to:"today"},{name:"Last 90 Days",from:{day:-89},to:"today"}],events:{"click .ranges a":"onRangeClick","click .apply":"onApplyClick","click .cancel":"onCancelClick",mousedown:"onMouseDown"},subViews:[{viewCls:j,name:"fromCal",selector:".from-calendar",valueAttr:"fromDate",fromAttr:"fromDate",toAttr:"toDate",minDateAttr:"minDate",maxDateAttr:"toDate"},{viewCls:j,name:"toCal",selector:".to-calendar",valueAttr:"toDate",fromAttr:"fromDate",toAttr:"toDate",minDateAttr:"fromDate",maxDateAttr:"maxDate"},{viewCls:h,selector:".from-date",name:"fromDate",valueAttr:"fromDate",readonly:!0,replaceEl:!0},{viewCls:h,selector:".to-date",name:"toDate",valueAttr:"toDate",readonly:!0,replaceEl:!0},{viewCls:i,name:"fromHour",selector:".from-hour",valueAttr:"fromDate",minDateAttr:"minDate",maxDateAttr:"toDate",fromAttr:"fromDate",toAttr:"toDate",preventFocus:!0,replaceEl:!0},{viewCls:i,name:"toHour",selector:".to-hour",valueAttr:"toDate",minDateAttr:"fromDate",maxDateAttr:"maxDate",fromAttr:"fromDate",toAttr:"toDate",preventFocus:!0,replaceEl:!0}],initialize:function(){this.utc&&(this.subViews=b.map(this.subViews,b.clone),b.each(this.subViews,function(a){a.utc=!0})),g.prototype.initialize.apply(this,arguments);var a=function(a){var b=this.utc?e.utc(a):e(a);return b.format(this.dateFormat)}.bind(this);this.getSubView("fromDate").getValueString=a,this.getSubView("toDate").getValueString=a},onRender:function(){g.prototype.onRender.apply(this,arguments),this.$el.toggleClass("show-hour-select",this.showHourSelect)},getTemplateData:function(){var a=g.prototype.getTemplateData.apply(this,arguments);return b.extend(a,{ranges:this.ranges,opens:this.opens,showHourSelect:this.showHourSelect})},setShowHourSelect:function(a){this.showHourSelect=a,this.isRendered&&this.render()},getValue:function(){return[this.model.get("fromDate"),this.model.get("toDate")]},setValue:function(a){var b={fromDate:void 0,toDate:void 0};a&&a.length&&(b={fromDate:a[0],toDate:a[1]}),this.model.set(b)},selectPresetRange:function(a){for(var b=[a.from,a.to],c=this.utc?e.utc({hour:0}):e({hour:0}),d=0;d<b.length;d++)b[d]="today"===b[d]?c:c.clone().add(b[d]);this.setValue([b[0].startOf("day").valueOf(),b[1].endOf("day").valueOf()]),this.update()},onRangeClick:function(a){a.preventDefault(),a.stopPropagation();var c=b.findWhere(this.ranges,{name:a.target.text});this.selectPresetRange(c)},onApplyClick:function(a){a.preventDefault(),a.stopPropagation(),this.trigger("apply",this,this.model)},onCancelClick:function(a){a.preventDefault(),a.stopPropagation(),this.trigger("close")}})}),define("view/form/fields/DateRangeField",["jquery","underscore","backbone","handlebars","moment","PlumageRoot","view/form/fields/FieldWithPicker","view/form/fields/picker/DateRangePicker"],function(a,b,c,d,e,f,g,h){return f.view.form.fields.DateRangeField=g.extend({fieldTemplate:'<div class="input-prepend"><button class="btn" data-toggle="dropdown" data-target="#"><i class="icon-calendar"></i></button>'+g.prototype.fieldTemplate+"</div>",className:"date-range-field",fromAttr:void 0,toAttr:void 0,minDate:void 0,maxDate:void 0,pickerCls:h,pickerOptions:void 0,opens:"right",format:"MMM D, YYYY",formatWithHour:"MMM D ha, YYYY",initialize:function(){g.prototype.initialize.apply(this,arguments)},setShowHourSelect:function(a){this.getPicker().setShowHourSelect(a)},setMaxDate:function(a){this.getPicker().model.set("maxDate",a)},setMinDate:function(a){this.getPicker().model.set("minDate",a)},getValueString:function(a){if(a&&a.length){var b=this.getPicker(),c=b.showHourSelect?this.formatWithHour:this.format,d=b.utc?e.utc(a[0]):e(a[0]),f=b.utc?e.utc(a[1]):e(a[1]);return d.format(c)+" - "+f.format(c)}return""},isDomValueValid:function(a){if(!a)return!0;var b=a.split("-");if(2!==b.length)return!1;var c=this.getPicker().utc,d=c?e.utc(b[0].trim()):e(b[0].trim()),g=c?e.utc(b[1].trim()):e(b[1].trim());return d.isValid()&&g.isValid()?d>g?!1:f.util.DateTimeUtil.isDateInRange(d,this.minDate,this.maxDate)&&f.util.DateTimeUtil.isDateInRange(g,this.minDate,this.maxDate):!1},processDomValue:function(a){if(!a)return null;var b=this.getPicker().showHourSelect?this.formatWithHour:this.format,c=a.split("-"),d=this.getPicker().utc,f=d?e.utc(c[0].trim(),b):e(c[0].trim()),g=d?e.utc(c[1].trim(),b):e(c[1].trim()),h=f.valueOf(),i=g.valueOf();return[h,i]},getValueFromModel:function(){if(this.model){var a=this.model.get(this.fromAttr),b=this.model.get(this.toAttr);return[a,b]}},updateModel:function(a,b){var c=this.getModelFromRoot(this.relationship,a,b),d=this.getValue(),e={};return e[this.fromAttr]=d[0],e[this.toAttr]=d[1],c.set(e)},valueChanged:function(){g.prototype.valueChanged.apply(this,arguments),this.getPicker().model.set({minDate:this.minDate,maxDate:this.maxDate})},onModelChange:function(a){(void 0!==a.changed[this.fromAttr]||void 0!==a.changed[this.toAttr])&&this.updateValueFromModel()},onKeyDown:function(a){13===a.keyCode?(a.preventDefault(),this.updateValueFromDom()):27===a.keyCode&&this.update()}})}),define("text!view/form/fields/templates/MultiSelect.html",[],function(){return'<select {{#if fieldName}}name="{{fieldName}}{{/if}}" multiple="multiple">\n{{#if noSelectionText}}\n<option value="{{noSelectionValue}}" {{^hasSelection}}selected="true"{{/hasSelection}}>{{noSelectionText}}</option>\n{{/if}}\n\n{{#listValues}}\n<option value="{{value}}" class="{{value}}" {{#selected}}selected{{/selected}}>{{label}}</option>\n{{/listValues}}\n</select>'}),define("view/form/fields/MultiSelect",["jquery","underscore","backbone","handlebars","PlumageRoot","view/form/fields/Select","text!view/form/fields/templates/MultiSelect.html"],function(a,b,c,d,e,f,g){return e.view.form.fields.MultiSelect=f.extend({template:d.compile(g),showSelectAll:!1,allLabel:"All",initialize:function(){this.value=[],f.prototype.initialize.apply(this,arguments)},getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);return a.showSelectAll=this.showSelectAll,a.allSelected=b.all(a.listValues,function(a){return a.selected}),a},onRender:function(){f.prototype.onRender.apply(this,arguments)},getValue:function(){var c=f.prototype.getValue.apply(this,arguments);return void 0!==c?a.isArray(c)?b.clone(c):[c]:[]},getValueLabel:function(a){var b=[];return a&&a.length&&this.listModel.each(function(a){this.isValueSelected(this.getListItemValue(a))&&b.push(this.getListItemLabel(a))}.bind(this)),this.listModel?b.length===this.listModel.size()?this.allLabel:b.join(", "):""},isValueSelected:function(a){return b.contains(this.getValue(),a)},hasSelection:function(){var a=this.getValue();return Boolean(a&&(a.length>1||1===a.length&&a[0]!==this.noSelectionValue))},toggleValue:function(a,c){var d=this,e=this.getValue(),f=e.indexOf(a);0>f?(f=b.sortedIndex(e,a,function(a){var b=d.listModel.find(function(b){return d.getListItemValue(b)===a});return d.listModel.indexOf(b)}),e.splice(f,0,a),this.setValue(e,c)):(e.splice(f,1),this.setValue(e,c))},setValueSelected:function(a,b){void 0===b&&(b=!0);this.getValue();this.isValueSelected(a)!==b&&this.toggleValue(a)},selectAll:function(){var a=this.listModel.map(function(a){return this.getListItemValue(a)}.bind(this));this.setValue(a)},selectNone:function(){this.setValue([])},toggleSelectAll:function(){var a=this.getValue();a&&a.length===this.listModel.size()?this.selectNone():this.selectAll()}})}),define("text!view/form/fields/templates/DropdownMultiSelect.html",[],function(){return'<div class="dropdown-multiselect dropdown">\n<select {{#if fieldName}}name="{{fieldName}}"{{/if}} style="display: none">\n{{#if noSelectionText}}\n<option value="{{noSelectionValue}}" {{^hasSelection}}selected="true"{{/hasSelection}}>{{noSelectionText}}</option>\n{{/if}}\n{{#listValues}}\n<option value="{{value}}" {{#selected}}selected{{/selected}}>{{label}}</option>\n{{/listValues}}\n</select>\n\n<a class="btn dropdown-toggle {{buttonCls}}" data-toggle="dropdown" href="#">\n  {{#iconCls}}\n    <i class="{{.}} icon-white"></i>\n  {{/iconCls}}\n  {{#if hasSelection}}\n    {{valueLabel}}\n  {{else}}\n    {{noSelectionText}}\n  {{/if}}\n  <span class="caret"></span>\n</a>\n<ul class="dropdown-menu {{#if showSelectOnly}}show-select-only{{/if}}">\n  {{#if showSelectAll}}\n  <li class="select-all {{#allSelected}}active{{/allSelected}}">\n      <a><input type="checkbox" {{#allSelected}} checked{{/allSelected}}/>Select All</a>\n  </li>\n  {{/if}}\n  {{#listValues}}\n  <li data-value="{{value}}" class="{{value}}{{#selected}} active{{/selected}}">\n      {{#if ../showSelectOnly}}\n        <a href="#" class="only-link">only</a>\n      {{/if}}\n      <a class="item"><input type="checkbox" {{#selected}} checked{{/selected}}/>{{label}}</a>\n  </li>\n  {{/listValues}}\n</ul>\n</div>'}),define("view/form/fields/DropdownMultiSelect",["jquery","underscore","backbone","handlebars","PlumageRoot","view/form/fields/MultiSelect","text!view/form/fields/templates/DropdownMultiSelect.html"],function(a,b,c,d,e,f,g){return e.view.form.fields.DropdownMultiSelect=f.extend({template:g,showSelectOnly:!0,events:{"click li a":"onItemClick","click li input":"onItemClick","click li.select-all a":"onSelectAllClick","click li.select-all input":"onSelectAllClick"},initialize:function(){this.value=[],f.prototype.initialize.apply(this,arguments)},getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);return a.showSelectOnly=this.showSelectOnly,a},onRender:function(){f.prototype.onRender.apply(this,arguments)},update:function(){var a=this.$(".dropdown").hasClass("open");this.render(),a&&this.$(".dropdown").addClass("open")},onItemClick:function(b){var c=a(b.target).closest("li"),d=c&&c.data("value");void 0!==d&&(b.preventDefault(),b.stopPropagation(),a(b.target).hasClass("only-link")?this.setValue(d):this.toggleValue(d))},onSelectAllClick:function(a){a.preventDefault(),a.stopPropagation(),this.toggleSelectAll()}})}),define("view/form/fields/FilterCheckbox",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/Checkbox"],function(a,b,c,d,e){return d.view.form.fields.FilterCheckbox=e.extend({filterKey:void 0,filterValue:!0,invertMatch:!1,checkboxLabel:void 0,comparison:"equals",updateModelOnChange:!0,processFilterValue:function(a){return a===this.filterValue!==this.invertMatch?!0:!1},processValueForFilter:function(a){return a!==this.invertMatch?this.filterValue:void 0},getValueFromModel:function(){if(this.model){var a,b=this.model.getFilters(this.filterKey);return b&&b.length&&(a=b[0].get("value")),this.processFilterValue(a)}return void 0},updateModel:function(a,b){var c=this.getModelFromRoot(this.relationship,a,b),e=this.processValueForFilter(this.getValue()),f=this.model.getFilters(this.filterKey);c&&(f&&f.length?void 0===e||""===String(e)?this.model.removeFilter(f[0]):f[0].set("value",e):void 0!==e&&""!==String(e)&&c.addFilter(new d.model.Filter({key:this.filterKey,comparison:this.comparison,value:e})))}})}),define("text!view/form/fields/templates/TypeAhead.html",[],function(){return'<span class="typeahead-select {{#if menuShown}}open{{/if}}">\n<span class="input-append">\n  <input type="text" placeholder="{{noSelectionText}}" value="{{value}}">\n  <button class="btn cancel-typeahead"><i class="icon-remove"></i></button>\n</span>\n\n<ul class="dropdown-menu">\n</ul>\n</span>'}),define("text!view/form/fields/templates/TypeAheadMenu.html",[],function(){return'\n{{#if loading}}\n<li class="loading"></li>\n{{else}}\n{{#listValues}}\n  <li data-value="{{value}}" class="{{value}}{{#selected}} active{{/selected}}"><a href="#">{{label}}</a></li>\n{{/listValues}}\n{{^listValues}}\n<li class="no-results"><a>No Results</a></li>\n{{/listValues}}\n{{/if}}'}),define("view/form/fields/TypeAhead",["jquery","underscore","backbone","handlebars","PlumageRoot","view/form/fields/Field","view/form/fields/Select","RequestManager","text!view/form/fields/templates/TypeAhead.html","text!view/form/fields/templates/TypeAheadMenu.html"],function(a,b,c,d,e,f,g,h,i,j){return e.view.form.fields.TypeAhead=g.extend({template:i,menuTemplate:j,tagName:"span",valueAttr:"name",labelAttr:"name",itemTemplate:'<li data-value="{{value}}" class="{{value}}{{#selected}} active{{/selected}}"><a href="#">{{label}}</a></li>',shown:!1,initialize:function(){g.prototype.initialize.apply(this,arguments),this.menuTemplate=this.initTemplate(j)},events:{"keypress input":"onKeyPress","click button":"onClearClick"},getTemplateData:function(){var a=g.prototype.getTemplateData.apply(this,arguments),b=this.listModel,c=b?b.get("query"):void 0;return c&&(a.value=c),a.menuShown=this.menuShown,a.loading=this.loading,a},onRender:function(){g.prototype.onRender.apply(this,arguments),this.renderMenu(),this.updateCancelButton()},setValue:function(){g.prototype.setValue.apply(this,arguments),this.listModel.set("query",void 0)},setSelectedId:function(a){a!==this.selectedId&&(this.selectedId=a,this.updateMenu())},update:function(){g.prototype.update.apply(this,arguments),this.listModel&&this.updateCancelButton()},delegateEvents:function(a){a=a||b.result(this,"events");var c=".dropdown-menu";a=b.clone(a||{}),a["mousedown "+c]="onMenuMouseDown",a["click "+c]="onMenuClick",f.prototype.delegateEvents.apply(this,[a])},undelegateEvents:function(){c.View.prototype.undelegateEvents.apply(this,arguments)},renderMenu:function(){var a=this.getTemplateData();this.$(".dropdown-menu").html(this.menuTemplate(a))},updateMenu:function(){if(this.listModel){var b=this.$(".dropdown-menu").find("li");if(b.removeClass("active"),this.selectedId){var c=this.listModel.indexOf(this.listModel.getById(this.selectedId));-1!==c?a(b[c]).addClass("active"):this.selectedId=void 0}}},showMenu:function(){this.$("> span").addClass("open"),this.menuShown=!0},hideMenu:function(){this.$("> span").removeClass("open"),this.menuShown=!1},getItemData:function(a){return{value:a.id,label:a.get(this.labelAttr),selected:a.id===this.selectedId}},next:function(){var a=this.listModel,b=0;a&&a.size()&&(this.selectedId&&(b=a.indexOf(a.getById(this.selectedId)),b=(b+1)%a.size()),this.setSelectedId(a.at(b).get("name")))},prev:function(){var a=this.listModel,b=0;a&&a.size()&&(this.selectedId&&(b=a.indexOf(a.getById(this.selectedId)),b-=1,b=0>b?b+a.size():b),this.setSelectedId(a.at(b).get("name")))},select:function(){this.setValue(this.selectedId),this.listModel.set("query",void 0),this.getInputEl().blur(),this.hideMenu(),this.triggerChange()},resetInput:function(){this.$("input").val(this.getValue())},onModelLoad:function(){g.prototype.onModelLoad.apply(this,arguments),this.update(!0)},onKeyDown:function(b){if(this.suppressKeyPressRepeat=!a.inArray(b.keyCode,[40,38,9,13,27]),this.shown)switch(b.stopPropagation(),b.keyCode){case 9:b.preventDefault();break;case 13:(this.shown||this.loading)&&(b.preventDefault(),this.select());break;case 27:this.shown&&(b.preventDefault(),this.resetInput(),this.hideMenu());break;case 38:b.preventDefault(),this.prev();break;case 40:b.preventDefault(),this.next()}},onChange:function(){},onInput:function(){this.listModel.set({query:this.getValueFromDom()}),this.updateQuery(),this.showMenu()},onFocus:function(){this.updateQuery(),this.showMenu()},onBlur:function(){this.hideMenu(),this.resetInput()},onMenuMouseDown:function(a){a.preventDefault(),a.stopPropagation()},onMenuClick:function(b){b.preventDefault(),b.stopPropagation();var c=a(b.target).parent("li");if(c.length){var d=c.data("value");d&&(this.setSelectedId(d),this.select())}},updateQuery:function(){this.listModel&&(h.loadModel(this.listModel,{data:{limit:10,offset:0}}),this.loading=!0)},updateCancelButton:function(){if(this.$input){var a=this.$input.val();0===a.length?this.$("button").attr("disabled","disabled"):this.$("button").removeAttr("disabled")}},onClearClick:function(a){a.preventDefault(),a.stopPropagation();var b=this.getValue();b&&b.length>0&&(this.setValue(""),this.updateQuery(),this.hideMenu(),this.blur(),this.update(),this.triggerChange()),this.updateCancelButton()},setModel:function(){g.prototype.setModel.apply(this,arguments)},onListModelChange:function(){this.renderMenu()},onListModelLoad:function(a){var b=a.get("query")?a.get("query"):"";b===this.$("input").val()&&(!this.listModel.size()||this.selectedId&&void 0!==this.listModel.getById(this.selectedId)||(this.selectedId=this.listModel.at(0).id,console.log("autoselecting: "+this.selectedId)),this.loading=!1,this.renderMenu())}})}),define("view/form/fields/FilterTypeAhead",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/TypeAhead","model/Filter"],function(a,b,c,d,e,f){return d.view.form.fields.FilterTypeAhead=e.extend({filterKey:void 0,comparison:"equals",updateModelOnChange:!0,initialize:function(){e.prototype.initialize.apply(this,arguments)},getValueFromModel:function(){if(this.model){var a=this.model.getFilters(this.filterKey);if(a&&a.length)return a[0].get("value")}return void 0},setModel:function(){e.prototype.setModel.apply(this,arguments)},updateModel:function(a,b){var c=this.getModelFromRoot(this.relationship,a,b),d=this.getValue(),e=this.model.getFilters(this.filterKey);return c&&(e&&e.length?void 0===d||""===String(d)?this.model.removeFilter(e[0]):e[0].set("value",d):void 0!==d&&""!==String(d)&&c.addFilter(new f({key:this.filterKey,comparison:this.comparison,value:d}))),!0}})}),define("text!view/form/fields/templates/InPlaceTextField.html",[],function(){return'<div class="control-group {{#if validationState}}{{validationState}}{{/if}}">\n{{#if label}}\n  <label class="control-label" for="{{valueAttr}}">{{label}}</label>\n  <div class="controls">\n{{/if}}\n    <div class="field-value {{#unless hasValue}}no-value{{/unless}}">\n      <i class="icon-pencil"></i>\n      <span>{{#if hasValue}}{{value}}{{else}}{{placeholder}}{{/if}}</span>\n	  </div>\n    {{> field}}\n    <span class="help-inline">{{#if message}}{{message}}{{/if}}</span>\n{{#if label}}\n  </div>\n{{/if}}\n</div>\n'}),define("view/form/fields/InPlaceTextField",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/Field","text!view/form/fields/templates/InPlaceTextField.html"],function(a,b,c,d,e,f){return d.view.form.fields.InPlaceTextField=e.extend({template:f,className:"inplace-field",events:{"click .field-value":"onFieldValueClick"},update:function(){e.prototype.update.apply(this,arguments),this.isEditing()||this.render()},commit:function(){this.updateValueFromDom(),this.hideField(),this.update()},cancel:function(){this.hideField(),this.update()},isEditing:function(){return this.$el.hasClass("editing")},showField:function(){this.$el.addClass("editing"),this.getInputEl().focus()},hideField:function(){this.$el.removeClass("editing")},onChange:function(){},onInput:function(){},onFieldValueClick:function(){this.showField()},onBlur:function(){this.commit()},onKeyDown:function(a){13===a.keyCode?(a.preventDefault(),this.commit()):27===a.keyCode&&this.cancel()}})}),define("text!view/form/fields/templates/Radio.html",[],function(){return'{{#items}}\n<label class="radio {{cls}}">\n  <input type="radio" name="{{../fieldName}}" {{#selected}}checked="true"{{/selected}} value="{{value}}">\n  <span>{{label}}</span>\n</label>\n{{/items}}\n'}),define("view/form/fields/Radio",["jquery","underscore","backbone","handlebars","PlumageRoot","view/form/fields/Field","text!view/form/fields/templates/Radio.html"],function(a,b,c,d,e,f,g){return e.view.form.fields.Radio=f.extend({template:d.compile(g),items:[],getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);a.items=[];for(var c=0;c<this.items.length;c++){var d=b.clone(this.items[c]);a.items.push(d),this.getValue()===d.value&&(d.selected=!0)}return a},updateValue:function(){this.value=this.getValueFromModel(),this.isRendered&&this.render()},getValueFromDom:function(){return this.$("input:checked").val()}})}),define("text!view/form/fields/templates/RadioButtonGroup.html",[],function(){return'<div class="btn-group">\n{{#items}}\n  <button type="button" class="btn {{#selected}}active{{/selected}}" data-value="{{value}}">{{label}}</button>\n{{/items}}\n</div>'}),define("view/form/fields/RadioButtonGroup",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/Radio","text!view/form/fields/templates/RadioButtonGroup.html"],function(a,b,c,d,e,f){return d.view.form.fields.RadioButtonGroup=e.extend({template:c.compile(f),events:{"click button":"onChange"},onChange:function(b){b.preventDefault(),b.stopPropagation();var c=a(b.target).data("value");this.changing||this.setValue(c,{silent:!0}),this.trigger("change",this,this.getValue())}})}),define("text!view/form/fields/templates/SearchField.html",[],function(){return'{{> field}}\n<button><i class="icon-search"></i></button>\n'}),define("view/form/fields/SearchField",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/Field","text!view/form/fields/templates/SearchField.html"],function(a,b,c,d,e,f){return d.view.form.SearchField=e.extend({template:f,className:"search-field",fieldTemplate:'<input type="text" class="search-query" name="{{valueAttr}}" {{#placeholder}}placeholder="{{.}}"{{/placeholder}} value="{{value}}"/>',valueAttr:"query",updateModelOnChange:!0,events:{"click button":"onSubmitClick"},onKeyDown:function(a){13===a.keyCode&&(a.preventDefault(),this.trigger("submit",this,this.getValue()))},onSubmitClick:function(a){a.preventDefault(),a.stopPropagation(),this.trigger("submit",this,this.getValue())}})}),define("text!view/form/templates/SelectField.html",[],function(){return'<option value="{{noSelectionValue}}" {{^hasSelection}}selected="true"{{/hasSelection}}>{{noSelectionText}}</option>\n{{#items}}\n<option {{#selected}}selected="true"{{/selected}} value="{{value}}">{{label}}</option>\n{{/items}}'}),define("view/form/SelectField",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/Select","text!view/form/templates/SelectField.html"],function(a,b,c,d,e,f){return d.view.form.SelectField=e.extend({tagName:"select",className:"select-field",template:c.compile(f),listValueAttr:void 0,listLabelAttr:void 0,modelAttr:void 0,noSelectionText:"",value:"",events:{change:"onChange"},initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("view/form/fields/FilterField",["jquery","backbone","handlebars","PlumageRoot","view/form/fields/Field","model/Filter"],function(a,b,c,d,e,f){return d.view.form.fields.FilterField=e.extend({className:"filter-text-field",filterKey:void 0,comparison:"contains",updateModelOnChange:!0,getValueFromModel:function(){if(this.model){var a=this.model.getFilters(this.filterKey);if(a&&a.length)return a[0].get("value")}return void 0},updateModel:function(a,b){var c=this.getModelFromRoot(this.relationship,a,b),d=this.getValue(),e=this.model.getFilters(this.filterKey);return c&&(e&&e.length?void 0===d||""===String(d)?this.model.removeFilter(e[0]):e[0].set("value",d):void 0!==d&&""!==String(d)&&c.addFilter(new f({key:this.filterKey,comparison:this.comparison,value:d}))),!0}})}),define("text!view/menu/templates/DropdownMenu.html",[],function(){return'\n<a class="dropdown-toggle {{#buttonStyle}}btn{{/buttonStyle}}" data-toggle="dropdown" href="#">\n	{{#iconCls}}<i class="{{.}}"></i>{{/iconCls}}\n	{{label}}\n  {{#showCaret}}<b class="caret"/>{{/showCaret}}\n</a>\n<ul class="dropdown-menu {{dropdownCls}}" role="menu">\n  {{#menuItems}}\n  <li>\n    <a data-value="{{value}}">{{#icon}}<i class="icon-{{.}}"></i>{{/icon}}{{label}}</a>\n  </li>\n  {{/menuItems}}\n</ul>\n'}),define("view/menu/DropdownMenu",["jquery","backbone","handlebars","PlumageRoot","view/View","text!view/menu/templates/DropdownMenu.html","bootstrap"],function(a,b,c,d,e,f){return d.view.menu.DropdownMenu=e.extend({template:f,className:"dropdown",buttonStyle:!1,menuItems:[],iconCls:void 0,showCaret:!0,opens:"right",events:{"click li a":"onItemClick"},getTemplateData:function(){return{label:this.label,iconCls:this.iconCls,menuItems:this.menuItems,showCaret:this.showCaret,buttonStyle:this.buttonStyle,dropdownCls:"left"===this.opens?"pull-right":""}},setLabel:function(a){this.label=a,this.render()},open:function(){this.$el.addClass("open")},close:function(){this.$el.removeClass("open")},onItemClick:function(b){this.trigger("itemClick",this,a(b.target).data("value"))}})}),define("text!view/grid/templates/FilterView.html",[],function(){return'\n{{#if hasFilters}}<span>Filter by:</span>{{/if}}\n\n<span class="filters"></span>\n\n<span class="actions"></span>\n\n\n<span class="more-menu"></span>\n\n<span class="actions-right"></span>\n\n<span class="search"></span>\n'}),define("view/grid/FilterView",["jquery","underscore","backbone","handlebars","PlumageRoot","view/form/Form","view/ModelView","view/form/fields/FilterField","view/form/fields/SearchField","view/menu/DropdownMenu","util/ModelUtil","text!view/grid/templates/FilterView.html"],function(a,b,c,d,e,f,g,h,i,j,k,l){return e.view.grid.FilterView=f.extend({className:"form-inline filter-view",template:d.compile(l),showSearch:!0,searchEmptyText:"Search",filterConfigs:[],defaultFieldCls:h,moreMenuItems:[{value:"download",label:"Download",icon:"arrow-down"}],initialize:function(a){f.prototype.initialize.apply(this,arguments),a=a||{},this.filterFields=[],this.subViews=b.clone(this.subViews),b.each(this.filterConfigs,function(a){var c=b.extend({},{selector:".filters",className:"filter-field",relationship:this.relationship},a),d=a.fieldCls||this.defaultFieldCls,e=new d(c);this.subViews.push(e),this.filterFields.push(e)},this),this.showSearch&&(this.searchField=new i({selector:".search",noSelectionText:this.searchEmptyText,modelAttr:"query"}),this.subViews.push(this.searchField)),this.subViews.push(this.moreMenu=new j({selector:".more-menu",buttonStyle:!0,iconCls:"icon-cog",label:"",menuItems:this.moreMenuItems,opens:"left",replaceEl:!0})),this.subViews.concat(a.subViews||[]),b.each(this.filterFields,function(a){if(a.listModelCls){var b=k.loadClass(a.listModelCls),c=a.listModelParams||{},d=this.createFilterListModel(b,c);a.setListModel(d)}},this)},getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);return a.hasFilters=this.filterConfigs.length>0,a},createFilterListModel:function(a,b){return new a(null,b)},onRender:function(){a(this.el).html(this.template({searchQuery:""}))},update:function(){},setModel:function(){e.view.ModelView.prototype.setModel.apply(this,arguments)}})}),define("view/grid/Formatters",["jquery","backbone","moment","PlumageRoot","util/DateTimeUtil"],function(a,b,c,d,e){return d.view.grid.Formatters={MoneyFormatter:function(a,b,c){return c&&c.toFixed?c.toFixed(2):c},DateFromNowFormatter:function(a,b,c){return e.formatDateFromNow(c)},DateFormatter:function(a,b,c,d){return e.formatDate(c,d.dateFormat)},DateFormatterUTC:function(a,b,c,d){return e.formatDateUTC(c,d.dateFormat)},DurationFormatter:function(a,b,c){return e.formatDurationShort(Number(c))},NameWithCommentsFormatter:function(a,b,c,d,e){var f=e.get("comments_count");return f>0?c+'<span class="comments-count-icon">'+f+"</span>":c}}}),define("view/grid/GridData",["jquery","underscore","backbone","PlumageRoot"],function(a,b,c,d){var e=function(){this.initialize.apply(this,arguments)};return b.extend(e.prototype,c.Events,{relayEventNames:["reset"],collection:void 0,initialize:function(a,c){b.extend(this,c),this.collection=a,this.collection.on("all",this.relayEvent,this)},ensureData:function(a,b){this.collection.ensureData&&this.collection.ensureData(a,b)},setSort:function(a,b){this.collection.setSort(a,b,!0)},getLength:function(){return this.collection.size()},getItem:function(a){return this.collection.at(a)},getItemMetadata:function(){return null},getIndexForId:function(a){var b=this.collection.getById(a);return this.collection.indexOf(b)},relayEvent:function(a){b.contains(this.relayEventNames,a)&&this.trigger.apply(this,arguments)}}),e.extend=c.Model.extend,d.view.grid.GridData=e}),define("view/grid/GridView",["jquery","underscore","backbone","PlumageRoot","view/ModelView","view/grid/GridData","collection/BufferedCollection","collection/GridSelection","slickgrid-all"],function(a,b,c,d,e,f,g,h,i){return d.view.grid.GridView=e.extend({className:"grid-view",columns:void 0,gridOptions:{},gridDataCls:f,defaultGridOptions:{editable:!1,multiSelect:!1,explicitInitialization:!0,rowHeight:34,dataItemColumnValueExtractor:function(a,b){return a.get(b.field)}},selection:void 0,firstShow:!0,infiniteScroll:!0,checkboxSelect:!1,checkboxColumn:{id:"checkbox-select",cssClass:"checkbox-select",field:"sel",width:30,resizable:!1,sortable:!1},noDataText:"No Rows Found",saveViewState:!0,filterView:void 0,initialize:function(){e.prototype.initialize.apply(this,arguments),this.checkboxSelect&&(this.columns=b.clone(this.columns),this.columns.unshift(b.extend({formatter:function(a,b,c,d,e){if(e){var f=this.selection.isSelectedId(e.id);return f?'<input type="checkbox" checked="checked">':'<input type="checkbox">'}return null}.bind(this)},this.checkboxColumn)));var c=this.createGridData();this.gridEl=a('<div class="grid"></div>'),this.grid=new i.Grid(this.gridEl,c,this.columns,b.extend({},this.defaultGridOptions,this.gridOptions)),this.grid.onClick.subscribe(this.onGridClick.bind(this)),this.grid.onSort.subscribe(this.onSort.bind(this)),this.infiniteScroll&&this.grid.onViewportChanged.subscribe(function(){var a=this.grid.getViewport();this.ensureGridData(a.top,a.bottom)}.bind(this)),this.filterView&&this.setFilterView(this.filterView),this.onResize=b.debounce(this.onResize,50)},delegateEvents:function(){e.prototype.delegateEvents.apply(this,arguments),a(window).on("resize.delegateEvents"+this.cid,this.onResize.bind(this))},undelegateEvents:function(){e.prototype.undelegateEvents.apply(this,arguments),a("window").off(".delegateEvents"+this.cid)
},onRender:function(){a(this.el).append(this.gridEl)},setModel:function(){var a=this.model;if(e.prototype.setModel.apply(this,arguments),this.model&&this.model!==a&&(this.grid.setData(this.createGridData(this.model)),this.shown)){var b=this.grid.getViewport();this.ensureGridData(b.top,b.bottom),this.grid.updateRowCount(),this.grid.render()}},setSelection:function(a){this.selection&&this.selection.off("all",this.onSelectionChanged,this),this.selection=a,this.selection.on("all",this.onSelectionChanged,this),this.grid.setSelectionModel(new h(a))},setFilterView:function(a){this.filterView&&this.filterView.moreMenu.off("itemClick",this.onMoreMenuItemClick,this),this.filterView=a,this.filterView.moreMenu.on("itemClick",this.onMoreMenuItemClick,this)},createGridData:function(a){return a?(this.infiniteScroll&&(a=new g(a),a.on("pageLoad",this.onPageLoad.bind(this))),new this.gridDataCls(a)):[]},ensureGridData:b.debounce(function(a,b){this.grid.getData().ensureData(a,b)},200),downloadCSV:function(){if(this.model){var a=this.model.get("total");if(this.model.hasMore()){var b=this.model.clone();b.set({page:0,pageSize:a}),this.showLoadingAnimation(),b.load({success:function(){this.hideLoadingAnimation(),this._doDownloadCSV(b)}.bind(this)})}else this._doDownloadCSV(this.model)}},_doDownloadCSV:function(a){var c=[],d=this.grid.getColumns(),e=b.map(d,function(a){return a.name});a.each(function(a,b){for(var e=[],f=0;f<d.length;f++){var g=d[f],h=a.get(g.field);g.formatter&&(h=g.formatter(b,f,h,g,a),"string"==typeof h&&(h=h.replace(/<(?:.|\n)*?>/gm,""))),e.push(h)}c.push(e)});var f=e.join(",")+"\n";f+=b.map(c,function(a){return a.join(",")}).join("\n"),window.location="data:text/csv;charset=utf-8,"+encodeURIComponent(f)},onModelLoad:function(a){this.infiniteScroll||(this.onDoneLoad(),this.grid.invalidate(),this.updateNoData(),this.grid.scrollRowToTop(0)),a&&a.get&&a.get("sortField")&&this.grid.setSortColumn(a.get("sortField"),"1"===String(a.get("sortDir")))},onModelChange:function(){},onShow:function(){e.prototype.onShow.apply(this,arguments),0===this.gridEl.closest("html").length&&a(this.el).append(this.gridEl),this.firstShow?(this.firstShow=!1,this.grid.init()):this.grid.scrollToLastRendered(),this.grid.resizeCanvas()},onHide:function(){e.prototype.onHide.apply(this,arguments),a(this.gridEl).detach()},onGridClick:function(b,c){var d=b.target;if("A"===d.tagName&&a(d).attr("href"))return a(d).hasClass("outlink")||(b.preventDefault(),window.router.navigateWithQueryParams(a(d).attr("href"),{trigger:!0})),!1;if("checkbox-select"===this.grid.getColumns()[c.cell].id)return this.selection&&this.toggleRowSelected(c.row),void b.stopPropagation();var e=this.grid.getCellFromEvent(b),f=this.grid.getDataItem(e.row);if(f){var g=this.grid.getDataItem(e.row).id,h=this.grid.getData(),i=h.getItem(h.getIndexForId(g));this.trigger("itemSelected",i)}},toggleRowSelected:function(a){this.selection.toggleIndex(a)},onSelectionChanged:function(a,b,c){"add"===a||"remove"===a?this.grid.invalidateRow(this.grid.getData().getIndexForId(c.id)):"reset"===a&&this.grid.invalidate(),this.rendered&&this.grid.render()},onResize:function(){this.shown&&this.grid.resizeCanvas()},onSort:function(a,b){var c=b.sortAsc?1:-1,d=b.sortCol.field;this.model.setSort(d,c,!1)},onMoreMenuItemClick:function(a,b){"download"===b&&this.downloadCSV()},onBeginPageLoad:function(){this.showLoadingAnimation()},onPageLoad:function(a,b,c){for(var d=b;c>d;d++)this.grid.invalidateRow(d);this.grid.updateRowCount(),this.grid.render(),this.hideLoadingAnimation(),this.updateNoData()},updateNoData:function(){this.noDataEl||(this.noDataEl=a('<div class="no-data">'+this.noDataText+"</div>"),a(this.el).append(this.noDataEl)),this.grid&&this.grid.getData()&&this.grid.getData().getLength&&0===this.grid.getData().getLength()?this.noDataEl.show():this.noDataEl.hide()},onDoneLoad:function(){this.hideLoadingAnimation()},onModelBeginLoad:function(){e.prototype.onModelBeginLoad.apply(this,arguments),this.showLoadingAnimation()}})}),define("text!view/grid/templates/Pager.html",[],function(){return'<ul class="pager">\n  <li class="previous {{#if atFirstPage}}disabled{{/if}}"><a href="#">&larr;Previous</a></li>\n  <li class="next {{#if atLastPage}}disabled{{/if}}"><a href="#">Next &rarr;</a></li>\n</ul>'}),define("view/grid/Pager",["jquery","underscore","backbone","PlumageRoot","view/ModelView","text!view/grid/templates/Pager.html"],function(a,b,c,d,e,f){return d.view.grid.Pager=e.extend({className:"pager",template:f,events:{"click .pager .previous a":"onPreviousClick","click .pager .next a":"onNextClick"},getTemplateData:function(){return{atFirstPage:this.atFirstPage(),atLastPage:this.atLastPage()}},atFirstPage:function(){return this.model?0===this.model.get("page"):!1},atLastPage:function(){return this.model?this.model.size()<this.model.get("pageSize"):!1},onPreviousClick:function(a){if(a.preventDefault(),a.stopPropagation(),!this.atFirstPage()){var b=this.model.get("page");this.model.set("page",Math.max(b-1,0)),this.model.load()}},onNextClick:function(a){a.preventDefault(),a.stopPropagation();{var b=this.model.get("page"),c=this.model.get("pageSize");this.model.size()<c}this.atLastPage()||(this.model.set("page",b+1),this.model.load())}})}),define("view/ListItemView",["jquery","underscore","backbone","PlumageRoot","view/ModelView"],function(a,b,c,d,e){return d.view.ListItemView=e.extend({tagName:"li",className:"list-item-view",events:{click:"onClick"},onClick:function(){this.trigger("select",this,this.model)}})}),define("view/ListView",["jquery","underscore","backbone","PlumageRoot","collection/Selection","view/CollectionView","view/ListItemView"],function(a,b,c,d,e,f,g){return d.view.ListView=f.extend({tagName:"ul",selection:void 0,selectionAttr:"selectionId",className:"list-view",itemViewCls:g,selectable:!0,autoselect:!0,initialize:function(){f.prototype.initialize.apply(this,arguments),this.selectable&&!this.selection&&this.setSelectionModel(new e)},setSelectionModel:function(a){this.selection&&this.selection.off("change",this.onSelectionChange,this),this.selection=a,this.selection.on("change",this.onSelectionChange,this),this.autoSelectFirst(),this.updateSelection()},onRender:function(){f.prototype.onRender.apply(this,arguments),this.autoSelectFirst(),this.updateSelection()},renderItem:function(){var a=f.prototype.renderItem.apply(this,arguments);return a.on("select",this.onItemViewSelect.bind(this)),a},update:function(){f.prototype.update.apply(this,arguments),this.autoSelectFirst()},onSelectionChange:function(){this.selectable&&(this.updateSelection(),this.trigger("selectionChange",this.selection.get(this.selectionAttr)))},onItemViewSelect:function(a,b){this.select(b.id)},autoSelectFirst:function(){void 0===this.selection.get(this.selectionAttr)&&this.autoselect&&this.selectFirst()},updateSelection:function(){if(this.selectable){var a=this.selection.get(this.selectionAttr);if(void 0!==a){var b=this.model.getById(a);if(!b)return;for(var c=0;c<this.itemViews.length;c++){var d=this.itemViews[c];d.model.id===b.id?d.$el.addClass("active"):d.$el.removeClass("active")}}}},select:function(a){this.selection.set(this.selectionAttr,a)},selectFirst:function(){this.model&&this.model.size()&&this.selection.set(this.selectionAttr,this.model.at(0).id)}})}),define("view/ListAndDetailView",["jquery","underscore","backbone","handlebars","PlumageRoot","view/ModelView","view/ListView"],function(a,b,c,d,e,f,g){return e.view.ListAndDetailView=f.extend({className:"list-and-detail-view",template:'<div class="list"></div><div class="detail"></div>',listOptions:{},detailViewCls:void 0,events:{"click .select":"onSelect"},initialize:function(a){a=a||{},this.subViews=[this.listView=new g(b.extend({selector:".list",className:"list-view"},this.listOptions)),this.detailView=this.createDetailView()].concat(a.subViews||[]),f.prototype.initialize.apply(this,arguments),this.listView.on("selectionChange",this.onSelect.bind(this))},createDetailView:function(){return new this.detailViewCls({selector:".detail",replaceEl:!0})},onRender:function(){a(this.el).html(this.template())},onSelect:function(a){var b=this.listView.model.getById(a);this.detailView.setModel(b)},update:function(){}})}),define("text!view/templates/ModalDialog.html",[],function(){return'<div class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">\n  <div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>\n    <h3 id="myModalLabel">{{header}}</h3>\n  </div>\n  <div class="modal-body">\n    <div class="modal-content"></div>\n  </div>\n  <div class="modal-footer">\n    {{#if showCancel}}\n      <a class="cancel" data-dismiss="modal" aria-hidden="true">Cancel</a>\n    {{else}}\n      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>\n    {{/if}}\n    {{#if showSubmit}}\n      <button class="btn submit">Submit</button>\n    {{/if}}\n  </div>\n</div>'}),define("view/ModalDialog",["jquery","underscore","backbone","PlumageRoot","view/ModelView","text!view/templates/ModalDialog.html"],function(a,b,c,d,e,f){return d.view.ModalDialog=e.extend({template:f,contentView:void 0,header:"",showCancel:!1,showSubmit:!1,modalOptions:{show:!1},events:{"click .submit":"onSubmitClick"},initialize:function(a){a=a||{},a.modalOptions=b.extend(this.modalOptions,a.modalOptions||{}),e.prototype.initialize.apply(this,arguments)},onRender:function(){e.prototype.onRender.apply(this,arguments),this.contentView&&this.$(".modal-content").html(this.contentView.render().el),0===this.$el.closest("html").length&&(a("body").append(this.$el),this.$(".modal").modal(this.modalOptions))},getTemplateData:function(){var a=e.prototype.getTemplateData.apply(this,arguments);return b.extend(a,{header:this.header,showCancel:this.showCancel,showSubmit:this.showSubmit})},show:function(){this.render(),this.$(".modal").modal("show"),this.onShow(),this.contentView&&this.contentView.onShow()},hide:function(){this.$(".modal").modal("hide"),this.contentView&&this.contentView.onHide(),this.onHide()},onSubmitClick:function(){this.trigger("submit",this)}})}),define("text!view/templates/MessageView.html",[],function(){return'\n{{#body}}\n<div class="message-body {{../cls}}">\n{{{.}}}\n</div>\n{{/body}}\n'}),define("view/MessageView",["jquery","backbone","handlebars","PlumageRoot","view/ModelView","text!view/templates/MessageView.html"],function(a,b,c,d,e,f){return d.view.MessageView=e.extend({className:"message",template:f,updateOnMessage:!0,events:{"click a":"onLinkClick"},initialize:function(){e.prototype.initialize.apply(this,arguments),this.updateOnMessage&&theApp.dispatch.on("message",this.setMessage.bind(this))},onRender:function(){e.prototype.onRender.apply(this,arguments),this.updateClass()},getTemplateData:function(){var a={body:this.messageBody,cls:this.messageCls};return a},updateClass:function(){this.$el.toggleClass("show",Boolean(this.messageBody))},setMessage:function(a,b){this.messageBody=a,this.messageCls=b,this.shown&&this.render()},onShow:function(){e.prototype.onShow.apply(this,arguments),this.render()},setModel:function(){this.messageBody=void 0,this.messageCls=void 0,e.prototype.setModel.apply(this,arguments)}})}),define("text!view/templates/ConfirmationDialog.html",[],function(){return'<div class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">\n  <div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>\n    <h3 id="myModalLabel">{{{headerTemplate}}}</h3>\n  </div>\n  <div class="modal-body">\n    <div class="message"></div>\n    <div class="modal-content">\n	    {{{bodyTemplate}}}\n    </div>\n  </div>\n  <div class="modal-footer">\n  <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>\n    <button class="btn confirm {{buttonCls}}">{{buttonText}}</button>\n  </div>\n</div>'}),define("view/ConfirmationDialog",["jquery","underscore","backbone","handlebars","PlumageRoot","view/ModalDialog","view/MessageView","text!view/templates/ConfirmationDialog.html"],function(a,b,c,d,e,f,g,h){return e.view.ConfirmationDialog=f.extend({template:h,headerTemplate:"Confirmation Dialog",message:void 0,messageCls:void 0,bodyTemplate:"Are you sure you want to do this?",buttonText:"Confirm",buttonCls:"btn-success",events:{"click .confirm":"onConfirmClick"},subViews:[{viewCls:g,name:"message",selector:".message",updateOnMessage:!1,replaceEl:!0}],initialize:function(a){a=a||{},f.prototype.initialize.apply(this,arguments),this.headerTemplate=this.initTemplate(this.headerTemplate),this.bodyTemplate=this.initTemplate(this.bodyTemplate)},getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);return b.extend(a,{headerTemplate:this.headerTemplate(a),bodyTemplate:this.bodyTemplate(a),buttonText:this.buttonText,buttonCls:this.buttonCls,message:this.message,messageCls:this.messageCls})},setMessage:function(a,b){this.getSubView("message").setMessage(a,b)},onConfirmClick:function(b){a(b.target).attr("disabled",""),this.trigger("confirm")}})}),define("text!view/templates/DisplayField.html",[],function(){return'{{#if label}}\n<div class="control-group">\n  {{#label}}\n  <label class="control-label">{{.}}</label>\n  {{/label}}\n  <div class="controls">\n{{/if}}\n    <div class="field-value">\n      {{#if loading}}\n        <span class="loading">loading...</span>\n      {{else}}\n        {{value}}\n      {{/if}}\n    </div>\n{{#if label}}\n  </div>\n</div>\n{{/if}}'}),define("view/DisplayField",["jquery","underscore","backbone","handlebars","PlumageRoot","view/ModelView","text!view/templates/DisplayField.html"],function(a,b,c,d,e,f,g){return e.view.DisplayField=f.extend({className:"display-field",template:g,labelAttr:void 0,label:void 0,valueAttr:void 0,value:void 0,defaultValue:"",getTemplateData:function(){var a={label:this.label,value:this.getValue()};return this.model&&(a.label||this.labelAttr&&(a.label=this.model.get(this.labelAttr)),a.loading=!this.model.fetched),a},getValue:function(){var a=this.value;return this.model&&!a&&this.valueAttr&&this.model.fetched&&(a=this.model.get(this.valueAttr)),a?this.processValue(a):this.defaultValue},processValue:function(a){return a}})}),define("text!view/templates/NavView.html",[],function(){return'\n<div id="nav-top">\n  <a class="brand" href="/">\n    <span class="nav-title">{{title}}</span>\n    {{#subtitle}}<span class="nav-subtitle">{{.}}</span>{{/subtitle}}\n  </a>\n  <div id="extra-links">\n  {{#if aboutUrl}}\n    <a class="outlink" href="{{aboutUrl}}" target="_">{{aboutLabel}}</a>\n  {{/if}}\n\n  {{#if helpUrl}}\n    <a class="outlink" href="{{helpUrl}}" target="_">{{helpLabel}}</a>\n  {{/if}}\n  </div>\n\n  <div id="nav-top-right" class="nav pull-right">\n    <div class="nav-search"></div>\n  </div>\n  <div class="clear"></div>\n</div>\n\n{{#if navItems}}\n<div id="main-nav" class="navbar">\n  <div class="navbar-inner">\n    <ul class="nav-menu nav menu">\n      {{#navItems}}\n      <li class="{{className}}"><a href="{{url}}">{{label}}</a></li>\n      {{/navItems}}\n    </ul>\n\n    <ul class="nav right-nav pull-right">\n      <li class="user-menu"></li>\n    </ul>\n  </div>\n</div>\n{{/if}}'}),define("view/NavView",["jquery","underscore","backbone","PlumageRoot","view/ContainerView","view/menu/DropdownMenu","view/form/fields/SearchField","model/SearchResults","text!view/templates/NavView.html","bootstrap"],function(a,b,c,d,e,f,g,h,i){return d.view.NavView=e.extend({template:i,title:void 0,subtitle:void 0,showSearch:!0,navItems:[{className:"home-menu",label:"Home",url:"/home"}],userMenuItems:[{label:"logout",value:"logout"}],logoutUrl:"/logout",aboutUrl:void 0,aboutLabel:"About",helpUrl:void 0,helpLabel:"Help",events:{"click .nav-menu a":"onNavClick","click a.brand":"onLinkClick"},initialize:function(){this.subViews=[],this.userMenuItems&&this.subViews.push(this.userMenu=new f({selector:".user-menu",iconCls:"icon-user",label:window.currentUser,menuItems:this.userMenuItems,replaceEl:!0})),this.showSearch&&(this.searchField=new g({selector:".nav-search",placeholder:"Search"}),this.subViews.push(this.searchField)),this.userMenu&&this.userMenu.on("itemClick",this.onUserMenuClick.bind(this)),e.prototype.initialize.apply(this,arguments),this.searchField&&(this.searchField.on("change",this.onSearchValueChange.bind(this)),this.searchField.on("blur",this.onSearchBlur.bind(this)),this.searchField.on("submit",this.onSearchSubmit.bind(this)))},getUrl:function(a){return a.url},onRender:function(){var b=this.getTemplateData();a(this.el).html(this.template(b)),this.$(".dropdown-toggle").dropdown(),this.currentNav&&this.select(this.currentNav)},getTemplateData:function(){for(var a=[],c=0;c<this.navItems.length;c++){var d=b.clone(this.navItems[c]);d.url=this.getUrl(d),a.push(d)}return{title:this.title,subtitle:this.subtitle,navItems:a,showAbout:void 0!==this.aboutTemplate,showSearch:this.showSearch,aboutUrl:this.aboutUrl,aboutLabel:this.aboutLabel,helpUrl:this.helpUrl,helpLabel:this.helpLabel}},processUrl:function(a){return a},select:function(a){this.currentNav=a,this.$(".nav li").removeClass("active"),this.$("."+a).addClass("active")},expandSearchField:function(){var a=this.$(".right-nav");a.hasClass("expand-search")||(a.addClass("expand-search"),this.searchField.$el.attr("placeholder",""))},contractSearchField:function(){var a=this.$(".right-nav");a.hasClass("expand-search")&&(a.removeClass("expand-search"),this.searchField.$el.attr("placeholder",this.searchField.noSelectionText))},createSearchModel:function(a){return new h({query:a,model:"all"})},onNavClick:function(a){a.target;a.preventDefault()},onUserMenuClick:function(a,b){"logout"===b&&(window.location=this.logoutUrl)},onSearchValueChange:function(){this.expandSearchField()},onSearchBlur:function(){this.contractSearchField()},onSearchSubmit:function(a,b){var c=this.createSearchModel(b);c.navigate(),this.contractSearchField()}})}),define("text!view/templates/Popover.html",[],function(){return'<div class="arrow"></div>\n{{#hasTitle}}\n<h3 class="popover-title"></h3>\n{{/hasTitle}}\n<div class="popover-content"></div>\n'}),define("view/Popover",["jquery","underscore","backbone","PlumageRoot","view/ModelView","view/View","text!view/templates/Popover.html"],function(a,b,c,d,e,f,g){return d.view.Popover=e.extend({template:g,className:"popover fade",title:void 0,content:void 0,targetEl:void 0,position:void 0,placement:"right",dynamicPlacement:!0,events:{mouseover:"onMouseOver",mouseout:"onMouseOut","click a":"onLinkClick"},initialize:function(){if(e.prototype.initialize.apply(this,arguments),this.title&&(this.subViews=[new e({selector:".popover-title",template:this.title,replaceEl:!0})].concat(this.subViews||[])),this.content&&this.setContent(this.content),this.targetEl){var a=this.targetEl;delete this.targetEl,this.setTargetEl(a)}},getTemplateData:function(){var a=e.prototype.getTemplateData.apply(this,arguments);return a.hasTitle=void 0!==this.title,a},setTargetEl:function(b){this.targetEl&&this.targetEl.removeClass("popovered"),this.targetEl=a(b),this.$el.is(":visible")&&this.targetEl.addClass("popovered")},setContent:function(a){this.content&&this.content.off&&(this.content.off("afterRender",this.onAfterContentRender),this.subViews=b.select(this.subViews,function(a){return".popover-content"!==a.selector})),a="string"==typeof a?new f({template:a}):(new d.ViewBuilder).buildView(a),a.selector=".popover-content",a.on("afterRender",this.onAfterContentRender.bind(this)),this.content=a,this.subViews.push(this.content)},onRender:function(){e.prototype.onRender.apply(this,arguments),0===this.$el.closest("html").length&&a("body").append(this.$el)},render:function(){e.prototype.render.apply(this,arguments),this.updatePosition()},show:function(){this.cancelHide(),this.render(),this.$el.hasClass("in")||(this.targetEl.addClass("popovered"),this.$el.show(),this.$el.addClass("in"),this.onShow())},cancelHide:function(){clearTimeout(this.hideTimeout),clearTimeout(this.fadeTimeout)},hide:function(){var a=this.$el,b=this;a.hasClass("in")&&(this.cancelHide(),this.fadeTimeout=setTimeout(function(){b.targetEl.removeClass("popovered"),a.removeClass("in"),b.onHide(),b.hideTimeout=setTimeout(function(){a.hide()},200),b.trigger("hide",b)},300))},hideIfOut:function(b,c){b=a(b),c=a(c),a.contains(b,c)||c.closest(".popover").is(this.$el)||c.is(this.targetEl)||this.hide()},update:function(){},onMouseOver:function(){this.cancelHide()},onMouseOut:function(b){var c=a(b.toElement||b.relatedTarget);a(this.targetEl).has(c).length>0||c.closest(".popover").is(this.$el)||(a(this.targetEl).removeClass("active"),this.hide())},onAfterContentRender:function(){this.updatePosition()},updatePosition:function(){var b=this.targetEl,c=this.placement,d=a(window).height(),e=a(window).width(),f=this.getPosition(b,c);this.dynamicPlacement&&(("left"===c||"right"===c)&&(f.left<0||f.left+this.$el.width()>e)||("top"===c||"bottom"===c)&&(f.top<0||f.top+this.$el.height()>d))&&(c=this.getOppositePlacement(c),f=this.getPosition(b,c)),this.$el.removeClass("top right bottom left"),this.$el.addClass(c),this.$el.css({top:f.top,left:f.left}),void 0!==f.arrowLeft&&this.$(".arrow").css({left:f.arrowLeft}),void 0!==f.arrowTop&&this.$(".arrow").css({top:f.arrowTop})},getPosition:function(b,c){var d,e,f,g,h=a(b),i=h.offset(),j=h[0].getBoundingClientRect(),k=j.width,l=j.height,m=a(window).width(),n=a(window).height(),o=this.$el.width(),p=this.$el.height();if("top"===c||"bottom"===c){if(e="top"===c?i.top-this.$el.height():i.top+l,d=i.left+k/2-o/2,d>m-o||0>d){var q=Math.max(Math.min(d,m-o),0);f=d-q+o/2,d=q}}else{if("left"!==c&&"right"!==c)throw"Invalid placement";if(d="left"===c?i.left-o:i.left+k,e=i.top+l/2-p/2,e>n-p||0>e){var r=Math.max(Math.min(e,n-p),0);f=e-r+p/2,e=r}}var s=this.position;return s&&("top"===c||"bottom"===c?(d+=s[0]-k/2,e+=s[1]):(d+=s[0],e+=s[1]-l/2)),{top:e,left:d,arrowTop:f,arrowLeft:g}},getOppositePlacement:function(a){switch(a){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top"}throw"Invalid placement"}})}),define("text!view/templates/TabView.html",[],function(){return'<div class="tabs">\n  <ul>\n    {{#tabs}}\n    <li class="{{id}} {{#active}}active{{/active}}"><a data-tab="#{{id}}-tab">{{label}}</a></li>\n    {{/tabs}}\n  </ul>\n</div>\n\n<div class="tab-content">\n  {{#tabs}}\n  <div class="tab-pane {{#active}}active{{/active}}" id="{{id}}-tab"></div>\n  {{/tabs}}\n</div>'}),function(a){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),define("view/TabView",["jquery","underscore","backbone","handlebars","PlumageRoot","view/View","view/ModelView","text!view/templates/TabView.html","jquery.cookie"],function(a,b,c,d,e,f,g,h){return e.view.TabView=g.extend({className:"tab-view tab-theme",template:d.compile(h),viewStateAttr:"tab",cookieName:void 0,events:{"click .tabs a":"onTabClick"},logTabNavigation:!1,initialize:function(){g.prototype.initialize.apply(this,arguments),this.eachTabSubView(function(a){a.selector="#"+a.tabId+"-tab"},this)},onRender:function(){var b=this.getTemplateData();a(this.el).html(this.template(b)),this.updateActiveTab()},setModel:function(){g.prototype.setModel.apply(this,arguments);var a=this.model.get(this.viewStateAttr);a||(a=this.getTabCookie(),void 0===a&&(a=b.find(this.subViews,function(a){return void 0!==a.tabId}).tabId),this.model.set(this.viewStateAttr,a),this.model.updateUrl())},getActiveTab:function(){return this.model?this.model.get(this.viewStateAttr):void 0},setActiveTab:function(a){this.model&&a!==this.getActiveTab()&&(this.model.set(this.viewStateAttr,a),this.model.updateUrl(),this.updateTabCookie(),this.logTabNavigation&&window.router&&window.router.logNavigationAction(window.location.href,window.location.pathname))},getTemplateData:function(){var a=[];return this.eachTabSubView(function(b){var c={id:b.tabId,active:b.tabId===this.getActiveTab(),label:b.tabLabel};a.push(c)},this),{tabs:a}},updateActiveTab:function(){var a=this.getActiveTab();void 0===a&&(a=this.subViews[0].tabId);var b=a+"-tab",c=this.$("a[data-tab=#"+b+"]");this.$(".tabs li").removeClass("active"),c.parent("li").addClass("active"),c&&this.eachTabSubView(function(a){a.tabId===this.getActiveTab()?(this.$el.addClass(a.tabId+"-tab-selected"),this.$("#"+a.tabId+"-tab").addClass("active"),this.shown&&a.onShow()):(this.$el.removeClass(a.tabId+"-tab-selected"),this.$("#"+a.tabId+"-tab").removeClass("active"),this.shown&&a.onHide())},this)},getTabCookie:function(){return this.cookieName?a.cookie("tabview."+this.cookieName):void 0},updateTabCookie:function(){this.cookieName&&a.cookie("tabview."+this.cookieName,this.getActiveTab(),{expires:7})},onTabClick:function(b){b.preventDefault(),b.stopPropagation();var c=a(b.target),d=this.cleanTabId(c.data("tab"));b.preventDefault(),this.setActiveTab(d)},eachTabSubView:function(a,c){b.each(this.subViews,function(b){if(b.tabId){if(c)return a.call(this,b);a(b)}},this)},onModelLoad:function(){this.updateActiveTab()},onModelChange:function(){this.updateActiveTab()},onShow:function(){f.prototype.onShow.apply(this,arguments),this.updateActiveTab(),this.eachSubView(function(a){(a.tabId===this.getActiveTab()||void 0===a.tabId)&&a.onShow()},this)},onHide:function(){f.prototype.onHide.apply(this,arguments),this.eachSubView(function(a){(a.tabId===this.getActiveTab()||void 0===a.tabId)&&a.onHide()},this)},cleanTabId:function(a){return a.replace(/^#/,"").replace(/-tab$/,"")}})}),define("plumage",["PlumageRoot","App","collection/ActivityCollection","collection/BufferedCollection","collection/Collection","collection/CommentCollection","collection/DataCollection","collection/Selection","collection/GridSelection","collection/UserCollection","controller/BaseController","controller/ModelController","ControllerManager","model/Activity","model/Model","model/Comment","model/Data","model/SearchResults","model/User","RequestManager","Router","slickgrid-all","util/ArrayUtil","util/D3Util","util/DateTimeUtil","util/Logger","util/ModelUtil","view/View","view/CollectionView","view/comment/CommentForm","view/comment/CommentsSection","view/comment/CommentView","view/comment/ExpandableComments","view/ContainerView","view/controller/IndexView","view/form/fields/ButtonGroupSelect","view/form/fields/Calendar","view/form/fields/CategorySelect","view/form/fields/Checkbox","view/form/fields/DateField","view/form/fields/DateRangeField","view/form/fields/DropdownMultiSelect","view/form/fields/DropdownSelect","view/form/fields/Field","view/form/fields/FieldWithPicker","view/form/fields/FilterCheckbox","view/form/fields/FilterTypeAhead","view/form/fields/HourSelect","view/form/fields/InPlaceTextField","view/form/fields/MultiSelect","view/form/fields/Radio","view/form/fields/RadioButtonGroup","view/form/fields/SearchField","view/form/fields/Select","view/form/fields/TextArea","view/form/fields/TypeAhead","view/form/fields/picker/DateRangePicker","view/form/fields/picker/Picker","view/form/Form","view/form/SelectField","view/grid/FilterView","view/grid/Formatters","view/grid/GridView","view/grid/GridData","view/grid/Pager","view/ListAndDetailView","view/ListItemView","view/ListView","view/menu/DropdownMenu","view/ConfirmationDialog","view/DisplayField","view/MessageView","view/ModalDialog","view/ModelView","view/NavView","view/Popover","view/TabView"],function(a){return a});